image:
  repository: ghcr.io/BrianCLong/intelgraph/worker-python
  tag: v0.3.0-slim
  pullPolicy: IfNotPresent

replicas: 1

env:
  - name: KAFKA_BROKERS
    valueFrom: { secretKeyRef: { name: kafka-bootstrap, key: brokers } }
  - name: REDIS_URL
    valueFrom: { secretKeyRef: { name: redis, key: url } }
  - name: S3_BUCKET
    value: intelgraph-cache
  - name: VAULT_ADDR
    valueFrom: { secretKeyRef: { name: vault, key: addr } }
  - name: VAULT_K8S_ROLE
    value: "worker"
  - name: REGION
    value: eu-west-1

keda:
  minReplicaCount: 1
  maxReplicaCount: 20
  pollingInterval: 10
  cooldownPeriod: 60
  lagThreshold: "100"

kafka:
  bootstrapServers: "PLAINTEXT://kafka:9092"
  consumerGroup: "runner"
  topic: "runbook.event"
  offsetResetPolicy: "latest"
  authRef: ""
