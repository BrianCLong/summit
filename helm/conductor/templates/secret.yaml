{{- if and (not .Values.secrets.existingSecret) (or (not (empty .Values.secrets.databaseUrl)) (not (empty .Values.secrets.redisUrl))) }}
apiVersion: v1
kind: Secret
metadata:
  name: conductor-secrets
type: Opaque
# Dev-only inline credentials. Prefer pre-provisioned secrets for production.
stringData:
  {{- if not (empty .Values.secrets.databaseUrl) }}
  {{ default "DATABASE_URL" .Values.secrets.keys.databaseUrl }}: "{{ .Values.secrets.databaseUrl }}"
  {{- end }}
  {{- if not (empty .Values.secrets.redisUrl) }}
  {{ default "REDIS_URL" .Values.secrets.keys.redisUrl }}: "{{ .Values.secrets.redisUrl }}"
  {{- end }}
{{- end }}
