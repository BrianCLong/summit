{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "data-spine://customer-profile/1.1.0",
  "title": "Customer Profile",
  "type": "object",
  "properties": {
    "id": {
      "type": "string",
      "description": "Customer profile identifier"
    },
    "email": {
      "type": "string",
      "format": "email",
      "description": "Primary email address"
    },
    "ssn": {
      "type": "string",
      "pattern": "^[0-9]{3}-[0-9]{2}-[0-9]{4}$",
      "description": "US social security number"
    },
    "home_region": {
      "type": "string",
      "description": "Residency region for the record"
    },
    "phone": {
      "type": "string",
      "pattern": "^\\+?[0-9]{10,15}$",
      "description": "Contact phone number"
    }
  },
  "required": ["id", "email", "ssn", "home_region"],
  "additionalProperties": false,
  "x-data-spine": {
    "version": "1.1.0",
    "contract": "customer-profile",
    "classification": ["PII"],
    "residency": {
      "allowedRegions": ["us-east-1", "us-west-2", "eu-west-1"],
      "defaultRegion": "us-east-1"
    },
    "policies": {
      "lowerEnvironmentHandling": "tokenize",
      "fieldPolicies": [
        {
          "field": "email",
          "action": "tokenize"
        },
        {
          "field": "ssn",
          "action": "redact"
        },
        {
          "field": "home_region",
          "action": "pass"
        },
        {
          "field": "phone",
          "action": "tokenize"
        }
      ],
      "transformations": {
        "deterministic": true,
        "reversible": true
      }
    },
    "provenance": {
      "createdBy": "data-spine-bootstrap",
      "createdAt": "2025-01-01T00:00:00.000Z",
      "checksum": "initial"
    }
  }
}
