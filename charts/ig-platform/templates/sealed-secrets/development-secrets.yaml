{{- if and .Values.sealedSecrets.enabled .Values.sealedSecrets.developmentSecrets.enabled }}
# Development-only sealed secrets (encrypted with dev public key)
# In production, these would be replaced with proper ExternalSecrets
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: {{ include "ig-platform.fullname" . }}-dev-database-secrets
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "ig-platform.labels" . | nindent 4 }}
    app.kubernetes.io/component: development-secrets
spec:
  encryptedData:
    # These are example sealed values - replace with actual sealed secrets in real deployments
    postgres-user: {{ .Values.sealedSecrets.developmentSecrets.postgresUser | quote }}
    postgres-password: {{ .Values.sealedSecrets.developmentSecrets.postgresPassword | quote }}
    postgres-database: {{ .Values.sealedSecrets.developmentSecrets.postgresDatabase | quote }}
    neo4j-user: {{ .Values.sealedSecrets.developmentSecrets.neo4jUser | quote }}
    neo4j-password: {{ .Values.sealedSecrets.developmentSecrets.neo4jPassword | quote }}
    redis-password: {{ .Values.sealedSecrets.developmentSecrets.redisPassword | quote }}
    minio-access-key: {{ .Values.sealedSecrets.developmentSecrets.minioAccessKey | quote }}
    minio-secret-key: {{ .Values.sealedSecrets.developmentSecrets.minioSecretKey | quote }}
  template:
    metadata:
      name: {{ include "ig-platform.fullname" . }}-dev-database-secrets
      namespace: {{ .Release.Namespace }}
      labels:
        {{- include "ig-platform.labels" . | nindent 8 }}
    type: Opaque
---
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: {{ include "ig-platform.fullname" . }}-dev-jwt-secrets
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "ig-platform.labels" . | nindent 4 }}
    app.kubernetes.io/component: development-secrets
spec:
  encryptedData:
    jwt-secret: {{ .Values.sealedSecrets.developmentSecrets.jwtSecret | quote }}
    oidc-client-secret: {{ .Values.sealedSecrets.developmentSecrets.oidcClientSecret | quote }}
  template:
    metadata:
      name: {{ include "ig-platform.fullname" . }}-dev-jwt-secrets
      namespace: {{ .Release.Namespace }}
      labels:
        {{- include "ig-platform.labels" . | nindent 8 }}
    type: Opaque
---
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: {{ include "ig-platform.fullname" . }}-dev-api-keys
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "ig-platform.labels" . | nindent 4 }}
    app.kubernetes.io/component: development-secrets
spec:
  encryptedData:
    openai-api-key: {{ .Values.sealedSecrets.developmentSecrets.openaiApiKey | quote }}
    slack-webhook-url: {{ .Values.sealedSecrets.developmentSecrets.slackWebhookUrl | quote }}
    teams-webhook-url: {{ .Values.sealedSecrets.developmentSecrets.teamsWebhookUrl | quote }}
    pagerduty-integration-key: {{ .Values.sealedSecrets.developmentSecrets.pagerdutyIntegrationKey | quote }}
  template:
    metadata:
      name: {{ include "ig-platform.fullname" . }}-dev-api-keys
      namespace: {{ .Release.Namespace }}
      labels:
        {{- include "ig-platform.labels" . | nindent 8 }}
    type: Opaque
{{- end }}