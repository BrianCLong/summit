# charts/gateway/values.yaml
replicaCount: 3

image:
  repository: intelgraph-gateway
  tag: latest

# Canary deployment strategy enabled by default
canary:
  enabled: true
  steps:
    - setWeight: 10
    - pause: { duration: 1m }
    - setWeight: 50
    - pause: { duration: 1m }
  analysis:
    interval: 30s
    threshold: 5
    metrics:
      - name: success-rate
        threshold: 99
        interval: 1m
      - name: latency-p95
        threshold: 400
        interval: 1m

federation:
  useLocal: false
  pollIntervalMs: 30000
  subgraphs:
    - name: intelgraph
      url: http://intelgraph-core:4001/graphql
    - name: mlEngine
      url: http://ml-engine:4002/graphql
    - name: ingest
      url: http://ingest-service:4003/graphql
