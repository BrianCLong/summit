# MC Platform v0.3.3 Post-Deployment Operations Runbook

## Overview

This runbook provides operational procedures for managing MC Platform v0.3.3 in production following successful deployment with 100% compliance validation.

## Daily Operations

### 1. Tenant Budget Monitoring

**Frequency**: Daily at 9:00 AM UTC

```bash
# Check tenant budget utilization
python3 scripts/generate-tenant-budget-report.py --format=daily

# Review critical alerts
kubectl get prometheusrules mc-tenant-budgets -o yaml | grep -A10 "severity: critical"

# Grafana dashboard: "MC Platform - Tenant Drilldowns v0.3.3"
# URL: /d/mc-tenant-drilldowns/mc-platform-tenant-drilldowns-v033
```

**Alert Thresholds**:

- 80% budget utilization: Warning alert
- 90% budget utilization: Critical alert + PagerDuty escalation

### 2. Autonomy Operations Validation (TENANT_003)

**Frequency**: Every 6 hours

```bash
# Run autonomy simulation validation
cd services/autonomy-tier3/
python3 tenant003-simulator.py --quick-validation

# Check success rate (must be >99.9%)
# Check compensation rate (must be <0.5%)
```

**Success Criteria**:

- Operations success rate ≥99.9%
- Compensation events ≤0.5%
- Policy violations = 0
- Residency violations = 0

### 3. Configuration Drift Detection

**Frequency**: Triggered by CI, reviewed daily

```bash
# Manual drift check
gh workflow run config-attest.yml

# Review attestation artifacts
ls -la evidence/v0.3.3/config/
```

## Weekly Operations

### 1. Evidence Bundle Review

**Frequency**: Weekly on Mondays

```bash
# Generate fresh evidence bundle
python3 scripts/package-v033-evidence.py

# Verify 100% compliance maintained
jq '.bundle_metadata.overall_compliance_percent' dist/evidence-v0.3.3-mc-comprehensive.json

# Should return: 100.0
```

### 2. RAG Grounding Verification

**Frequency**: Weekly

```bash
# Run trajectory validation
python3 tests/trajectory/validate_react.py tests/trajectory/test_react.yaml

# Verify pass rate ≥95%
# Check grounding attestation
jq '.verification_summary.pass_rate' evidence/v0.3.3/rag/grounding-final-attest.json
```

### 3. Egress Gateway Health

**Frequency**: Weekly

```bash
# Test egress gateway routing
./scripts/test-egress-gateway.sh

# Verify primary/secondary gateway failover
# Check NetworkPolicy enforcement
kubectl get networkpolicy -n intelgraph-prod
```

## Monthly Operations

### 1. Comprehensive Health Check

**Frequency**: First Monday of each month

```bash
# Full production readiness validation
./scripts/v033-production-readiness.sh

# Must achieve 100% pass rate (12/12 validations)
# Review detailed report in out/v033-readiness-YYYYMMDD/
```

### 2. Evidence Archive

**Frequency**: End of month

```bash
# Archive monthly evidence bundle
DATE=$(date +%Y-%m)
cp dist/evidence-v0.3.3-mc-comprehensive.json archives/evidence-v0.3.3-$DATE.json

# Verify cryptographic signature
sha256sum archives/evidence-v0.3.3-$DATE.json
```

## Incident Response

### Budget Alert Response

**Trigger**: TenantBudgetCritical90Percent alert

1. **Immediate Actions** (within 5 minutes):

   ```bash
   # Identify affected tenant
   kubectl logs -l app=prometheus -n monitoring | grep TenantBudgetCritical

   # Check current utilization
   python3 scripts/generate-tenant-budget-report.py --tenant=TENANT_XXX
   ```

2. **Investigation** (within 15 minutes):
   - Review Grafana dashboard for usage patterns
   - Identify cost drivers (compute, storage, network)
   - Check for anomalous activity

3. **Mitigation** (within 30 minutes):
   - Contact tenant for usage validation
   - Consider temporary scaling limits if abuse detected
   - Document incident in operational log

### Autonomy Operation Failure

**Trigger**: TENANT_003 autonomy success rate <99.9%

1. **Immediate Actions**:

   ```bash
   # Check recent operations
   ls -la evidence/v0.3.3/autonomy/TENANT_003/

   # Review compensation events
   cat evidence/v0.3.3/autonomy/TENANT_003/compensation_*.json
   ```

2. **Safety Measures**:
   - Reduce autonomy tier if compensation rate >0.5%
   - Enable manual approval for high-risk operations
   - Alert security team for policy violations

### Configuration Drift Detection

**Trigger**: Config drift detected in CI

1. **Assessment**:

   ```bash
   # Review detected changes
   gh run view --log [RUN_ID] | grep "Config drift detected"
   ```

2. **Approval Process**:
   - Review changes for security implications
   - Get approval from change authority
   - Re-run with CHANGE_APPROVED=1 if approved

3. **Rollback** (if unauthorized):
   ```bash
   # Restore from baseline
   cp evidence/v0.3.3/config/config-baseline.json evidence/v0.3.3/config/config-current.json
   ```

## Monitoring Dashboards

### Primary Dashboards

1. **MC Platform - Tenant Drilldowns v0.3.3**
   - Tenant autonomy success rates
   - Policy deny rates
   - Cost vs budget utilization
   - A/A replication lag
   - GraphQL P95 latency

2. **Prometheus Alerts**
   - TenantBudgetWarning80Percent
   - TenantBudgetCritical90Percent
   - TenantBudgetBurnRateHigh
   - TenantAutonomyFailureRate
   - ConfigurationDriftDetected

### Key Metrics

- **Budget Utilization**: Target <80%, Critical >90%
- **Autonomy Success Rate**: Target >99.9%
- **RAG Grounding Pass Rate**: Target >95%
- **Configuration Compliance**: Target 100%

## Escalation Procedures

### Budget Issues

- **Level 1**: Operations team (budget warnings)
- **Level 2**: Finance team (critical budget alerts)
- **Level 3**: Leadership team (budget overruns)

### Security Issues

- **Level 1**: Security team (policy violations)
- **Level 2**: CISO (data residency violations)
- **Level 3**: Executive team (major security incidents)

### Technical Issues

- **Level 1**: Engineering team (performance degradation)
- **Level 2**: Platform team (system failures)
- **Level 3**: CTO (critical system outages)

## Emergency Contacts

- **Operations Team**: ops@company.com / Slack: #mc-platform-ops
- **Security Team**: security@company.com / Slack: #security-incidents
- **Platform Team**: platform@company.com / Slack: #platform-engineering

---

**Last Updated**: 2025-09-26 following v0.3.3 production deployment
**Next Review**: 2025-10-26
