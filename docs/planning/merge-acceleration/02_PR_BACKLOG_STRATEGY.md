# PR Backlog Strategy & Tooling

**Generated by Jules | Date: 2025-05-20 (Simulated)**

## 1. The Situation
We have **376 Open PRs**. This is an unmanageable backlog that slows velocity, hides critical bugs, and demoralizes the team.

## 2. The Categorization Strategy

Since we cannot manually review 376 PRs in one day, we will use a **"Triage & Slash"** approach using the following buckets:

### Bucket A: "The Ghost Town" (Stale > 30 Days)
*   **Definition**: No activity in 30 days. Merge conflicts likely.
*   **Action**: **Auto-Close** with a polite message: *"Closing due to inactivity. Please reopen if this is still relevant and conflicts are resolved."*
*   **Expected Impact**: Removes ~40-60% of the backlog.

### Bucket B: "The Quick Wins" (Docs, Chore, Low-Risk Fix)
*   **Definition**: Small diffs, no logic changes, passing CI.
*   **Action**: **Fast-Track Merge**. Assign to junior engineers or use auto-merge if coverage is high.

### Bucket C: "The Blockers" (Feature work, Refactors)
*   **Definition**: Active work, recent commits, potentially blocking others.
*   **Action**: **Prioritize**. These get the assigned reviewers.

---

## 3. PR Inventory Tool (Concept)

Since I cannot access the live GitHub API, I have designed a script concept that you (the human) can run to generate the inventory file.

```javascript
// scripts/inventory-prs.js (Conceptual)
// Requires: gh CLI authenticated
const { execSync } = require('child_process');
const fs = require('fs');

const prs = JSON.parse(execSync('gh pr list --state open --limit 500 --json number,title,author,updatedAt,labels,mergeable').toString());

const report = prs.map(pr => {
  const daysSinceUpdate = (new Date() - new Date(pr.updatedAt)) / (1000 * 60 * 60 * 24);
  let bucket = 'C';
  if (daysSinceUpdate > 30) bucket = 'A (Stale)';
  else if (pr.labels.some(l => l.name.includes('docs') || l.name.includes('chore'))) bucket = 'B (Quick)';

  return { ...pr, bucket, daysSinceUpdate: daysSinceUpdate.toFixed(1) };
});

fs.writeFileSync('PR_INVENTORY.json', JSON.stringify(report, null, 2));
```

## 4. Manual Categorization Template

If you have a CSV export of the PRs, use this template to sort them:

| ID | Title | Domain (FE/BE/ML) | Days Open | Risk (H/M/L) | Action (Merge/Close/Review) |
|---|---|---|---|---|---|
| 123 | feat: new graph algo | BE | 5 | H | Review (Alice) |
| 120 | fix: typo in readme | Docs | 45 | L | Close (Stale) |
| 135 | chore: bump deps | Infra | 2 | L | Merge |

## 5. Execution Plan

1.  **Day 1**: Run "The Ghost Town" closure script. (Goal: <200 PRs).
2.  **Day 2**: Tag all "Quick Wins". Assign a "Merge Train" owner to merge them in batches.
3.  **Day 3**: Distribute the remaining ~100 "Blockers" to domain owners based on the **Reviewer Matrix** (see Merge Flow Policy).
