# Codebase State Report

**Generated by Jules | Date: 2025-05-20 (Simulated)**

## Executive Summary

The Summit codebase (IntelGraph) is a sophisticated but fragmented monorepo exhibiting significant "architectural drift." While the core technologies are modern (Node 18+, React 19, Neo4j, Rust, Python), the project structure has degraded into multiple competing standards.

**Key Findings:**
1.  **Duplicate App Structures**: Conflicting implementations of "server" (`server/` vs `apps/server`) and "client" (`apps/web` vs `client/`).
2.  **Root Directory Pollution**: Feature directories (`ab`, `ai`, `billing`, `degrade`) sit at the `server/` root instead of within `server/src/`.
3.  **Dependency Drift**: Inconsistent versions of critical libraries (e.g., Zod v4 in frontend, v3/v4 ambiguity in backend).
4.  **Package Manager Confusion**: Presence of both `package-lock.json` and `pnpm-lock.yaml` indicates split workflows.

---

## 1. Inventory & Taxonomy

### A. Backend Services

| Path | Name | Tech Stack | Status | Notes |
| :--- | :--- | :--- | :--- | :--- |
| `server/` | `intelgraph-server` | Node.js, Express, Apollo v5, Neo4j | **CORE** | The primary backend. Heavily drifted structure. |
| `apps/server` | `apps-server` | Node.js, Express, Apollo v3 | **DEPRECATED** | Skeletal/legacy implementation. Apollo v3 is outdated. |
| `rust/psc-runner` | `psc-runner` | Rust | **CORE** | High-performance runner for Summit framework. |

### B. Frontend Applications

| Path | Name | Tech Stack | Status | Notes |
| :--- | :--- | :--- | :--- | :--- |
| `apps/web` | `@intelgraph/web` | React 19, Vite, Tailwind v4, Zod v4 | **CORE** | The modern "Summit" web client. |
| `client/` | `intelgraph-client` | React, Vite | **LEGACY** | Older structure, likely the previous console. Contains `client/client` nested drift. |
| `apps/webapp` | N/A | Unknown | **UNCERTAIN** | Needs investigation; likely empty or redirect. |

### C. Data Science & ML

| Path | Name | Tech Stack | Status | Notes |
| :--- | :--- | :--- | :--- | :--- |
| `auto_scientist/` | N/A | Python | **CORE** | ML/AI experiment engines. |
| `prov-ledger/` | N/A | Python | **CORE** | Provenance ledger service. |

---

## 2. Architectural Drift Analysis

### The "Server" Split
*   **Drift**: Two folders named server.
*   **Resolution**: `apps/server` appears to be a vestigial scaffold (Apollo v3, minimal deps). `server/` is the active heavy lifter (Apollo v5, BullMQ, Telemetry).
*   **Action**: `apps/server` should be archived or merged.

### The "Client" Split
*   **Drift**: `apps/web` uses cutting-edge deps (React 19, Tailwind 4). `client/` uses standard React/Vite.
*   **Resolution**: `apps/web` is the target architecture. `client/` represents legacy debt.

### Root Pollution in `server/`
*   **Drift**: The following directories exist at `server/` root but belong in `server/src/` or `server/services/`:
    *   `ab/`
    *   `ai/`
    *   `billing/`
    *   `degrade/`
    *   `gateway/`
    *   `inference/`
    *   `orchestrator/`
    *   `plans/`
    *   `qos/`
    *   `relevance/`
    *   `safety/`
*   **Impact**: Makes imports messy (`../../billing`) and confuses new contributors.

---

## 3. Dependency Risk Assessment

*   **Zod Versioning**: `apps/web` uses `zod@^4.1.12`. This is an alpha/beta or custom version (Standard is v3.x). `server/` also uses `zod@4.1.12`. This implies a strict reliance on bleeding-edge features or a custom fork.
*   **Tailwind**: `apps/web` uses `tailwindcss@^4.1.14`. This is very new. `client/` likely uses v3.
*   **React**: `apps/web` is on React 19. This is bleeding edge.

## 4. Recommendations for Merge Acceleration

1.  **Strictly Define "The App"**: Officially deprecate `apps/server` and `client/` in documentation to stop PRs against them.
2.  **Standardize on PNPM**: Delete all `package-lock.json` files and enforce `pnpm` in CI.
3.  **Move & Group**: execute a mass-move of `server/{feature}` folders into `server/src/{feature}` to clean the root.
