# Portfolio Dashboard

*This document is auto-generated by a scheduled GitHub Actions workflow. Do not edit manually.*

## Current Portfolio Status

<!-- AUTOGENERATED_CONTENT_START -->
*No data has been aggregated yet. Please run the aggregation workflow.*
<!-- AUTOGENERATED_CONTENT_END -->

---

## CI/CD Workflow Definitions

This section documents the proposed YAML structure for the GitHub Actions workflows that power this dashboard.

### 1. Per-Repo Summary Emission Workflow

Each participating repository will include a workflow file like this. This workflow runs on a daily schedule, generates the `ga_os_summary.json` artifact, and uploads it to be consumed by the central aggregation workflow.

**`.github/workflows/emit-ga-os-summary.yml`**
```yaml
name: 'Emit GA OS Summary'

on:
  schedule:
    - cron: '0 0 * * *' # Run daily at midnight
  workflow_dispatch:

jobs:
  emit-summary:
    runs-on: ubuntu-latest
    steps:
      - name: 'Checkout Code'
        uses: actions/checkout@v4

      - name: 'Setup Node.js and pnpm'
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'pnpm'

      - name: 'Install Dependencies'
        run: pnpm install

      - name: 'Generate GA Status'
        run: pnpm ga:status

      - name: 'Archive GA OS Summary'
        uses: actions/upload-artifact@v4
        with:
          name: ga-os-summary
          path: ga_status.json
          retention-days: 7
```

### 2. Central Portfolio Aggregation Workflow

A single, central repository (e.g., a dedicated `summit-portfolio` repo) will host this workflow. It runs on a schedule, downloads the summary artifacts from all other repositories, and runs the `portfolio_aggregate.mjs` script to update this dashboard.

**`.github/workflows/aggregate-portfolio-dashboard.yml`**
```yaml
name: 'Aggregate Portfolio Dashboard'

on:
  schedule:
    - cron: '0 1 * * *' # Run daily at 1 AM
  workflow_dispatch:

jobs:
  aggregate:
    runs-on: ubuntu-latest
    steps:
      - name: 'Checkout Code'
        uses: actions/checkout@v4

      - name: 'Setup Node.js and pnpm'
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'pnpm'

      - name: 'Install Dependencies'
        run: pnpm install

      - name: 'Download Summaries from Repos'
        # This step would require a custom action or script that uses the GitHub API
        # to find and download artifacts from other repositories.
        # For this plan, we will assume this is possible with the right permissions.
        run: |
          mkdir -p artifacts/summaries
          # Pseudocode:
          # gh artifact download --repo summit/summit-app --name ga-os-summary --dir artifacts/summaries
          # gh artifact download --repo summit/intelgraph-server --name ga-os-summary --dir artifacts/summaries

      - name: 'Run Aggregation Script'
        run: node scripts/ops/portfolio_aggregate.mjs

      - name: 'Commit and Push Dashboard Changes'
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: 'docs(ops): Update portfolio dashboard'
          file_pattern: 'docs/ops/PORTFOLIO_DASHBOARD.md'
```
