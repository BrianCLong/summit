version: "1.0.0"

slos:
  - service_area: "API (Global)"
    user_journey: "General Availability"
    sli_definition: "http_requests_total{status!~\"5..\"} / Total Requests"
    slo_target: "99.9%"
    window: "28 days"
  - service_area: "API (Global)"
    user_journey: "General Latency"
    sli_definition: "http_request_duration_seconds (p95)"
    slo_target: "≤ 350ms"
    window: "28 days"
  - service_area: "Graph"
    user_journey: "Intelligence Query"
    sli_definition: "graph_query_latency_seconds (p95)"
    slo_target: "≤ 1.5s"
    window: "28 days"
  - service_area: "Ingest"
    user_journey: "E2E Processing"
    sli_definition: "Time from ingest to index"
    slo_target: "≤ 5s (p95)"
    window: "28 days"
  - service_area: "Jobs"
    user_journey: "Background Job Freshness"
    sli_definition: "Time since last successful run"
    slo_target: "≤ 1h"
    window: "24 hours"
  - service_area: "Provenance"
    user_journey: "Data Integrity"
    sli_definition: "Bundle verification success rate"
    slo_target: "100%"
    window: "24 hours"
  - service_area: "Security"
    user_journey: "Policy Enforcement"
    sli_definition: "Request denial rate (Guardrails)"
    slo_target: "≤ 15%"
    window: "24 hours"

budgets:
  burn_rates:
    - rate: "1x"
      time_to_exhaust: "28 days"
      severity: "Info"
      action: "None"
    - rate: "10x"
      time_to_exhaust: "~3 days"
      severity: "Warning"
      action: "Investigate next business day"
    - rate: "14.4x"
      time_to_exhaust: "~2 days"
      severity: "Critical"
      action: "Page On-Call (Wake up)"
    - rate: "100x"
      time_to_exhaust: "~7 hours"
      severity: "Critical"
      action: "Page On-Call (Immediate)"
  policies:
    - state: "Red"
      trigger: "< 20% of Error Budget remaining"
      consequences:
        - "Release Freeze: No new features deployed to Production."
        - "Focus Shift: Engineering sprints pivot to Reliability & Tech Debt."
        - "Exception: Only critical security patches or reliability fixes allowed."
        - "Exit Criteria: Budget recovers to > 30%."
    - state: "Yellow"
      trigger: "< 50% of Error Budget remaining"
      consequences:
        - "Review: Post-mortem of recent incidents required before next release."
        - "Gate: Non-critical releases require VP/Director approval."
