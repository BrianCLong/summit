# GA OS Interface Contract v1.0

This document specifies the technical contract that all repositories participating in the Summit Federated GA Operating System must adhere to. This contract enables interoperability, automates evidence collection, and provides portfolio-wide visibility.

## 1. Standard Commands

Each repository MUST provide scripts in its `package.json` (or equivalent tooling) for the following commands. These commands are the primary interface for the GA OS tooling.

-   **`evidence:generate`**:
    -   **Purpose**: Generates all required GA evidence for the repository at its current `HEAD` commit.
    -   **Output**: Produces artifacts in the standard layout (`artifacts/evidence/<commit>/`).
    -   **Example**: Runs unit tests, code coverage, linting, and generates an `evidence_manifest.json`.

-   **`evidence:verify`**:
    -   **Purpose**: Verifies the integrity of the generated evidence.
    -   **Action**: Checks that all files listed in `evidence_manifest.json` exist and that their SHA256 hashes match.
    -   **Exit Code**: Must exit `0` on success and non-zero on failure.

-   **`ga:status`**:
    -   **Purpose**: Performs a quick health check to determine if the repository is in a releasable state.
    -   **Output**: Produces a `ga_status.json` file in the root directory.
    -   **Example**: Checks if the main branch is protected, if CI is green, and if there are any open critical vulnerabilities.

## 2. Standard Artifact Layout

All generated evidence and operational summaries MUST be placed in a root `artifacts/` directory with the following structure:

-   **`artifacts/evidence/<commit_sha>/`**: Stores all evidence artifacts for a specific commit. This ensures that evidence is immutable and directly tied to a specific version of the code.
    -   `evidence_manifest.json` (Required)
    -   `test_results.xml`
    -   `coverage.lcov`
    -   `sast_scan.sarif`

-   **`artifacts/ops/daily/<date>/`**: Stores daily operational summaries generated by scheduled CI jobs.
    -   `ga_os_summary.json`

-   **`artifacts/release/<tag-or-version>/`**: Stores the final, signed GA Evidence Packet for a specific release.

## 3. Standard Summary JSON Schemas

Repositories MUST produce JSON files that conform to the standard schemas. This enables automated aggregation and dashboarding at the portfolio level. The canonical schemas are located in the `schemas/ga-os/` directory.

-   **`ga_status.json`**: A summary of the repository's current release readiness.
-   **`evidence_manifest.json`**: A manifest of all evidence files for a given commit, including their paths and SHA256 hashes.
-   **`merge_train_summary.json`**: (Optional) A summary of the current state of the merge train for high-velocity repositories.
