# Ops Evidence Pack

This document describes the **Ops Evidence Pack**, a standardized, immutable artifact generated by the Ops Verification gate.

## What is it?

The Ops Evidence Pack is a tarball containing the deterministic output of the `verify_ops` suite. It serves as audit-friendly proof that operational controls (SLOs, dashboards, drift detection, etc.) have been verified for a specific commit.

## Contents

Each pack is a directory named `<UTC_TIMESTAMP>_<SHORTSHA>` containing:

1.  **METADATA.json**: Machine-readable context (commit SHA, branch, timestamp, tool versions).
2.  **LOGS/**: Full capture of `verify_ops` standard output and error.
3.  **ARTIFACTS/**: Any structural outputs from validators (e.g., plan JSONs, dashboard definitions).
4.  **MANIFEST.json**: SHA256 checksums of every file in the pack for integrity verification.
5.  **SUMMARY.md**: A human-readable summary of the verification result (PASS/FAIL) and pointers to logs.

## How to Generate

### Locally

To generate an evidence pack locally:

```bash
./scripts/verification/generate_ops_evidence_pack.sh
```

The output will be stored in `artifacts/ops-evidence/`.

### Via GitHub Actions

A manual workflow `generate-ops-evidence-pack` is available to generate and upload the evidence pack for any branch.

1.  Go to the **Actions** tab.
2.  Select **Ops Evidence Pack**.
3.  Click **Run workflow**.
4.  Select the branch.

The evidence pack will be available as a workflow artifact.

## Interpreting Failures

If the generator fails:
1.  Unpack the evidence tarball.
2.  Open `SUMMARY.md` to see the exit code.
3.  Check `LOGS/verify_ops.stderr.log` for error details.

## Retention

Evidence packs are retained as GitHub Actions artifacts according to the repository's standard retention policy (typically 90 days). For release evidence, these packs should be uploaded to long-term storage (e.g., S3 WORM bucket) as part of the release process.

## Rollback

If the generator script itself is causing issues, it can be bypassed by running `scripts/verification/verify_ops.sh` directly. The generator is a wrapper and does not alter the verification logic itself.
