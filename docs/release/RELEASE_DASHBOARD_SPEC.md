# Release Dashboard Specification

**Version:** 1.0.0
**Status:** Draft
**Owner:** Release Observability (Jules)

## Overview

The Release Dashboard feed (`release-dashboard.json`) is a minimal, non-sensitive JSON artifact generated for every protected branch merge. It is derived from the signed Evidence Bundle and serves as a trusted source for internal dashboards, status pages, and board-level reporting.

## Guiding Principles

1.  **Security First:** Contains NO secrets, tokens, internal hostnames, or PII.
2.  **Aggregation:** Prefers counts and summaries over raw logs.
3.  **Tamper-Evidence:** Derived from verified Evidence Bundle metadata.
4.  **Stability:** Schema-versioned to ensure consumer reliability.

## Schema

The schema is defined in `schemas/release-dashboard.schema.json`.

### Key Fields

*   `schema_version`: Semver string (e.g., "1.0.0").
*   `evidence_bundle`: Metadata about the source bundle (SHA, signature status).
*   `gate_status`: Pass/Fail status and duration for key CI gates (build, test, lint).
*   `dependency_delta_summary`: Counts of changed dependencies.
*   `sbom_summary`: High-level metrics from the SBOM (component counts, license types).
*   `policy_snapshots`: Hashes of active policy snapshots.

## Generation Process

The `release-dashboard.json` is generated by `scripts/release/generate_release_dashboard.ts` during the post-merge CI workflow.

1.  **Input:** The `evidence-bundle/` directory generated by `scripts/generate-evidence-bundle.js`.
2.  **Processing:**
    *   Reads `manifest.json` (or summary report).
    *   Extracts CI status, SLO results, and security metrics.
    *   Summarizes dependency changes and SBOM data.
    *   **Redaction:** Applies strict allowlisting and heuristic checks to remove sensitive data.
3.  **Validation:** Validates the output against `schemas/release-dashboard.schema.json`.
4.  **Output:** `dist/release-dashboard/release-dashboard.json`.

## Consumption

Internal tools can consume this JSON to display:

*   Current release health.
*   Trends in build times and test pass rates.
*   Dependency churn and license compliance overview.
*   Evidence bundle verification status.

## Verification

To verify the dashboard artifact locally:

```bash
# Generate a fresh evidence bundle
node scripts/generate-evidence-bundle.js

# Generate the dashboard feed
npx tsx scripts/release/generate_release_dashboard.ts

# Validate against schema (requires ajv-cli or similar)
npx ajv validate -s schemas/release-dashboard.schema.json -d dist/release-dashboard/release-dashboard.json
```
