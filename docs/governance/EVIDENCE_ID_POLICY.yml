# Evidence ID Policy
# Defines the standards for Evidence-IDs header usage

schema_version: "1.1"  # Added AI-assisted analysis support
max_days_since_reviewed: 90
required_headers:
  - Owner
  - Last-Reviewed
  - Evidence-IDs
  - Status
allowed_status:
  - active
  - planned
  - deprecated
evidence_id_format: /^[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)*$/
max_evidence_ids_per_document: 50
evidence_map_path: "evidence/map.yml"
required_evidence_types: []
optional_evidence_types: []

# Governance document locations
index_file: "docs/governance/INDEX.md"
index_yml: "docs/governance/INDEX.yml"

# Verification settings
enforce_index_drift: true
enforce_active_gate_existence: true
allow_best_effort_workflow_parse: true

# Output configuration
report_out_dir: "artifacts/governance/evidence-id-consistency/${sha}"

# AI-Enhanced Analysis Settings (optional, opt-in)
# When ENABLE_QWEN_ANALYSIS=true, the gate can use AI for enhanced analysis
ai_integration_enabled: false  # Default: disabled, opt-in only
ai_model_pinned: "qwen-plus-2025-01-25"  # Pin to specific model version for consistency
ai_temperature: 0  # Deterministic setting for consistent outputs
ai_max_tokens: 1024  # Reasonable limit for governance analysis

# AI Patch Generation Settings (optional, opt-in)
# When ENABLE_QWEN_PATCHES=true, the gate can generate patch suggestions
ai_patch_generation_enabled: false  # Default: disabled, opt-in only
ai_patch_max_context_lines: 20  # Limit context to prevent large patch outputs
ai_patch_safety_filters:
  - "no_secrets_in_output"  # Ensure no sensitive content in patches
  - "evidence_id_format_validation"  # Verify suggested IDs follow format rules