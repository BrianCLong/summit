{
  "metadata": {
    "report_date": "2025-12-30",
    "repository": "summit",
    "branch": "claude/catalog-critical-todos-B3wk7",
    "scan_scope": "complete_codebase",
    "methodology": "exhaustive_grep_plus_manual_analysis",
    "total_critical": 18,
    "total_high": 5,
    "total_medium": 100,
    "total_low": 70
  },
  "critical_todos": [
    {
      "id": "C-001",
      "title": "Missing RBAC on Admin Reindex Endpoint",
      "file_path": "apps/gateway/src/routes/search.ts",
      "line": 82,
      "todo_text": "TODO: Add proper RBAC here",
      "impact_category": "security_authorization",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": "A01:2021 - Broken Access Control",
      "soc2_criteria": ["CC6.1", "CC6.7"],
      "system_affected": ["api_gateway", "search_service", "all_tenants"],
      "attack_scenario": "Any authenticated user can trigger reindex operations affecting all tenants",
      "compliance_impact": ["SOC2", "ISO27001"],
      "code_snippet": "router.post('/v1/search/admin/reindex', async (req: Request, res: Response) => {\n    // TODO: Add proper RBAC here\n    res.json({ status: 'triggered', job_id: 'job-' + Date.now() });\n});",
      "remediation_priority": 1,
      "estimated_effort_hours": 8,
      "dependencies": ["rbac_framework", "admin_role_definition"]
    },
    {
      "id": "C-002",
      "title": "SCIM Synchronization Not Implemented",
      "file_path": "apps/gateway/src/rbac/scim.ts",
      "line": 2,
      "todo_text": "TODO: Implement SCIM sync using your IdP API",
      "impact_category": "security_identity",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": "A07:2021 - Identification and Authentication Failures",
      "soc2_criteria": ["CC6.2", "CC6.6"],
      "system_affected": ["identity_provider", "user_management", "all_services"],
      "attack_scenario": "Terminated employees retain access, role changes not synchronized",
      "compliance_impact": ["SOC2", "ISO27001", "compliance_audits"],
      "code_snippet": "export async function syncScimUsers() {\n  // TODO: Implement SCIM sync using your IdP API.\n  return { ok: true } as const;\n}",
      "remediation_priority": 1,
      "estimated_effort_hours": 24,
      "dependencies": ["idp_api_access", "scim_protocol_implementation"]
    },
    {
      "id": "C-003",
      "title": "Missing JWT Authentication on Critical Services",
      "file_path": "SOC2-ALIGNMENT-MATRIX.md",
      "line": null,
      "reference": "W1-3",
      "todo_text": "Implement basic JWT auth (Graph DB, Agent Exec)",
      "impact_category": "security_authentication",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": "A07:2021 - Identification and Authentication Failures",
      "soc2_criteria": ["CC6.6"],
      "system_affected": ["graph_database", "agent_executor", "service_mesh"],
      "attack_scenario": "Direct service access bypasses API Gateway, no authentication required",
      "compliance_impact": ["SOC2", "zero_trust_architecture"],
      "remediation_priority": 1,
      "estimated_effort_hours": 16,
      "dependencies": ["jwt_library", "service_authentication_middleware"]
    },
    {
      "id": "C-004",
      "title": "Policy Engine May Be in Dry-Run Mode",
      "file_path": "SOC2-ALIGNMENT-MATRIX.md",
      "line": null,
      "reference": "W1-8",
      "todo_text": "Remove Policy DryRun from production",
      "impact_category": "security_policy_bypass",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": "A01:2021 - Broken Access Control",
      "soc2_criteria": ["CC6.1", "CC6.7"],
      "system_affected": ["policy_engine", "api_gateway", "all_authorization"],
      "attack_scenario": "All authorization checks are logged but not enforced",
      "compliance_impact": ["SOC2", "ISO27001"],
      "remediation_priority": 1,
      "estimated_effort_hours": 4,
      "dependencies": ["configuration_audit", "deployment_verification"]
    },
    {
      "id": "C-005",
      "title": "Cypher Injection Vulnerability",
      "file_path": "SOC2-ALIGNMENT-MATRIX.md",
      "line": null,
      "reference": "W1-5",
      "todo_text": "Implement Cypher parameterization",
      "impact_category": "security_injection",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": "A03:2021 - Injection",
      "soc2_criteria": ["CC6.1"],
      "system_affected": ["graph_database", "all_queries", "tenant_data"],
      "attack_scenario": "Attacker can inject Cypher to exfiltrate all tenant data",
      "compliance_impact": ["SOC2", "PCI-DSS", "data_breach_risk"],
      "remediation_priority": 1,
      "estimated_effort_hours": 40,
      "dependencies": ["query_construction_audit", "parameterization_framework"]
    },
    {
      "id": "C-006",
      "title": "Dangerous Clear/Delete Endpoint in Production",
      "file_path": "SOC2-ALIGNMENT-MATRIX.md",
      "line": null,
      "reference": "W1-7",
      "todo_text": "Remove/restrict clear endpoint (Graph DB)",
      "impact_category": "data_integrity_deletion",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": "A04:2021 - Insecure Design",
      "soc2_criteria": ["CC6.1"],
      "system_affected": ["graph_database", "all_customer_data"],
      "attack_scenario": "Single API call can destroy all production data",
      "compliance_impact": ["SOC2", "data_durability_guarantees"],
      "remediation_priority": 1,
      "estimated_effort_hours": 2,
      "dependencies": ["endpoint_audit", "access_control"]
    },
    {
      "id": "C-007",
      "title": "Missing Query Timeouts Enable DoS",
      "file_path": "SOC2-ALIGNMENT-MATRIX.md",
      "line": null,
      "reference": "W1-10",
      "todo_text": "Add query timeouts",
      "impact_category": "availability_dos",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": "A04:2021 - Insecure Design",
      "soc2_criteria": ["A1.2"],
      "system_affected": ["graph_database", "platform_availability"],
      "attack_scenario": "Expensive queries can DoS entire platform",
      "compliance_impact": ["SLA_violations", "availability_commitments"],
      "remediation_priority": 1,
      "estimated_effort_hours": 8,
      "dependencies": ["timeout_configuration", "query_monitoring"]
    },
    {
      "id": "C-008",
      "title": "Missing Input Validation on Critical Paths",
      "file_path": "SOC2-ALIGNMENT-MATRIX.md",
      "line": null,
      "reference": "W1-6",
      "todo_text": "Add input validation (critical paths)",
      "impact_category": "security_validation",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": "A03:2021 - Injection",
      "soc2_criteria": ["CC6.1"],
      "system_affected": ["all_api_endpoints", "all_services"],
      "attack_scenario": "Multiple injection vectors (SQL, Cypher, XSS, XXE, SSRF)",
      "compliance_impact": ["SOC2", "PCI-DSS", "OWASP_Top_10"],
      "remediation_priority": 1,
      "estimated_effort_hours": 32,
      "dependencies": ["validation_framework", "input_sanitization"]
    },
    {
      "id": "C-009",
      "title": "Zero Rate Limiting on APIs",
      "file_path": "SOC2-ALIGNMENT-MATRIX.md",
      "line": null,
      "reference": "W1-4",
      "todo_text": "Add rate limiting (all APIs)",
      "impact_category": "availability_abuse",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": "A04:2021 - Insecure Design",
      "soc2_criteria": ["A1.2"],
      "system_affected": ["all_api_endpoints", "platform_availability"],
      "attack_scenario": "Trivial DoS via request flooding, unlimited credential stuffing",
      "compliance_impact": ["SLA_violations", "cost_runaway"],
      "remediation_priority": 1,
      "estimated_effort_hours": 16,
      "dependencies": ["rate_limiting_service", "redis_deployment"]
    },
    {
      "id": "C-010",
      "title": "Missing Security Headers (Helmet)",
      "file_path": "SOC2-ALIGNMENT-MATRIX.md",
      "line": null,
      "reference": "W1-1",
      "todo_text": "Enable Helmet middleware (all services)",
      "impact_category": "security_headers",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": "A05:2021 - Security Misconfiguration",
      "soc2_criteria": ["CC6.1"],
      "system_affected": ["all_web_services", "browser_clients"],
      "attack_scenario": "XSS, clickjacking, protocol downgrade attacks",
      "compliance_impact": ["SOC2", "security_baseline"],
      "remediation_priority": 1,
      "estimated_effort_hours": 4,
      "dependencies": ["helmet_library", "middleware_configuration"]
    },
    {
      "id": "C-011",
      "title": "CORS Misconfiguration",
      "file_path": "SOC2-ALIGNMENT-MATRIX.md",
      "line": null,
      "reference": "W1-2",
      "todo_text": "Fix CORS configuration (all services)",
      "impact_category": "security_origin_policy",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": "A05:2021 - Security Misconfiguration",
      "soc2_criteria": ["CC6.1"],
      "system_affected": ["all_api_services", "browser_clients"],
      "attack_scenario": "Malicious websites can make authenticated API calls",
      "compliance_impact": ["SOC2", "CSRF_protection"],
      "remediation_priority": 1,
      "estimated_effort_hours": 8,
      "dependencies": ["origin_whitelist", "cors_middleware"]
    },
    {
      "id": "C-012",
      "title": "No Audit Logging for Sensitive Operations",
      "file_path": "SOC2-ALIGNMENT-MATRIX.md",
      "line": null,
      "reference": "W1-9",
      "todo_text": "Implement basic audit logging",
      "impact_category": "compliance_audit_trail",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": "A09:2021 - Security Logging and Monitoring Failures",
      "soc2_criteria": ["CC6.8", "CC7.2"],
      "system_affected": ["all_services", "compliance_programs"],
      "attack_scenario": "Cannot investigate breaches, no forensic trail",
      "compliance_impact": ["SOC2_hard_fail", "GDPR", "ISO27001"],
      "remediation_priority": 1,
      "estimated_effort_hours": 24,
      "dependencies": ["logging_framework", "audit_log_storage"]
    },
    {
      "id": "C-013",
      "title": "Provenance Verification is Placeholder",
      "file_path": ".ci/scripts/verify_provenance.sh",
      "line": 3,
      "todo_text": "TODO: implement checks against your metrics endpoint / health dashboard",
      "impact_category": "release_verification",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": null,
      "soc2_criteria": ["CC7.3"],
      "system_affected": ["ci_cd_pipeline", "supply_chain_security"],
      "attack_scenario": "Compromised builds can be released without detection",
      "compliance_impact": ["SLSA_compliance", "supply_chain_risk"],
      "code_snippet": "#!/usr/bin/env bash\nset -euo pipefail\n# TODO: implement checks against your metrics endpoint / health dashboard\nexit 0",
      "remediation_priority": 2,
      "estimated_effort_hours": 16,
      "dependencies": ["metrics_endpoint", "slsa_framework"]
    },
    {
      "id": "C-014",
      "title": "Golden Path Verification is Non-Functional",
      "file_path": ".ci/scripts/verify_goldens.sh",
      "line": 3,
      "todo_text": "TODO: call metrics endpoint(s) and enforce thresholds from .ci/config/slo.yml",
      "impact_category": "release_verification",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": null,
      "soc2_criteria": ["CC7.3"],
      "system_affected": ["ci_cd_pipeline", "slo_enforcement"],
      "attack_scenario": "Degraded builds can be released without SLO verification",
      "compliance_impact": ["SLA_violations", "customer_impact"],
      "code_snippet": "#!/usr/bin/env bash\nset -euo pipefail\n# TODO: call metrics endpoint(s) and enforce thresholds from .ci/config/slo.yml\nexit 0",
      "remediation_priority": 2,
      "estimated_effort_hours": 16,
      "dependencies": ["metrics_endpoint", "slo_thresholds"]
    },
    {
      "id": "C-015",
      "title": "Hardcoded Encryption Key in Mobile App",
      "file_path": "apps/mobile-native/src/services/Database.ts",
      "line": 16,
      "todo_text": "encryptionKey: 'your-encryption-key-here', // TODO: Generate secure key",
      "impact_category": "security_encryption",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": "A02:2021 - Cryptographic Failures",
      "soc2_criteria": ["CC6.1"],
      "system_affected": ["mobile_app", "all_mobile_user_data"],
      "attack_scenario": "All mobile data is effectively unencrypted (key in source code)",
      "compliance_impact": ["GDPR_Article_32", "HIPAA", "privacy_violations"],
      "code_snippet": "export const storage = new MMKV({\n  id: 'intelgraph-storage',\n  encryptionKey: 'your-encryption-key-here', // TODO: Generate secure key\n});",
      "remediation_priority": 1,
      "estimated_effort_hours": 8,
      "dependencies": ["platform_keychain", "key_generation"]
    },
    {
      "id": "C-016",
      "title": "Search API Returns Empty Results (Non-Functional)",
      "file_path": "api/search.js",
      "line": 6,
      "todo_text": "TODO: call Typesense search; for now, return empty",
      "impact_category": "feature_completeness",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": null,
      "soc2_criteria": null,
      "system_affected": ["search_service", "user_experience"],
      "attack_scenario": "N/A - functional issue, not security",
      "compliance_impact": ["customer_facing_failure"],
      "code_snippet": "export default async (req, res) => {\n  const q = url.searchParams.get('q') || '';\n  if (!q) return res.status(200).json([]);\n  // TODO: call Typesense search; for now, return empty\n  return res.status(200).json([]);\n};",
      "remediation_priority": 1,
      "estimated_effort_hours": 16,
      "dependencies": ["typesense_integration", "search_schema"]
    },
    {
      "id": "C-017",
      "title": "Ingest Pipeline Does Not Track Failures",
      "file_path": "workers/ingest/src/IngestOrchestrator.ts",
      "line": 165,
      "todo_text": "records_failed: 0, // TODO: Track failures",
      "impact_category": "observability_data_loss",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": null,
      "soc2_criteria": ["CC7.2"],
      "system_affected": ["ingest_pipeline", "data_integrity"],
      "attack_scenario": "Silent data loss with no alerting or recovery",
      "compliance_impact": ["data_SLA_violations"],
      "code_snippet": "const metrics: ProcessingMetrics = {\n  records_processed: recordCount,\n  records_failed: 0, // TODO: Track failures\n  bytes_processed: 0, // TODO: Track bytes\n  processing_duration_ms: Date.now() - startTime,\n};",
      "remediation_priority": 2,
      "estimated_effort_hours": 12,
      "dependencies": ["error_tracking", "dead_letter_queue"]
    },
    {
      "id": "C-018",
      "title": "Ingest Pipeline Does Not Track Throughput",
      "file_path": "workers/ingest/src/IngestOrchestrator.ts",
      "line": 166,
      "todo_text": "bytes_processed: 0, // TODO: Track bytes",
      "impact_category": "observability_performance",
      "severity": "P0",
      "ga_blocking": true,
      "owasp_category": null,
      "soc2_criteria": ["CC7.2"],
      "system_affected": ["ingest_pipeline", "performance_monitoring"],
      "attack_scenario": "Cannot detect performance degradation or capacity issues",
      "compliance_impact": ["SLO_enforcement_impossible"],
      "code_snippet": "const metrics: ProcessingMetrics = {\n  records_processed: recordCount,\n  records_failed: 0, // TODO: Track failures\n  bytes_processed: 0, // TODO: Track bytes\n  processing_duration_ms: Date.now() - startTime,\n};",
      "remediation_priority": 2,
      "estimated_effort_hours": 8,
      "dependencies": ["metrics_collection", "monitoring_dashboard"]
    }
  ],
  "high_priority_todos": [
    {
      "id": "H-001",
      "title": "Tenant Isolation Tests are Placeholders",
      "file_path": ".github/ISSUE_TEMPLATE/release-checklist.md",
      "line": 30,
      "todo_text": "Placeholder tenancy test wired into CI (test.todo or explicit TODO assert)",
      "impact_category": "testing_tenant_isolation",
      "severity": "P1",
      "ga_blocking": false,
      "system_affected": ["multi_tenant_architecture", "all_services"],
      "remediation_priority": 3,
      "estimated_effort_hours": 24,
      "dependencies": ["test_framework", "tenant_fixtures"]
    },
    {
      "id": "H-002",
      "title": "Deduplication UX Features Incomplete",
      "file_path": "TODO.md",
      "line": "54-59",
      "todo_text": "6 UX TODOs: WebAuthn, Performance, Notifications, Loading, Details, Threshold",
      "impact_category": "ux_completeness",
      "severity": "P1",
      "ga_blocking": false,
      "system_affected": ["deduplication_service", "entity_resolution"],
      "remediation_priority": 3,
      "estimated_effort_hours": 40,
      "dependencies": ["webauthn_library", "performance_optimization"]
    },
    {
      "id": "H-003",
      "title": "jQuery Dependency in React App",
      "file_path": "apps/web/src/sync/history-explain-bridge.ts",
      "line": "1, 10",
      "todo_text": "TODO: Remove jQuery dependency - migrate to React event system",
      "impact_category": "tech_debt_dependencies",
      "severity": "P1",
      "ga_blocking": false,
      "system_affected": ["web_frontend", "event_system"],
      "remediation_priority": 4,
      "estimated_effort_hours": 16,
      "dependencies": ["react_event_system", "refactoring"]
    },
    {
      "id": "H-004",
      "title": "GraphQL Schema Incomplete/Unstable",
      "file_path": "client/src/hooks/usePrefetch.ts (and others)",
      "line": "multiple",
      "todo_text": "TODO: Re-enable when GraphQL schema is available",
      "impact_category": "feature_completeness",
      "severity": "P1",
      "ga_blocking": false,
      "system_affected": ["graphql_api", "frontend_features"],
      "remediation_priority": 3,
      "estimated_effort_hours": 32,
      "dependencies": ["graphql_schema_stabilization"]
    },
    {
      "id": "H-005",
      "title": "Planning TODOs in Execution Documents",
      "file_path": "EXECUTION_SATURATION_PLAN.md (and others)",
      "line": "multiple",
      "todo_text": "Various planning TODOs",
      "impact_category": "planning_execution",
      "severity": "P1",
      "ga_blocking": false,
      "system_affected": ["project_management", "ga_readiness"],
      "remediation_priority": 4,
      "estimated_effort_hours": 8,
      "dependencies": ["planning_completion"]
    }
  ],
  "risk_matrix": {
    "security_breach": {
      "likelihood": "high",
      "impact": "critical",
      "combined_risk": "extreme"
    },
    "soc2_audit_failure": {
      "likelihood": "very_high",
      "impact": "critical",
      "combined_risk": "extreme"
    },
    "data_loss": {
      "likelihood": "medium",
      "impact": "critical",
      "combined_risk": "high"
    },
    "service_outage": {
      "likelihood": "high",
      "impact": "high",
      "combined_risk": "high"
    },
    "compliance_violation": {
      "likelihood": "very_high",
      "impact": "high",
      "combined_risk": "high"
    }
  },
  "total_estimated_hours": {
    "critical": 276,
    "high": 120,
    "total": 396
  },
  "remediation_phases": {
    "phase_1_immediate": {
      "duration_weeks": 1,
      "todos": ["C-001", "C-002", "C-003", "C-004", "C-006", "C-010", "C-011", "C-015"],
      "effort_hours": 78,
      "engineers_required": 4
    },
    "phase_2_security": {
      "duration_weeks": 2,
      "todos": ["C-005", "C-008", "C-009", "C-012"],
      "effort_hours": 104,
      "engineers_required": 5
    },
    "phase_3_observability": {
      "duration_weeks": 2,
      "todos": ["C-007", "C-013", "C-014", "C-017", "C-018"],
      "effort_hours": 60,
      "engineers_required": 3
    },
    "phase_4_features": {
      "duration_weeks": 1,
      "todos": ["C-016"],
      "effort_hours": 16,
      "engineers_required": 2
    },
    "phase_5_high_priority": {
      "duration_weeks": 3,
      "todos": ["H-001", "H-002", "H-003", "H-004", "H-005"],
      "effort_hours": 120,
      "engineers_required": 4
    }
  }
}
