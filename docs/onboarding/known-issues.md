# Known Issues & Mitigations (Onboarding)

This page captures **repeatable pitfalls** discovered during onboarding and early releases.
Each item includes a mitigation and the best link to use when you are blocked.

## Canary

- **Pitfall:** Canary promotion stalls because health probes are missing or misconfigured in
  staging, causing false negatives during gate checks.
  - **Mitigation:** Verify synthetic probes and health endpoints before the first canary deploy;
    align with the canary playbook and ensure the probe URLs return 200 + expected payloads.
  - **Reference:** [`docs/release/canary_manager_synthetic_probes_auto_rollback.md`](../release/canary_manager_synthetic_probes_auto_rollback.md)

## Rollback

- **Pitfall:** Rollback steps are incomplete because the previous image tag or Helm release
  revision is not captured in the release notes.
  - **Mitigation:** Record the last-known-good tag/revision in the release notes and validate
    the rollback path in staging before cutover.
  - **Reference:** [`docs/devops/rollback-playbook.md`](../devops/rollback-playbook.md)

## Disclosure Pack

- **Pitfall:** The disclosure pack is missing evidence artifacts (SBOM, attestations, or
  release notes) when compliance asks for the release record.
  - **Mitigation:** Ensure the evidence bundle is generated by the release workflow and that
    release notes and SBOMs are attached before promotion.
  - **Reference:** [`docs/release/evidence-bundles.md`](../release/evidence-bundles.md)

## Drift Detection

- **Pitfall:** Config drift goes undetected because baseline fingerprints were never captured
  after the first successful release.
  - **Mitigation:** Capture and store a baseline fingerprint at the end of a green release, then
    wire alerting for diffs on subsequent deploys.
  - **Reference:** [`docs/releases/docs_phase_21_22_compliance_provenance_drift_watcher_enterprise_ops.md`](../releases/docs_phase_21_22_compliance_provenance_drift_watcher_enterprise_ops.md)

## CI naming mismatch

- `docs/CI_STANDARDS.md` references `pr-quality-gate.yml`, but the active
  quality gate workflows are currently:
  - `.github/workflows/ci.yml`
  - `.github/workflows/ci-golden-path.yml`
- Treat those workflows as the source of truth until the naming is updated.

## Docs-only changes can skip CI

- The `CI` workflow ignores `docs/**` paths, so documentation-only PRs might not
  trigger full CI. If you need CI validation, add a non-doc change or run checks
  locally.

## Policy checks are required for services

- OPA policy lint/simulation runs in `ci.yml` (policy-fixtures job). Missing or
  mis-scoped policy updates will block promotion.

## Boundary checks are easy to forget

- `scripts/check-boundaries.cjs` is not part of every workflow. Run it locally
  before opening the PR.
