# Evidence & Assurance Pack

This pack provides the necessary artifacts and instructions for third-party verification of Summit's assurances.

## Sample Attestation

Below is a sample JSON attestation generated by the Summit Assurance Engine.

```json
{
  "id": "attest_1234567890",
  "tenantId": "tenant_abc",
  "timestamp": "2025-10-27T10:00:00Z",
  "claims": [
    {
      "id": "claim_sec_1",
      "domain": "security",
      "claim": "security.vulnerability.scan.passed",
      "value": true,
      "evidence": [
        {
          "type": "test_result",
          "id": "scan_run_555",
          "hash": "sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"
        }
      ],
      "timestamp": "2025-10-27T09:55:00Z",
      "validUntil": "2025-10-28T09:55:00Z"
    }
  ],
  "signature": "f2d3a...",
  "metadata": {
    "engineVersion": "1.0.0",
    "profile": "profile_security_review"
  }
}
```

## Verification Steps

To independently verify an attestation:

1.  **Extract Claims**: Parse the JSON and extract the `claims` array.
2.  **Reconstruct Payload**: Create a canonical JSON string of the relevant fields (id, tenantId, timestamp, claims).
3.  **Verify Signature**: Use the public key (available via JWKS endpoint or provided out-of-band) to verify the `signature` against the payload.
4.  **Check Freshness**: Ensure `timestamp` is recent and `validUntil` for each claim has not passed.
5.  **Verify Evidence**: For high-assurance needs, request the raw evidence referenced by hash and compute its SHA-256 digest to match the claim.

## External Validation Flow

1.  **Client** requests attestation from `GET /api/assurance/attestation`.
2.  **Service** returns Signed Attestation.
3.  **Client** validates signature locally.
4.  **Client** parses claims to make policy decisions (e.g., "Allow deployment").

## Limitations

*   **Self-Signed**: In the current MVP, attestations are signed by the server itself. Future versions will support remote signing via HSM.
*   **Evidence Availability**: Raw evidence (logs, artifacts) may require separate authentication to access.
