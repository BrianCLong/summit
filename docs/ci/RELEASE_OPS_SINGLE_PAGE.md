# Release Ops Single Page

**Status:** Active (MVP-4)
**Owner:** Platform Engineering
**Last Updated:** 2026-01-08

---

## Overview

The Release Ops Single Page is a consolidated summary document that provides a human-first view of the current release state. It's the "open this first" file in the artifact bundle that aggregates key information from all orchestrator outputs into a single, scannable document.

### Why a Single Page?

| Problem                                              | Solution                               |
| ---------------------------------------------------- | -------------------------------------- |
| Multiple reports to hunt through                     | One file contains everything essential |
| Have to open dashboard, then digest, then handoff... | All summaries in one place             |
| Missing context on skipped cadence tasks             | Clear placeholders explain why         |
| No quick way to see "what do I need to do now?"      | Action queue at the top                |

---

## Location

The single page is generated by the Release Ops Orchestrator and included in every artifact bundle:

```
release-ops-cycle-{run_id}/
‚îú‚îÄ‚îÄ index.html                    # üëà Landing page with navigation to all files
‚îú‚îÄ‚îÄ release_ops_single_page.html  # Consolidated summary (browser-friendly)
‚îú‚îÄ‚îÄ release_ops_single_page.md    # Source markdown
‚îú‚îÄ‚îÄ dashboard.json
‚îú‚îÄ‚îÄ ...other reports...
```

### Navigation Flow

1. **Start with `index.html`** - Landing page with links to all reports
2. **Click "Single Page Summary (HTML)"** - Opens the consolidated view
3. **Navigate sections** - Use table of contents to jump to specific areas
4. **Access raw reports** - Link back to index.html for other files

### HTML vs Markdown

| Format  | Best For        | Features                                     |
| ------- | --------------- | -------------------------------------------- |
| `.html` | Browser viewing | Styled, TOC navigation, collapsible sections |
| `.md`   | Source of truth | Plain text, version control friendly         |

The HTML is deterministically generated from the markdown with:

- Inline CSS (no external dependencies)
- No JavaScript
- Table of contents with anchor links
- Preserved `<details>` collapsible blocks
- Print-friendly styles

### How to Access

**GitHub Actions UI:**

1. Navigate to Actions ‚Üí Release Ops Orchestrator
2. Click on a completed run
3. Download the `release-ops-cycle-{run_id}` artifact
4. Open `release_ops_single_page.md`

**CLI:**

```bash
# List recent runs
gh run list --workflow=release-ops-orchestrator.yml --limit 5

# Download and extract
gh run download <run_id> -n release-ops-cycle-<run_id>
cat release-ops-cycle-*/release_ops_single_page.md
```

---

## Document Structure

The single page has a deterministic, stable structure:

### 1. Header

```markdown
# Release Ops Single Page

> **Repository:** owner/repo
> **Generated:** 2026-01-08T08:00:00Z
> **Run ID:** 12345678
```

Provides context about when and where the report was generated.

### 2. Release Snapshot

Shows the current state of release candidates from the dashboard:

- **Summary table**: Total, Promotable, Blocked, Pending counts
- **Action Queue**:
  - Ready to Promote (green light to ship)
  - Blocked (needs attention)
  - Pending (checks still running)

This is the "what do I need to do right now?" section.

### 3. Top Blockers

Lists the top 10 blocked release candidates with:

- Tag name
- Top blocker (which check is failing)
- State

If no dashboard data is available, falls back to parsing `blocked_issues_report.md`.

### 4. Escalation Summary

Excerpt from `escalation_report.md` showing:

- Which issues have been escalated
- Current escalation levels
- Actions taken this cycle

Limited to 30 lines to keep the page scannable.

### 5. Daily Digest

Embeds the full `release_ops_digest.md` in a collapsible `<details>` block.

If digest was skipped (outside window or cadence not elapsed), shows:

```markdown
_Digest skipped this cycle (outside configured window or cadence not elapsed)._
```

Limited to 100 lines with a "see full file" link if truncated.

### 6. On-Call Handoff

Embeds `oncall_handoff.md` in a collapsible `<details>` block.

If handoff was skipped, shows:

```markdown
_Handoff skipped this cycle (outside shift-change windows or cadence not elapsed)._
```

Limited to 80 lines with a "see full file" link if truncated.

### 7. Artifacts Index

Lists all files in the artifact bundle and explains their purpose:

- Report files and what they contain
- State snapshot files
- How to access the artifacts

---

## Bounded Output Rules

To keep the single page scannable, output is bounded:

| Section    | Max Lines  | When Exceeded                    |
| ---------- | ---------- | -------------------------------- |
| Blockers   | 10 entries | Shows count of omitted           |
| Escalation | 30 lines   | Truncated with link to full file |
| Digest     | 100 lines  | Truncated with link to full file |
| Handoff    | 80 lines   | Truncated with link to full file |

---

## Missing Input Handling

The generator gracefully handles missing files:

```markdown
_Missing input: `artifacts/release-train/dashboard.json`_
```

The workflow continues and produces a single page even if some inputs are missing. This ensures you always get a summary, even if individual steps failed.

---

## Running Locally

To test the generator against a sample artifacts directory:

```bash
# Create sample artifacts directory
mkdir -p artifacts/release-train
echo '{"summary":{"total_candidates":3,"promotable":1,"blocked":1,"pending":1},"candidates":[]}' > artifacts/release-train/dashboard.json
echo "# Sample Digest" > artifacts/release-train/release_ops_digest.md

# Run generator
./scripts/release/generate_release_ops_single_page.sh \
  --reports-dir artifacts/release-train \
  --run-id "test-123" \
  --repo "myorg/myrepo" \
  --verbose

# View markdown output
cat artifacts/release-train/release_ops_single_page.md

# Generate HTML
./scripts/release/render_release_ops_single_page_html.sh \
  --in artifacts/release-train/release_ops_single_page.md \
  --out artifacts/release-train/release_ops_single_page.html \
  --title "My Repo - Release Ops"

# Open HTML in browser
open artifacts/release-train/release_ops_single_page.html
```

### HTML Renderer Options

| Option         | Description            | Default                   |
| -------------- | ---------------------- | ------------------------- |
| `--in FILE`    | Input markdown file    | Required                  |
| `--out FILE`   | Output HTML file       | Required                  |
| `--title TEXT` | HTML page title        | "Release Ops Single Page" |
| `--verbose`    | Enable verbose logging | Off                       |

The renderer uses `marked` (Node.js) as the primary engine. If that fails, it falls back to `pandoc` if available, or creates a minimal fallback HTML.

### Generator Options

| Option                  | Description                  | Default                                    |
| ----------------------- | ---------------------------- | ------------------------------------------ |
| `--reports-dir DIR`     | Directory containing reports | `artifacts/release-train/`                 |
| `--dashboard-json FILE` | Path to dashboard.json       | `<reports-dir>/dashboard.json`             |
| `--out FILE`            | Output file path             | `<reports-dir>/release_ops_single_page.md` |
| `--run-id ID`           | Orchestrator run ID          | N/A                                        |
| `--repo REPO`           | Repository name              | Auto-detected from git                     |
| `--verbose`             | Enable verbose logging       | Off                                        |

---

## Example Output

Here's a sanitized example of what the single page looks like:

```markdown
# Release Ops Single Page

> **Repository:** myorg/myrepo
> **Generated:** 2026-01-08T08:15:00Z
> **Run ID:** 12345678

---

## Release Snapshot

| Metric           | Count |
| ---------------- | ----- |
| Total Candidates | 5     |
| Promotable       | 2     |
| Blocked          | 2     |
| Pending          | 1     |

### Action Queue

**Ready to Promote:**

- v4.2.0-rc.3
- v4.1.5

**Blocked (needs attention):**

- v4.2.0-rc.2: Build/Server Unit Tests
- v4.2.0-rc.1: Lint

---

## Top Blockers

| Tag         | Blocker                 | State   |
| ----------- | ----------------------- | ------- |
| v4.2.0-rc.2 | Build/Server Unit Tests | blocked |
| v4.2.0-rc.1 | Lint                    | blocked |

---

## Escalation Summary

_Escalation report not available this cycle._

---

## Daily Digest

_Digest skipped this cycle (outside configured window or cadence not elapsed)._

---

## On-Call Handoff

<details>
<summary>Click to expand handoff</summary>

# On-Call Handoff - 2026-01-08

## Summary

- 2 blocked release candidates
- No new P0 escalations

...

</details>

---

## Artifacts Index

### Report Files

| File                         | Description                           |
| ---------------------------- | ------------------------------------- |
| `dashboard.json`             | Machine-readable release train status |
| `release_ops_single_page.md` | This file                             |

...
```

---

## Integration with Orchestrator

The single page is generated as Step 7 in the orchestrator sequence:

1. Dashboard generation
2. Blocker issues
3. Routing
4. Escalation
5. Digest (cadence-gated)
6. Handoff (cadence-gated)
7. **Single Page generation** ‚Üê Here
8. Upload artifact bundle
9. Commit state

This ensures all inputs are available before the single page is composed.

---

## References

- **Generator Script**: `scripts/release/generate_release_ops_single_page.sh`
- **HTML Renderer (shell)**: `scripts/release/render_release_ops_single_page_html.sh`
- **HTML Renderer (Node.js)**: `scripts/release/render_release_ops_single_page_html.mjs`
- **Orchestrator Docs**: `docs/ci/RELEASE_OPS_ORCHESTRATOR.md`
- **Dashboard Docs**: `docs/ci/RELEASE_TRAIN_DASHBOARD.md`
- **Digest Policy**: `docs/ci/RELEASE_OPS_DIGEST_POLICY.yml`
- **Handoff Policy**: `docs/ci/ONCALL_HANDOFF_POLICY.yml`

---

## Change History

| Version | Date       | Changes                            |
| ------- | ---------- | ---------------------------------- |
| 1.1.0   | 2026-01-08 | Add static HTML rendering          |
| 1.0.0   | 2026-01-08 | Initial single page implementation |

---

**Document Authority**: Platform Engineering
**Next Review**: 2026-02-08 (or before MVP-5 kickoff)
