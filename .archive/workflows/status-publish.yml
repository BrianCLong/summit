name: status-publish

permissions:
  contents: read
on:
  schedule: [{ cron: '*/30 * * * *' }]
  workflow_dispatch: {}
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: node scripts/status_build.js
      - uses: actions/upload-pages-artifact@v3
        with: { path: status/site }
  deploy:
    needs: build
    permissions: { pages: write, id-token: write }
    environment: github-pages
    runs-on: ubuntu-latest
    steps:
      - uses: actions/deploy-pages@v4
