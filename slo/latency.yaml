apiVersion: sloth.slok.dev/v1
kind: PrometheusServiceLevel
metadata:
  name: summit-latency
spec:
  service: summit
  slos:
    - name: latency-p95
      objective: 99
      sli:
        raw:
          errorRatioQuery: |
            1 - (
              sum(rate(http_request_duration_seconds_bucket{le="1.5"}[5m]))
              /
              sum(rate(http_request_duration_seconds_count[5m]))
            )
      alerting:
        name: AppLatency
        labels:
          severity: warning
          slo: latency
        annotations:
          summary: "App latency SLO burn"
