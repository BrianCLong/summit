apiVersion: sloth.slok.dev/v1
kind: PrometheusServiceLevel
metadata:
  name: summit-throughput
spec:
  service: summit
  slos:
    - name: throughput-rps
      objective: 99
      sli:
        raw:
          errorRatioQuery: |
            1 - clamp_max(
              sum(rate(http_requests_total{app="summit"}[5m])) / 50,
              1
            )
      alerting:
        name: AppThroughput
        labels:
          severity: warning
          slo: throughput
        annotations:
          summary: "App throughput below target"
