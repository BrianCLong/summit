apiVersion: sloth.slok.dev/v1
kind: PrometheusServiceLevel
metadata:
  name: summit-error-rate
spec:
  service: summit
  slos:
    - name: error-rate
      objective: 99
      sli:
        events:
          errorQuery: sum(rate(http_requests_total{app="summit",status=~"5.."}[5m]))
          totalQuery: sum(rate(http_requests_total{app="summit"}[5m]))
      alerting:
        name: AppErrorRate
        labels:
          severity: critical
          slo: error_rate
        annotations:
          summary: "App error rate SLO burn"
