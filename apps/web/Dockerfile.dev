FROM node:20-slim
WORKDIR /app
RUN apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*

# Copy base config
COPY tsconfig.json tsconfig.base.json ./

# Set up app directory
WORKDIR /app/apps/web
COPY apps/web/package*.json ./
RUN npm install --legacy-peer-deps
COPY apps/web .
ENV PORT=3000
EXPOSE 3000
CMD ["npm", "run", "dev"]
