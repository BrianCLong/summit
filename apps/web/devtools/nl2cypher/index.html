<!doctype html>
<html>
  <body>
    <input data-testid="nl-input" id="nl" placeholder="Describe your graph query" />
    <button data-testid="btn-generate" id="gen">Generate</button>
    <pre data-testid="cypher-preview" id="cypher"></pre>
    <pre data-testid="plan-estimate" id="plan"></pre>
    <button data-testid="btn-approve" id="approve">Approve</button>
    <pre data-testid="sandbox-result" id="result"></pre>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script>
      $(function(){
        $('#gen').on('click', function(){
          const text = $('#nl').val() || '';
          const cypher = `MATCH (a)-[:FOLLOWS]->(b) WHERE a.name CONTAINS '${String(text).slice(0,12)}' RETURN a,b LIMIT 25`;
          const estimate = Math.max(1, Math.min(1000, String(text).length * 2));
          $('#cypher').text(cypher);
          $('#plan').text(`rows ~ ${estimate}`);
        });
        $('#approve').on('click', function(){
          $('#result').text('rows: 0');
        });
      });
    </script>
  </body>
</html>
