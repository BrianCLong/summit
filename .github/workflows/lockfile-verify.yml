name: Lockfile Verify
on: [pull_request]
jobs:
  verify:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v3
        if: ${{ hashFiles('pnpm-lock.yaml') != '' }}
        with: { version: 9 }
      - name: Verify npm/yarn/pnpm lockfile
        run: |
          if [ -f package-lock.json ]; then npm ci --ignore-scripts; fi
          if [ -f yarn.lock ]; then corepack enable && yarn --immutable; fi
          if [ -f pnpm-lock.yaml ]; then pnpm i --frozen-lockfile; fi