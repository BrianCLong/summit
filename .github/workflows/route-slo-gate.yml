name: route-slo-gate
on: [workflow_call]
jobs:
  gate:
    runs-on: ubuntu-latest
    env:
      BURN_RATE_THRESHOLD: 2
    steps:
      - uses: actions/checkout@v4
      - run: npm i node-fetch@2
      - run: node scripts/route_slo_check.ts
        env:
          PROM_URL: ${{ secrets.PROM_URL }}
          BURN_RATE_THRESHOLD: ${{ env.BURN_RATE_THRESHOLD }}
