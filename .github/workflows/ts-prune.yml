name: ts-prune

permissions:
  contents: read
on: [pull_request]
jobs:
  prune:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: pnpm i
      - run: npx ts-prune > ts-prune.txt || true
      - uses: actions/github-script@v7
        with:
          script: |
            const out = require('fs').readFileSync('ts-prune.txt','utf8').split('\n').slice(0,50).join('\n');
            if (out.trim()) core.summary.addRaw("### ts-prune findings\n```\n"+out+"```").write();
