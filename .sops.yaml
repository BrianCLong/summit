# SOPS configuration for Summit secrets. Enforces age recipients and field-level encryption.
creation_rules:
  - path_regex: secrets/envs/dev/.*\.enc\.yaml
    encrypted_regex: "^(data|stringData)$"
    unencrypted_regex: "^(kind|apiVersion|metadata|type|annotations)$"
    age:
      [
        "age1t8lc6a5example5t8cn6m9p4qr0a6s9x0x5gk4zj5c5x2yps8nfhqzq2qv",
        "age1devopsrecipientxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
      ]
  - path_regex: secrets/envs/stage/.*\.enc\.yaml
    encrypted_regex: "^(data|stringData)$"
    unencrypted_regex: "^(kind|apiVersion|metadata|type|annotations)$"
    age:
      [
        "age1t8lc6a5example5t8cn6m9p4qr0a6s9x0x5gk4zj5c5x2yps8nfhqzq2qv",
        "age1stagesrecccccccccccccccccccccccccccccccccccccccc",
      ]
  - path_regex: secrets/envs/prod/.*\.enc\.yaml
    encrypted_regex: "^(data|stringData)$"
    unencrypted_regex: "^(kind|apiVersion|metadata|type|annotations)$"
    age:
      [
        "age1t8lc6a5example5t8cn6m9p4qr0a6s9x0x5gk4zj5c5x2yps8nfhqzq2qv",
        "age1prodsecopsbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",
      ]
  - path_regex: secrets/templates/.*\.yaml
    encrypted_regex: "^(data|stringData)$"
    unencrypted_regex: "^(kind|apiVersion|metadata|type|annotations)$"
    age: ["age1t8lc6a5example5t8cn6m9p4qr0a6s9x0x5gk4zj5c5x2yps8nfhqzq2qv"]
  - path_regex: deploy/helm/intelgraph/secrets/.*\.sealed\.yaml
    encrypted_regex: "^(data|stringData)$"
    unencrypted_regex: "^(kind|apiVersion|metadata|type|annotations)$"
    age: ["age1t8lc6a5example5t8cn6m9p4qr0a6s9x0x5gk4zj5c5x2yps8nfhqzq2qv"]
