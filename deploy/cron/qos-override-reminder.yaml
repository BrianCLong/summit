apiVersion: batch/v1
kind: CronJob
metadata:
  name: qos-override-reminder
  namespace: intelgraph
spec:
  schedule: '0 * * * *' # hourly; adjust as desired
  jobTemplate:
    spec:
      template:
        spec:
          restartPolicy: OnFailure
          containers:
            - name: remind
              image: node:18-alpine
              env:
                - name: DATABASE_URL
                  valueFrom: { secretKeyRef: { name: app-secrets, key: DATABASE_URL } }
                - name: SLACK_QOS_CSM_WEBHOOK
                  valueFrom: { secretKeyRef: { name: app-secrets, key: SLACK_QOS_CSM_WEBHOOK } }
                - name: QOS_OVERRIDE_REMINDER_HOURS
                  value: '24'
              command: ['node', '/app/services/admin/cron/qos_override_reminder.ts']
              volumeMounts:
                - name: repo
                  mountPath: /app
          volumes:
            - name: repo
              emptyDir: {} # mount your code as you do for other cron jobs
