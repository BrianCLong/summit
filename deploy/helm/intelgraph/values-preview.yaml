# Preview environment overrides
# Matches structure of values.yaml

global:
  ingress:
    className: internal
    # Host is set dynamically by deploy.sh

# Reduce resource consumption for preview environments
common:
  replicaCount: 1
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

services:
  apiGateway:
    replicaCount: 1
    resources:
      requests:
        cpu: 200m
        memory: 512Mi
      limits:
        cpu: 500m
        memory: 1Gi

  mobile:
    replicaCount: 1
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 300m
        memory: 512Mi

  # Scale down background workers to save costs
  workflowEngine:
    replicaCount: 0

  feedProcessor:
    replicaCount: 0

  analytics:
    replicaCount: 0

  mlEngine:
    replicaCount: 0 # ML likely too heavy for preview

  graphAnalytics:
    replicaCount: 0

  searchEngine:
    replicaCount: 0

# Disable expensive external dependencies if possible or use smaller ones
# (Assuming postgres/redis/neo4j are required)

namespaceLimits:
  enabled: true
  quota:
    pods: 20
