version: '3.9'

services:
  prov-ledger:
    secrets:
      - postgres_uri
      - neo4j_password
      - api_token
    environment:
      POSTGRES_URI_FILE: /run/secrets/postgres_uri
      NEO4J_PASS_FILE: /run/secrets/neo4j_password
      API_TOKEN_FILE: /run/secrets/api_token

  sandbox:
    secrets:
      - neo4j_password
    environment:
      NEO4J_PASS_FILE: /run/secrets/neo4j_password

  copilot:
    secrets:
      - api_token
    environment:
      API_TOKEN_FILE: /run/secrets/api_token

secrets:
  postgres_uri:
    file: ./secrets/postgres_uri
  neo4j_password:
    file: ./secrets/neo4j_password
  api_token:
    file: ./secrets/api_token
