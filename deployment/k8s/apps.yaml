apiVersion: apps/v1
kind: Deployment
metadata:
  name: prov-ledger
spec:
  replicas: 2
  selector:
    matchLabels:
      app: prov-ledger
  template:
    metadata:
      labels:
        app: prov-ledger
    spec:
      containers:
      - name: prov-ledger
        image: summit/prov-ledger:${IMAGE_TAG}
        ports:
        - containerPort: 4010
        env:
        - name: NEO4J_URL
          value: "bolt://summit-databases-0.summit-db:7687" # Corrected stable StatefulSet DNS
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: policy-lac
spec:
  replicas: 2
  selector:
    matchLabels:
      app: policy-lac
  template:
    metadata:
      labels:
        app: policy-lac
    spec:
      containers:
      - name: policy-lac
        image: summit/policy-lac:${IMAGE_TAG}
        ports:
        - containerPort: 4000
