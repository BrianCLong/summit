{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Summit SLO Policy",
  "type": "object",
  "required": ["version", "slos", "budgets"],
  "properties": {
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "slos": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["service_area", "user_journey", "sli_definition", "slo_target", "window"],
        "properties": {
          "service_area": { "type": "string" },
          "user_journey": { "type": "string" },
          "sli_definition": { "type": "string" },
          "slo_target": { "type": "string" },
          "window": { "type": "string" }
        }
      }
    },
    "budgets": {
      "type": "object",
      "required": ["burn_rates", "policies"],
      "properties": {
        "burn_rates": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["rate", "severity", "action"],
            "properties": {
              "rate": { "type": "string" },
              "time_to_exhaust": { "type": "string" },
              "severity": { "type": "string", "enum": ["Info", "Warning", "Critical"] },
              "action": { "type": "string" }
            }
          }
        },
        "policies": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["state", "trigger", "consequences"],
            "properties": {
              "state": { "type": "string", "enum": ["Red", "Yellow", "Green"] },
              "trigger": { "type": "string" },
              "consequences": {
                "type": "array",
                "items": { "type": "string" }
              }
            }
          }
        }
      }
    }
  }
}
