{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ProvenanceReceipt",
  "type": "object",
  "required": ["receipt_id","target","sources","method","model","confidence"],
  "properties": {
    "receipt_id": { "type": "string" },
    "target": {
      "type":"object",
      "required":["type","id"],
      "properties":{"type":{"type":"string"},"id":{"type":"string"}}
    },
    "sources": {
      "type":"array",
      "items":{"type":"object","required":["artifact_id","content_sha256"],"properties":{
        "artifact_id":{"type":"string"},
        "content_sha256":{"type":"string"},
        "spans":{"type":"array","items":{"type":"object","properties":{"start":{"type":"integer"},"end":{"type":"integer"}}}}
      }}
    },
    "method": { "type":"object", "required":["pipeline_step","transform_chain"], "properties":{
      "pipeline_step":{"type":"string"},
      "transform_chain":{"type":"array","items":{"type":"string"}}
    }},
    "model": { "type":"object", "required":["name","version"], "properties":{"name":{"type":"string"},"version":{"type":"string"}}},
    "confidence": { "type":"number", "minimum": 0, "maximum": 1 },
    "rationale_template_id": { "type":"string" }
  },
  "additionalProperties": false
}
