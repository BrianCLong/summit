3d96dfc09753f9b62b7d216f6f07822c
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.http = http;
const request = require('supertest');
function http(app) {
    if (app)
        return request(app); // in-process app
    const base = process.env.TEST_BASE_URL; // external server (opt-in)
    if (!base) {
        throw new Error('httpClient: provide an Express app OR set TEST_BASE_URL to use an external server');
    }
    return request(base);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2JyaWFubG9uZy9EZXZlbG9wZXIvc3VtbWl0L3Rlc3RzL2ludGVncmF0aW9uL3V0aWxzL2h0dHBDbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7QUFFQSxvQkFPQztBQVRELE1BQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUVyQyxTQUFnQixJQUFJLENBQUMsR0FBUztJQUM1QixJQUFJLEdBQUc7UUFBRSxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLGlCQUFpQjtJQUMvQyxNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFvQiwyQkFBMkI7SUFDdEYsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ1YsTUFBTSxJQUFJLEtBQUssQ0FBQyxtRkFBbUYsQ0FBQyxDQUFDO0lBQ3ZHLENBQUM7SUFDRCxPQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN2QixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9icmlhbmxvbmcvRGV2ZWxvcGVyL3N1bW1pdC90ZXN0cy9pbnRlZ3JhdGlvbi91dGlscy9odHRwQ2xpZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJlcXVlc3QgPSByZXF1aXJlKCdzdXBlcnRlc3QnKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGh0dHAoYXBwPzogYW55KSB7XG4gIGlmIChhcHApIHJldHVybiByZXF1ZXN0KGFwcCk7IC8vIGluLXByb2Nlc3MgYXBwXG4gIGNvbnN0IGJhc2UgPSBwcm9jZXNzLmVudi5URVNUX0JBU0VfVVJMOyAgICAgICAgICAgICAgICAgICAgLy8gZXh0ZXJuYWwgc2VydmVyIChvcHQtaW4pXG4gIGlmICghYmFzZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignaHR0cENsaWVudDogcHJvdmlkZSBhbiBFeHByZXNzIGFwcCBPUiBzZXQgVEVTVF9CQVNFX1VSTCB0byB1c2UgYW4gZXh0ZXJuYWwgc2VydmVyJyk7XG4gIH1cbiAgcmV0dXJuIHJlcXVlc3QoYmFzZSk7XG59Il0sInZlcnNpb24iOjN9