602194dfb0b7f2839a4566529f883c36
"use strict";
// GraphQL Contract Test - Lightweight GraphQL API validation
// Replaces per-spec mocks with shared client
Object.defineProperty(exports, "__esModule", { value: true });
const graphqlClient_1 = require("../integration/utils/graphqlClient");
describe('GraphQL contract', () => {
    it('exposes query() and mutate()', async () => {
        const client = await (0, graphqlClient_1.createGraphQLTestClient)();
        // Contract: query() should return a response with status, body, and headers
        const queryResponse = await client.query('{ ok version }');
        expect(queryResponse.status).toBe(200);
        expect(queryResponse.body.data.ok).toBe(true);
        expect(queryResponse.headers['content-type']).toContain('application/json');
        // Contract: mutate() should return a response with status, body, and headers
        const mutateResponse = await client.mutate('mutation { ok __op }');
        expect(mutateResponse.status).toBe(200);
        expect(mutateResponse.body.data.ok).toBe(true);
        expect(mutateResponse.headers['content-type']).toContain('application/json');
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2JyaWFubG9uZy9EZXZlbG9wZXIvc3VtbWl0L3Rlc3RzL2ludGVncmF0aW9uL2dyYXBocWwuY29udHJhY3QudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUEsNkRBQTZEO0FBQzdELDZDQUE2Qzs7QUFFN0Msc0VBQTZFO0FBRTdFLFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxHQUFHLEVBQUU7SUFDaEMsRUFBRSxDQUFDLDhCQUE4QixFQUFFLEtBQUssSUFBSSxFQUFFO1FBQzVDLE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBQSx1Q0FBdUIsR0FBRSxDQUFDO1FBRS9DLDRFQUE0RTtRQUM1RSxNQUFNLGFBQWEsR0FBRyxNQUFNLE1BQU0sQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUMzRCxNQUFNLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN2QyxNQUFNLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzlDLE1BQU0sQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFFNUUsNkVBQTZFO1FBQzdFLE1BQU0sY0FBYyxHQUFHLE1BQU0sTUFBTSxDQUFDLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQ25FLE1BQU0sQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3hDLE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDL0MsTUFBTSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUMvRSxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9icmlhbmxvbmcvRGV2ZWxvcGVyL3N1bW1pdC90ZXN0cy9pbnRlZ3JhdGlvbi9ncmFwaHFsLmNvbnRyYWN0LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gR3JhcGhRTCBDb250cmFjdCBUZXN0IC0gTGlnaHR3ZWlnaHQgR3JhcGhRTCBBUEkgdmFsaWRhdGlvblxuLy8gUmVwbGFjZXMgcGVyLXNwZWMgbW9ja3Mgd2l0aCBzaGFyZWQgY2xpZW50XG5cbmltcG9ydCB7IGNyZWF0ZUdyYXBoUUxUZXN0Q2xpZW50IH0gZnJvbSAnLi4vaW50ZWdyYXRpb24vdXRpbHMvZ3JhcGhxbENsaWVudCc7XG5cbmRlc2NyaWJlKCdHcmFwaFFMIGNvbnRyYWN0JywgKCkgPT4ge1xuICBpdCgnZXhwb3NlcyBxdWVyeSgpIGFuZCBtdXRhdGUoKScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBjcmVhdGVHcmFwaFFMVGVzdENsaWVudCgpO1xuICAgIFxuICAgIC8vIENvbnRyYWN0OiBxdWVyeSgpIHNob3VsZCByZXR1cm4gYSByZXNwb25zZSB3aXRoIHN0YXR1cywgYm9keSwgYW5kIGhlYWRlcnNcbiAgICBjb25zdCBxdWVyeVJlc3BvbnNlID0gYXdhaXQgY2xpZW50LnF1ZXJ5KCd7IG9rIHZlcnNpb24gfScpO1xuICAgIGV4cGVjdChxdWVyeVJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgIGV4cGVjdChxdWVyeVJlc3BvbnNlLmJvZHkuZGF0YS5vaykudG9CZSh0cnVlKTtcbiAgICBleHBlY3QocXVlcnlSZXNwb25zZS5oZWFkZXJzWydjb250ZW50LXR5cGUnXSkudG9Db250YWluKCdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgXG4gICAgLy8gQ29udHJhY3Q6IG11dGF0ZSgpIHNob3VsZCByZXR1cm4gYSByZXNwb25zZSB3aXRoIHN0YXR1cywgYm9keSwgYW5kIGhlYWRlcnNcbiAgICBjb25zdCBtdXRhdGVSZXNwb25zZSA9IGF3YWl0IGNsaWVudC5tdXRhdGUoJ211dGF0aW9uIHsgb2sgX19vcCB9Jyk7XG4gICAgZXhwZWN0KG11dGF0ZVJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgIGV4cGVjdChtdXRhdGVSZXNwb25zZS5ib2R5LmRhdGEub2spLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KG11dGF0ZVJlc3BvbnNlLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddKS50b0NvbnRhaW4oJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=