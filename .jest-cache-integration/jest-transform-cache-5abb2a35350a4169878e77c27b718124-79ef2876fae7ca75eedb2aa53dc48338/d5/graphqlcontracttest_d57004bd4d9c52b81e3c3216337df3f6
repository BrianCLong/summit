38e7747f07dde660c344940f6029c530
"use strict";
// GraphQL Contract Test - Lightweight GraphQL API validation
// Replaces per-spec mocks with shared client
Object.defineProperty(exports, "__esModule", { value: true });
const graphqlClient_1 = require("../integration/utils/graphqlClient");
describe('GraphQL contract', () => {
    it('exposes query() and mutate()', async () => {
        const client = await (0, graphqlClient_1.createGraphQLClient)();
        // Contract: query() should return a response with status, body, and headers
        const queryResponse = await client.query('{ ok version }');
        expect(queryResponse.status).toBe(200);
        expect(queryResponse.body.data.ok).toBe(true);
        expect(queryResponse.headers['content-type']).toContain('application/json');
        // Contract: mutate() should return a response with status, body, and headers
        const mutateResponse = await client.mutate('mutation { ok __op }');
        expect(mutateResponse.status).toBe(200);
        expect(mutateResponse.body.data.ok).toBe(true);
        expect(mutateResponse.headers['content-type']).toContain('application/json');
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2JyaWFubG9uZy9EZXZlbG9wZXIvc3VtbWl0L3Rlc3RzL2ludGVncmF0aW9uL2dyYXBocWwuY29udHJhY3QudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUEsNkRBQTZEO0FBQzdELDZDQUE2Qzs7QUFFN0Msc0VBQXlFO0FBRXpFLFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxHQUFHLEVBQUU7SUFDaEMsRUFBRSxDQUFDLDhCQUE4QixFQUFFLEtBQUssSUFBSSxFQUFFO1FBQzVDLE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBQSxtQ0FBbUIsR0FBRSxDQUFDO1FBRTNDLDRFQUE0RTtRQUM1RSxNQUFNLGFBQWEsR0FBRyxNQUFNLE1BQU0sQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUMzRCxNQUFNLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN2QyxNQUFNLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzlDLE1BQU0sQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFFNUUsNkVBQTZFO1FBQzdFLE1BQU0sY0FBYyxHQUFHLE1BQU0sTUFBTSxDQUFDLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQ25FLE1BQU0sQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3hDLE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDL0MsTUFBTSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUMvRSxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9icmlhbmxvbmcvRGV2ZWxvcGVyL3N1bW1pdC90ZXN0cy9pbnRlZ3JhdGlvbi9ncmFwaHFsLmNvbnRyYWN0LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gR3JhcGhRTCBDb250cmFjdCBUZXN0IC0gTGlnaHR3ZWlnaHQgR3JhcGhRTCBBUEkgdmFsaWRhdGlvblxuLy8gUmVwbGFjZXMgcGVyLXNwZWMgbW9ja3Mgd2l0aCBzaGFyZWQgY2xpZW50XG5cbmltcG9ydCB7IGNyZWF0ZUdyYXBoUUxDbGllbnQgfSBmcm9tICcuLi9pbnRlZ3JhdGlvbi91dGlscy9ncmFwaHFsQ2xpZW50JztcblxuZGVzY3JpYmUoJ0dyYXBoUUwgY29udHJhY3QnLCAoKSA9PiB7XG4gIGl0KCdleHBvc2VzIHF1ZXJ5KCkgYW5kIG11dGF0ZSgpJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IGNyZWF0ZUdyYXBoUUxDbGllbnQoKTtcbiAgICBcbiAgICAvLyBDb250cmFjdDogcXVlcnkoKSBzaG91bGQgcmV0dXJuIGEgcmVzcG9uc2Ugd2l0aCBzdGF0dXMsIGJvZHksIGFuZCBoZWFkZXJzXG4gICAgY29uc3QgcXVlcnlSZXNwb25zZSA9IGF3YWl0IGNsaWVudC5xdWVyeSgneyBvayB2ZXJzaW9uIH0nKTtcbiAgICBleHBlY3QocXVlcnlSZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICBleHBlY3QocXVlcnlSZXNwb25zZS5ib2R5LmRhdGEub2spLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KHF1ZXJ5UmVzcG9uc2UuaGVhZGVyc1snY29udGVudC10eXBlJ10pLnRvQ29udGFpbignYXBwbGljYXRpb24vanNvbicpO1xuICAgIFxuICAgIC8vIENvbnRyYWN0OiBtdXRhdGUoKSBzaG91bGQgcmV0dXJuIGEgcmVzcG9uc2Ugd2l0aCBzdGF0dXMsIGJvZHksIGFuZCBoZWFkZXJzXG4gICAgY29uc3QgbXV0YXRlUmVzcG9uc2UgPSBhd2FpdCBjbGllbnQubXV0YXRlKCdtdXRhdGlvbiB7IG9rIF9fb3AgfScpO1xuICAgIGV4cGVjdChtdXRhdGVSZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICBleHBlY3QobXV0YXRlUmVzcG9uc2UuYm9keS5kYXRhLm9rKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChtdXRhdGVSZXNwb25zZS5oZWFkZXJzWydjb250ZW50LXR5cGUnXSkudG9Db250YWluKCdhcHBsaWNhdGlvbi9qc29uJyk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9