e5d6343aded8c9e1af229e1b810bf564
// Common integration harness tweaks
// Reduce noise on CI
if (process.env.CI) {
    const drop = (..._args) => { };
    console.debug = drop;
}
// Optional: keep a flag to *opt in* to external server only when intended
if (process.env.TEST_USE_EXTERNAL === '1' && !process.env.TEST_BASE_URL) {
    process.env.TEST_BASE_URL = 'http://localhost:4000';
}
// Optional: polyfill fetch for Node < 18 or custom usage
// const { fetch } = await import('undici'); (global as any).fetch = (global as any).fetch ?? fetch;
// Lock test determinism
jest.useFakeTimers({ doNotFake: ['nextTick'] }); // Allow nextTick for async/await
jest.setSystemTime(new Date('2024-01-01T00:00:00.000Z')); // Freeze time for deterministic tests
// If tests spin up servers, ensure they close on afterAll in each suite.
// You can also add global helpers here.
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2JyaWFubG9uZy9EZXZlbG9wZXIvc3VtbWl0L3Rlc3RzL2ludGVncmF0aW9uL3NldHVwLXRlc3RzLnRzIiwibWFwcGluZ3MiOiJBQUFBLG9DQUFvQztBQUVwQyxxQkFBcUI7QUFDckIsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDO0lBQ25CLE1BQU0sSUFBSSxHQUFHLENBQUMsR0FBRyxLQUFZLEVBQUUsRUFBRSxHQUFFLENBQUMsQ0FBQztJQUNyQyxPQUFPLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztBQUN2QixDQUFDO0FBRUQsMEVBQTBFO0FBQzFFLElBQUksT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQ3hFLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxHQUFHLHVCQUF1QixDQUFDO0FBQ3RELENBQUM7QUFFRCx5REFBeUQ7QUFDekQsb0dBQW9HO0FBRXBHLHdCQUF3QjtBQUN4QixJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUUsU0FBUyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsaUNBQWlDO0FBQ2xGLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxJQUFJLENBQUMsMEJBQTBCLENBQUMsQ0FBQyxDQUFDLENBQUMsc0NBQXNDO0FBRWhHLHlFQUF5RTtBQUN6RSx3Q0FBd0MiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2JyaWFubG9uZy9EZXZlbG9wZXIvc3VtbWl0L3Rlc3RzL2ludGVncmF0aW9uL3NldHVwLXRlc3RzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvbW1vbiBpbnRlZ3JhdGlvbiBoYXJuZXNzIHR3ZWFrc1xuXG4vLyBSZWR1Y2Ugbm9pc2Ugb24gQ0lcbmlmIChwcm9jZXNzLmVudi5DSSkge1xuICBjb25zdCBkcm9wID0gKC4uLl9hcmdzOiBhbnlbXSkgPT4ge307XG4gIGNvbnNvbGUuZGVidWcgPSBkcm9wO1xufVxuXG4vLyBPcHRpb25hbDoga2VlcCBhIGZsYWcgdG8gKm9wdCBpbiogdG8gZXh0ZXJuYWwgc2VydmVyIG9ubHkgd2hlbiBpbnRlbmRlZFxuaWYgKHByb2Nlc3MuZW52LlRFU1RfVVNFX0VYVEVSTkFMID09PSAnMScgJiYgIXByb2Nlc3MuZW52LlRFU1RfQkFTRV9VUkwpIHtcbiAgcHJvY2Vzcy5lbnYuVEVTVF9CQVNFX1VSTCA9ICdodHRwOi8vbG9jYWxob3N0OjQwMDAnO1xufVxuXG4vLyBPcHRpb25hbDogcG9seWZpbGwgZmV0Y2ggZm9yIE5vZGUgPCAxOCBvciBjdXN0b20gdXNhZ2Vcbi8vIGNvbnN0IHsgZmV0Y2ggfSA9IGF3YWl0IGltcG9ydCgndW5kaWNpJyk7IChnbG9iYWwgYXMgYW55KS5mZXRjaCA9IChnbG9iYWwgYXMgYW55KS5mZXRjaCA/PyBmZXRjaDtcblxuLy8gTG9jayB0ZXN0IGRldGVybWluaXNtXG5qZXN0LnVzZUZha2VUaW1lcnMoeyBkb05vdEZha2U6IFsnbmV4dFRpY2snXSB9KTsgLy8gQWxsb3cgbmV4dFRpY2sgZm9yIGFzeW5jL2F3YWl0XG5qZXN0LnNldFN5c3RlbVRpbWUobmV3IERhdGUoJzIwMjQtMDEtMDFUMDA6MDA6MDAuMDAwWicpKTsgLy8gRnJlZXplIHRpbWUgZm9yIGRldGVybWluaXN0aWMgdGVzdHNcblxuLy8gSWYgdGVzdHMgc3BpbiB1cCBzZXJ2ZXJzLCBlbnN1cmUgdGhleSBjbG9zZSBvbiBhZnRlckFsbCBpbiBlYWNoIHN1aXRlLlxuLy8gWW91IGNhbiBhbHNvIGFkZCBnbG9iYWwgaGVscGVycyBoZXJlLiJdLCJ2ZXJzaW9uIjozfQ==