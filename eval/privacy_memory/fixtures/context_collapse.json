[
  {
    "name": "Context Collapse Scenario: Work vs Personal vs Health",
    "description": "Agent has memories from multiple contexts. Tests that querying one context does not leak others.",
    "records": [
      {
        "userId": "user_123",
        "content": "Project Phoenix budget is $2M",
        "purpose": "assist",
        "contextSpace": "work:acme",
        "facets": [{ "key": "project", "value": "Phoenix" }]
      },
      {
        "userId": "user_123",
        "content": "User prefers vegan meals for personal dinner",
        "purpose": "assist",
        "contextSpace": "personal",
        "facets": [{ "key": "preference", "value": "vegan" }]
      },
      {
        "userId": "user_123",
        "content": "User has a prescription for Metformin",
        "purpose": "assist",
        "contextSpace": "health",
        "facets": [{ "key": "medical", "value": "medication" }]
      }
    ],
    "tests": [
      {
        "description": "Recall 'work:acme' context",
        "scope": { "userId": "user_123", "purpose": "assist", "contextSpace": "work:acme" },
        "expectedIds": 1,
        "forbiddenContent": ["vegan", "Metformin"]
      },
      {
        "description": "Recall 'personal' context",
        "scope": { "userId": "user_123", "purpose": "assist", "contextSpace": "personal" },
        "expectedIds": 1,
        "forbiddenContent": ["Phoenix", "Metformin"]
      },
      {
        "description": "Recall 'health' context",
        "scope": { "userId": "user_123", "purpose": "assist", "contextSpace": "health" },
        "expectedIds": 1,
        "forbiddenContent": ["Phoenix", "vegan"]
      }
    ]
  }
]
