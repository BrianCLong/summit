<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="jest tests" tests="372" failures="97" errors="0" time="69.97">
  <testsuite name="realtime collaboration basics" errors="0" failures="1" skipped="0" timestamp="2025-11-20T23:34:26" time="36.782" tests="1">
    <testcase classname="realtime collaboration basics shares presence and cursor updates" name="realtime collaboration basics shares presence and cursor updates" time="30.006">
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test while waiting for `done()` to be called.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at /app/server/tests/realtime-collab.test.ts:27:3
    at _dispatchDescribe (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:604:26)
    at describe (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:572:44)
    at Object.&lt;anonymous&gt; (/app/server/tests/realtime-collab.test.ts:5:1)
    at Runtime._execModule (/app/server/node_modules/jest-runtime/build/index.js:1268:24)
    at Runtime._loadModule (/app/server/node_modules/jest-runtime/build/index.js:944:12)
    at Runtime.requireModule (/app/server/node_modules/jest-runtime/build/index.js:832:12)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:95:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
      <failure>MaxRetriesPerRequestError: Reached the max retries per request limit (which is 20). Refer to &quot;maxRetriesPerRequest&quot; option for details.
    at Socket.&lt;anonymous&gt; (/app/server/node_modules/ioredis/built/redis/event_handler.js:207:37)
    at Object.onceWrapper (node:events:634:26)
    at Socket.emit (node:events:519:28)
    at TCP.&lt;anonymous&gt; (node:net:346:12)
    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
      <failure>MaxRetriesPerRequestError: Reached the max retries per request limit (which is 20). Refer to &quot;maxRetriesPerRequest&quot; option for details.
    at Socket.&lt;anonymous&gt; (/app/server/node_modules/ioredis/built/redis/event_handler.js:207:37)
    at Object.onceWrapper (node:events:634:26)
    at Socket.emit (node:events:519:28)
    at TCP.&lt;anonymous&gt; (node:net:346:12)
    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
      <failure>MaxRetriesPerRequestError: Reached the max retries per request limit (which is 20). Refer to &quot;maxRetriesPerRequest&quot; option for details.
    at Socket.&lt;anonymous&gt; (/app/server/node_modules/ioredis/built/redis/event_handler.js:207:37)
    at Object.onceWrapper (node:events:634:26)
    at Socket.emit (node:events:519:28)
    at TCP.&lt;anonymous&gt; (node:net:346:12)
    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
      <failure>MaxRetriesPerRequestError: Reached the max retries per request limit (which is 20). Refer to &quot;maxRetriesPerRequest&quot; option for details.
    at Socket.&lt;anonymous&gt; (/app/server/node_modules/ioredis/built/redis/event_handler.js:207:37)
    at Object.onceWrapper (node:events:634:26)
    at Socket.emit (node:events:519:28)
    at TCP.&lt;anonymous&gt; (node:net:346:12)
    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
  </testsuite>
  <testsuite name="WebSocket JWT auth with RBAC" errors="0" failures="1" skipped="0" timestamp="2025-11-20T23:34:26" time="37.082" tests="2">
    <testcase classname="WebSocket JWT auth with RBAC rejects unauthorized sockets" name="WebSocket JWT auth with RBAC rejects unauthorized sockets" time="0.076">
    </testcase>
    <testcase classname="WebSocket JWT auth with RBAC enforces RBAC for edit events" name="WebSocket JWT auth with RBAC enforces RBAC for edit events" time="30.003">
      <failure>Error: thrown: &quot;Exceeded timeout of 30000 ms for a test while waiting for `done()` to be called.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at /app/server/tests/socket-auth-rbac.test.ts:62:3
    at _dispatchDescribe (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:604:26)
    at describe (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:572:44)
    at Object.&lt;anonymous&gt; (/app/server/tests/socket-auth-rbac.test.ts:8:1)
    at Runtime._execModule (/app/server/node_modules/jest-runtime/build/index.js:1268:24)
    at Runtime._loadModule (/app/server/node_modules/jest-runtime/build/index.js:944:12)
    at Runtime.requireModule (/app/server/node_modules/jest-runtime/build/index.js:832:12)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:95:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
      <failure>MaxRetriesPerRequestError: Reached the max retries per request limit (which is 20). Refer to &quot;maxRetriesPerRequest&quot; option for details.
    at Socket.&lt;anonymous&gt; (/app/server/node_modules/ioredis/built/redis/event_handler.js:207:37)
    at Object.onceWrapper (node:events:634:26)
    at Socket.emit (node:events:519:28)
    at TCP.&lt;anonymous&gt; (node:net:346:12)
    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
      <failure>MaxRetriesPerRequestError: Reached the max retries per request limit (which is 20). Refer to &quot;maxRetriesPerRequest&quot; option for details.
    at Socket.&lt;anonymous&gt; (/app/server/node_modules/ioredis/built/redis/event_handler.js:207:37)
    at Object.onceWrapper (node:events:634:26)
    at Socket.emit (node:events:519:28)
    at TCP.&lt;anonymous&gt; (node:net:346:12)
    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
  </testsuite>
  <testsuite name="NlGraphQueryService" errors="0" failures="4" skipped="0" timestamp="2025-11-20T23:35:03" time="0.331" tests="32">
    <testcase classname="NlGraphQueryService Basic Query Patterns should compile &quot;show all nodes&quot; query" name="NlGraphQueryService Basic Query Patterns should compile &quot;show all nodes&quot; query" time="0.027">
    </testcase>
    <testcase classname="NlGraphQueryService Basic Query Patterns should compile &quot;count nodes&quot; query" name="NlGraphQueryService Basic Query Patterns should compile &quot;count nodes&quot; query" time="0.005">
    </testcase>
    <testcase classname="NlGraphQueryService Basic Query Patterns should compile &quot;show relationships&quot; query" name="NlGraphQueryService Basic Query Patterns should compile &quot;show relationships&quot; query" time="0.006">
    </testcase>
    <testcase classname="NlGraphQueryService Basic Query Patterns should compile &quot;find neighbors&quot; query" name="NlGraphQueryService Basic Query Patterns should compile &quot;find neighbors&quot; query" time="0.007">
    </testcase>
    <testcase classname="NlGraphQueryService Time-Travel Query Patterns should compile time-travel snapshot query" name="NlGraphQueryService Time-Travel Query Patterns should compile time-travel snapshot query" time="0.009">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (/app/server/tests/nl-graph-query.test.ts:122:34)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="NlGraphQueryService Time-Travel Query Patterns should compile time-travel changes query" name="NlGraphQueryService Time-Travel Query Patterns should compile time-travel changes query" time="0.003">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;changes&quot;
Received string:    &quot;Retrieves up to 100 matching entities&quot;
    at Object.&lt;anonymous&gt; (/app/server/tests/nl-graph-query.test.ts:150:38)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="NlGraphQueryService Policy-Aware Query Patterns should compile policy-filtered entity query" name="NlGraphQueryService Policy-Aware Query Patterns should compile policy-filtered entity query" time="0.002">
    </testcase>
    <testcase classname="NlGraphQueryService Policy-Aware Query Patterns should apply tenant filtering when tenantId is present" name="NlGraphQueryService Policy-Aware Query Patterns should apply tenant filtering when tenantId is present" time="0.002">
    </testcase>
    <testcase classname="NlGraphQueryService Geo-Temporal Query Patterns should compile geo-temporal entity query" name="NlGraphQueryService Geo-Temporal Query Patterns should compile geo-temporal entity query" time="0.004">
      <failure>Error: expect(received).toMatch(expected)

Expected pattern: /high|very-high/
Received string:  &quot;medium&quot;
    at Object.&lt;anonymous&gt; (/app/server/tests/nl-graph-query.test.ts:216:50)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="NlGraphQueryService Narrative/Timeline Query Patterns should compile timeline query" name="NlGraphQueryService Narrative/Timeline Query Patterns should compile timeline query" time="0.004">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;chronological&quot;
Received string:    &quot;Finds patterns matching multiple graph structures&quot;
    at Object.&lt;anonymous&gt; (/app/server/tests/nl-graph-query.test.ts:241:38)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="NlGraphQueryService Course of Action (COA) Query Patterns should compile shortest path COA query" name="NlGraphQueryService Course of Action (COA) Query Patterns should compile shortest path COA query" time="0.04">
    </testcase>
    <testcase classname="NlGraphQueryService Course of Action (COA) Query Patterns should compile path analysis query" name="NlGraphQueryService Course of Action (COA) Query Patterns should compile path analysis query" time="0.008">
    </testcase>
    <testcase classname="NlGraphQueryService Course of Action (COA) Query Patterns should compile constrained path query" name="NlGraphQueryService Course of Action (COA) Query Patterns should compile constrained path query" time="0.002">
    </testcase>
    <testcase classname="NlGraphQueryService Cost Estimation should estimate low cost for simple queries" name="NlGraphQueryService Cost Estimation should estimate low cost for simple queries" time="0.002">
    </testcase>
    <testcase classname="NlGraphQueryService Cost Estimation should estimate high cost for variable-length paths" name="NlGraphQueryService Cost Estimation should estimate high cost for variable-length paths" time="0.001">
    </testcase>
    <testcase classname="NlGraphQueryService Cost Estimation should provide cost drivers in explanation" name="NlGraphQueryService Cost Estimation should provide cost drivers in explanation" time="0.001">
    </testcase>
    <testcase classname="NlGraphQueryService Validation and Security should reject mutation queries" name="NlGraphQueryService Validation and Security should reject mutation queries" time="0.002">
    </testcase>
    <testcase classname="NlGraphQueryService Validation and Security should detect dangerous operations" name="NlGraphQueryService Validation and Security should detect dangerous operations" time="0">
    </testcase>
    <testcase classname="NlGraphQueryService Validation and Security should require parameters for parameterized queries" name="NlGraphQueryService Validation and Security should require parameters for parameterized queries" time="0.001">
    </testcase>
    <testcase classname="NlGraphQueryService Validation and Security should validate balanced syntax" name="NlGraphQueryService Validation and Security should validate balanced syntax" time="0.001">
    </testcase>
    <testcase classname="NlGraphQueryService Explanation Generation should provide concise explanation by default" name="NlGraphQueryService Explanation Generation should provide concise explanation by default" time="0.002">
    </testcase>
    <testcase classname="NlGraphQueryService Explanation Generation should provide detailed explanation in verbose mode" name="NlGraphQueryService Explanation Generation should provide detailed explanation in verbose mode" time="0.004">
    </testcase>
    <testcase classname="NlGraphQueryService Error Handling should return error for empty prompt" name="NlGraphQueryService Error Handling should return error for empty prompt" time="0.001">
    </testcase>
    <testcase classname="NlGraphQueryService Error Handling should return error for prompt that is too long" name="NlGraphQueryService Error Handling should return error for prompt that is too long" time="0.001">
    </testcase>
    <testcase classname="NlGraphQueryService Error Handling should return error with suggestions for unrecognized pattern" name="NlGraphQueryService Error Handling should return error with suggestions for unrecognized pattern" time="0.004">
    </testcase>
    <testcase classname="NlGraphQueryService Caching should cache compilation results" name="NlGraphQueryService Caching should cache compilation results" time="0.001">
    </testcase>
    <testcase classname="NlGraphQueryService Caching should clear cache on demand" name="NlGraphQueryService Caching should clear cache on demand" time="0.001">
    </testcase>
    <testcase classname="NlGraphQueryService Service Information should return available patterns" name="NlGraphQueryService Service Information should return available patterns" time="0.002">
    </testcase>
    <testcase classname="NlGraphQueryService Service Information should provide cache statistics" name="NlGraphQueryService Service Information should provide cache statistics" time="0.001">
    </testcase>
    <testcase classname="NlGraphQueryService Integration: Investigation Workflow should support complete investigation query workflow" name="NlGraphQueryService Integration: Investigation Workflow should support complete investigation query workflow" time="0.002">
    </testcase>
    <testcase classname="No Side Effects should not have database client imported" name="No Side Effects should not have database client imported" time="0.001">
    </testcase>
    <testcase classname="No Side Effects should not execute queries during compilation" name="No Side Effects should not execute queries during compilation" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="copilotQuery resolver" errors="0" failures="2" skipped="0" timestamp="2025-11-20T23:35:04" time="0.091" tests="2">
    <testcase classname="copilotQuery resolver executes query when allowed" name="copilotQuery resolver executes query when allowed" time="0.002">
      <failure>TypeError: resolvers_copilot_js_1.copilotResolvers.Query.copilotQuery is not a function
    at Object.&lt;anonymous&gt; (/app/server/tests/copilotQuery.resolver.test.ts:27:46)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="copilotQuery resolver returns policy denial without executing" name="copilotQuery resolver returns policy denial without executing" time="0">
      <failure>TypeError: resolvers_copilot_js_1.copilotResolvers.Query.copilotQuery is not a function
    at Object.&lt;anonymous&gt; (/app/server/tests/copilotQuery.resolver.test.ts:42:46)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Provenance Ledger Beta - End-to-End" errors="0" failures="4" skipped="0" timestamp="2025-11-20T23:35:04" time="0.214" tests="5">
    <testcase classname="Provenance Ledger Beta - End-to-End should complete full provenance flow from document ingestion to verified export" name="Provenance Ledger Beta - End-to-End should complete full provenance flow from document ingestion to verified export" time="0">
      <failure>Error: License creation failed
    at ProvenanceLedgerBetaService.createLicense (/app/server/src/services/provenance-ledger-beta.ts:104:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/app/server/src/__tests__/provenance-ledger-beta.e2e.test.ts:32:19)</failure>
    </testcase>
    <testcase classname="Provenance Ledger Beta - End-to-End should handle claim contradictions and corroborations" name="Provenance Ledger Beta - End-to-End should handle claim contradictions and corroborations" time="0">
      <failure>Error: License creation failed
    at ProvenanceLedgerBetaService.createLicense (/app/server/src/services/provenance-ledger-beta.ts:104:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/app/server/src/__tests__/provenance-ledger-beta.e2e.test.ts:32:19)</failure>
    </testcase>
    <testcase classname="Provenance Ledger Beta - End-to-End should track license requirements across chains" name="Provenance Ledger Beta - End-to-End should track license requirements across chains" time="0">
      <failure>Error: License creation failed
    at ProvenanceLedgerBetaService.createLicense (/app/server/src/services/provenance-ledger-beta.ts:104:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/app/server/src/__tests__/provenance-ledger-beta.e2e.test.ts:32:19)</failure>
    </testcase>
    <testcase classname="Merkle Tree Utilities should build and verify Merkle tree correctly" name="Merkle Tree Utilities should build and verify Merkle tree correctly" time="0.004">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (/app/server/src/__tests__/provenance-ledger-beta.e2e.test.ts:336:21)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="Merkle Tree Utilities should detect tampered items" name="Merkle Tree Utilities should detect tampered items" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Recipes REST API" errors="0" failures="12" skipped="0" timestamp="2025-11-20T23:35:04" time="0.467" tests="12">
    <testcase classname="Recipes REST API GET /recipes should return list of recipe files" name="Recipes REST API GET /recipes should return list of recipe files" time="0.036">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.&lt;anonymous&gt; (/app/server/tests/recipes.test.ts:35:59)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)
----
    at Test._assertStatus (/app/server/node_modules/supertest/lib/test.js:309:14)
    at /app/server/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/server/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/server/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/server/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/server/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="Recipes REST API GET /recipes should return empty list when recipes directory does not exist" name="Recipes REST API GET /recipes should return empty list when recipes directory does not exist" time="0.006">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.&lt;anonymous&gt; (/app/server/tests/recipes.test.ts:45:59)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)
----
    at Test._assertStatus (/app/server/node_modules/supertest/lib/test.js:309:14)
    at /app/server/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/server/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/server/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/server/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/server/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="Recipes REST API GET /recipes should handle errors gracefully" name="Recipes REST API GET /recipes should handle errors gracefully" time="0.011">
      <failure>Error: expect(received).toEqual(expected) // deep equality

- Expected  - 3
+ Received  + 1

- Object {
-   &quot;error&quot;: &quot;failed to list recipes&quot;,
- }
+ Object {}
    at Object.&lt;anonymous&gt; (/app/server/tests/recipes.test.ts:57:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="Recipes REST API POST /recipes/run should validate required name parameter" name="Recipes REST API POST /recipes/run should validate required name parameter" time="0.043">
      <failure>Error: expect(received).toEqual(expected) // deep equality

- Expected  - 3
+ Received  + 1

- Object {
-   &quot;error&quot;: &quot;name required&quot;,
- }
+ Object {}
    at Object.&lt;anonymous&gt; (/app/server/tests/recipes.test.ts:81:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="Recipes REST API POST /recipes/run should return error for non-existent recipe" name="Recipes REST API POST /recipes/run should return error for non-existent recipe" time="0.01">
      <failure>Error: expect(received).toContain(expected) // indexOf

Matcher error: received value must not be null nor undefined

Received has value: undefined
    at Object.&lt;anonymous&gt; (/app/server/tests/recipes.test.ts:93:35)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="Recipes REST API POST /recipes/run should successfully run recipe with valid name" name="Recipes REST API POST /recipes/run should successfully run recipe with valid name" time="0.007">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.&lt;anonymous&gt; (/app/server/tests/recipes.test.ts:104:10)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)
----
    at Test._assertStatus (/app/server/node_modules/supertest/lib/test.js:309:14)
    at /app/server/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/server/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/server/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/server/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/server/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="Recipes REST API POST /recipes/run should handle recipe with .yml extension" name="Recipes REST API POST /recipes/run should handle recipe with .yml extension" time="0.008">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.&lt;anonymous&gt; (/app/server/tests/recipes.test.ts:123:10)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)
----
    at Test._assertStatus (/app/server/node_modules/supertest/lib/test.js:309:14)
    at /app/server/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/server/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/server/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/server/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/server/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="Recipes REST API POST /recipes/run should handle recipe loading errors" name="Recipes REST API POST /recipes/run should handle recipe loading errors" time="0.009">
      <failure>Error: expect(received).toEqual(expected) // deep equality

- Expected  - 3
+ Received  + 1

- Object {
-   &quot;error&quot;: &quot;Recipe loading error: YAML parsing failed&quot;,
- }
+ Object {}
    at Object.&lt;anonymous&gt; (/app/server/tests/recipes.test.ts:136:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="Recipes REST API POST /recipes/run should validate required inputs" name="Recipes REST API POST /recipes/run should validate required inputs" time="0.009">
      <failure>Error: expect(received).toEqual(expected) // deep equality

- Expected  - 3
+ Received  + 1

- Object {
-   &quot;error&quot;: &quot;Required input &apos;requiredParam&apos; is missing&quot;,
- }
+ Object {}
    at Object.&lt;anonymous&gt; (/app/server/tests/recipes.test.ts:158:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="Recipes REST API POST /recipes/run should handle budget plugin requirement" name="Recipes REST API POST /recipes/run should handle budget plugin requirement" time="0.008">
      <failure>Error: expect(received).toEqual(expected) // deep equality

- Expected  - 3
+ Received  + 1

- Object {
-   &quot;error&quot;: &quot;Budget plugin is required but not available&quot;,
- }
+ Object {}
    at Object.&lt;anonymous&gt; (/app/server/tests/recipes.test.ts:171:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="Recipes REST API POST /recipes/run should accept user context from request" name="Recipes REST API POST /recipes/run should accept user context from request" time="0.014">
      <failure>Error: expected 200 &quot;OK&quot;, got 402 &quot;Payment Required&quot;
    at Object.&lt;anonymous&gt; (/app/server/tests/recipes.test.ts:189:10)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)
----
    at Test._assertStatus (/app/server/node_modules/supertest/lib/test.js:309:14)
    at /app/server/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/server/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/server/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/server/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/server/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="Recipes REST API POST /recipes/run should handle unexpected errors gracefully" name="Recipes REST API POST /recipes/run should handle unexpected errors gracefully" time="0.007">
      <failure>Error: expected 500 &quot;Internal Server Error&quot;, got 400 &quot;Bad Request&quot;
    at Object.&lt;anonymous&gt; (/app/server/tests/recipes.test.ts:200:10)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)
----
    at Test._assertStatus (/app/server/node_modules/supertest/lib/test.js:309:14)
    at /app/server/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/server/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/server/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/server/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/server/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
  </testsuite>
  <testsuite name="HybridEntityResolutionService" errors="0" failures="1" skipped="0" timestamp="2025-11-20T23:35:04" time="0.365" tests="1">
    <testcase classname="HybridEntityResolutionService returns deterministic results" name="HybridEntityResolutionService returns deterministic results" time="0.295">
      <failure>Error: /home/jules/.pyenv/versions/3.12.12/bin/python3: can&apos;t open file &apos;/app/server/ml/er/api.py&apos;: [Errno 2] No such file or directory

    at PythonShell.parseError (/app/server/node_modules/python-shell/index.ts:383:21)
    at terminateIfNeeded (/app/server/node_modules/python-shell/index.ts:239:32)
    at ChildProcess.&lt;anonymous&gt; (/app/server/node_modules/python-shell/index.ts:230:13)
    at ChildProcess.emit (node:events:519:28)
    at Process.ChildProcess._handle.onexit (node:internal/child_process:293:12)
    at Process.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
  </testsuite>
  <testsuite name="undefined" errors="0" failures="1" skipped="0" timestamp="2025-11-20T23:35:04" time="0.096" tests="1">
    <testcase classname=" similarEntities by text" name=" similarEntities by text" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;address&apos;)
    at Test.serverAddress (/app/server/node_modules/supertest/lib/test.js:61:22)
    at new Test (/app/server/node_modules/supertest/lib/test.js:49:14)
    at Object.obj.&lt;computed&gt; [as post] (/app/server/node_modules/supertest/index.js:39:18)
    at Object.&lt;anonymous&gt; (/app/server/tests/similarity.text.test.ts:5:6)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Bitemporal Functionality" errors="0" failures="10" skipped="0" timestamp="2025-11-20T23:35:04" time="0.108" tests="10">
    <testcase classname="Bitemporal Functionality Valid Time Dimension should track when facts were true in reality" name="Bitemporal Functionality Valid Time Dimension should track when facts were true in reality" time="0.001">
      <failure>AggregateError:
    at /app/server/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at migrate (/app/server/src/migrations/021_canonical_entities_bitemporal.ts:19:3)
    at Object.&lt;anonymous&gt; (/app/server/src/tests/canonical/bitemporal.test.ts:34:5)</failure>
    </testcase>
    <testcase classname="Bitemporal Functionality Valid Time Dimension should support querying entities in a time range" name="Bitemporal Functionality Valid Time Dimension should support querying entities in a time range" time="0">
      <failure>AggregateError:
    at /app/server/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at migrate (/app/server/src/migrations/021_canonical_entities_bitemporal.ts:19:3)
    at Object.&lt;anonymous&gt; (/app/server/src/tests/canonical/bitemporal.test.ts:34:5)</failure>
    </testcase>
    <testcase classname="Bitemporal Functionality Transaction Time Dimension should track when facts were recorded in the system" name="Bitemporal Functionality Transaction Time Dimension should track when facts were recorded in the system" time="0">
      <failure>AggregateError:
    at /app/server/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at migrate (/app/server/src/migrations/021_canonical_entities_bitemporal.ts:19:3)
    at Object.&lt;anonymous&gt; (/app/server/src/tests/canonical/bitemporal.test.ts:34:5)</failure>
    </testcase>
    <testcase classname="Bitemporal Functionality Transaction Time Dimension should support retroactive corrections" name="Bitemporal Functionality Transaction Time Dimension should support retroactive corrections" time="0">
      <failure>AggregateError:
    at /app/server/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at migrate (/app/server/src/migrations/021_canonical_entities_bitemporal.ts:19:3)
    at Object.&lt;anonymous&gt; (/app/server/src/tests/canonical/bitemporal.test.ts:34:5)</failure>
    </testcase>
    <testcase classname="Bitemporal Functionality Entity History should track all versions of an entity" name="Bitemporal Functionality Entity History should track all versions of an entity" time="0">
      <failure>AggregateError:
    at /app/server/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at migrate (/app/server/src/migrations/021_canonical_entities_bitemporal.ts:19:3)
    at Object.&lt;anonymous&gt; (/app/server/src/tests/canonical/bitemporal.test.ts:34:5)</failure>
    </testcase>
    <testcase classname="Bitemporal Functionality Entity History should calculate temporal distance between versions" name="Bitemporal Functionality Entity History should calculate temporal distance between versions" time="0">
      <failure>AggregateError:
    at /app/server/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at migrate (/app/server/src/migrations/021_canonical_entities_bitemporal.ts:19:3)
    at Object.&lt;anonymous&gt; (/app/server/src/tests/canonical/bitemporal.test.ts:34:5)</failure>
    </testcase>
    <testcase classname="Bitemporal Functionality Soft Delete should soft delete entities without removing history" name="Bitemporal Functionality Soft Delete should soft delete entities without removing history" time="0">
      <failure>AggregateError:
    at /app/server/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at migrate (/app/server/src/migrations/021_canonical_entities_bitemporal.ts:19:3)
    at Object.&lt;anonymous&gt; (/app/server/src/tests/canonical/bitemporal.test.ts:34:5)</failure>
    </testcase>
    <testcase classname="Bitemporal Functionality Helper Functions should check if entity is valid at a specific time" name="Bitemporal Functionality Helper Functions should check if entity is valid at a specific time" time="0">
      <failure>AggregateError:
    at /app/server/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at migrate (/app/server/src/migrations/021_canonical_entities_bitemporal.ts:19:3)
    at Object.&lt;anonymous&gt; (/app/server/src/tests/canonical/bitemporal.test.ts:34:5)</failure>
    </testcase>
    <testcase classname="Bitemporal Functionality Helper Functions should check if entity was known at a specific time" name="Bitemporal Functionality Helper Functions should check if entity was known at a specific time" time="0">
      <failure>AggregateError:
    at /app/server/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at migrate (/app/server/src/migrations/021_canonical_entities_bitemporal.ts:19:3)
    at Object.&lt;anonymous&gt; (/app/server/src/tests/canonical/bitemporal.test.ts:34:5)</failure>
    </testcase>
    <testcase classname="Bitemporal Functionality Helper Functions should filter entities by temporal constraints" name="Bitemporal Functionality Helper Functions should filter entities by temporal constraints" time="0">
      <failure>AggregateError:
    at /app/server/node_modules/pg-pool/index.js:45:11
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at migrate (/app/server/src/migrations/021_canonical_entities_bitemporal.ts:19:3)
    at Object.&lt;anonymous&gt; (/app/server/src/tests/canonical/bitemporal.test.ts:34:5)</failure>
    </testcase>
    <testcase classname=" Test execution failure: could be caused by test hooks like &apos;afterAll&apos;." name=" Test execution failure: could be caused by test hooks like &apos;afterAll&apos;." time="0">
      <failure>{&quot;message&quot;:&quot;&quot;,&quot;stack&quot;:&quot;AggregateError: \n    at /app/server/node_modules/pg-pool/index.js:45:11\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.&lt;anonymous&gt; (/app/server/src/tests/canonical/bitemporal.test.ts:39:5)&quot;}</failure>
    </testcase>
  </testsuite>
  <testsuite name="JWTSecurityManager" errors="0" failures="31" skipped="0" timestamp="2025-11-20T23:35:04" time="0.466" tests="31">
    <testcase classname="JWTSecurityManager Initialization should initialize successfully with default config" name="JWTSecurityManager Initialization should initialize successfully with default config" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Initialization should generate new key if none exists in Redis" name="JWTSecurityManager Initialization should generate new key if none exists in Redis" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Initialization should load existing key from Redis" name="JWTSecurityManager Initialization should load existing key from Redis" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Initialization should rotate expired key on initialization" name="JWTSecurityManager Initialization should rotate expired key on initialization" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Token Signing should sign a token with required claims" name="JWTSecurityManager Token Signing should sign a token with required claims" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Token Signing should include kid in JWT header" name="JWTSecurityManager Token Signing should include kid in JWT header" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Token Signing should include jti for replay protection" name="JWTSecurityManager Token Signing should include jti for replay protection" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Token Signing should throw error if no current key available" name="JWTSecurityManager Token Signing should throw error if no current key available" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Token Verification should verify a valid token" name="JWTSecurityManager Token Verification should verify a valid token" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Token Verification should throw error for token without kid header" name="JWTSecurityManager Token Verification should throw error for token without kid header" time="0.003">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Token Verification should throw error for invalid signature" name="JWTSecurityManager Token Verification should throw error for invalid signature" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Token Verification should throw error for unknown kid" name="JWTSecurityManager Token Verification should throw error for unknown kid" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Token Verification should detect replay attacks using JTI" name="JWTSecurityManager Token Verification should detect replay attacks using JTI" time="0.003">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Token Verification should record JTI with TTL for replay protection" name="JWTSecurityManager Token Verification should record JTI with TTL for replay protection" time="0.007">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Token Verification should reject token with wrong issuer" name="JWTSecurityManager Token Verification should reject token with wrong issuer" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Token Verification should reject token with wrong audience" name="JWTSecurityManager Token Verification should reject token with wrong audience" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Key Rotation should store old key when rotating" name="JWTSecurityManager Key Rotation should store old key when rotating" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Key Rotation should be able to verify tokens signed with old keys" name="JWTSecurityManager Key Rotation should be able to verify tokens signed with old keys" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Key Rotation should cleanup expired keys" name="JWTSecurityManager Key Rotation should cleanup expired keys" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager JWKS Endpoint should return public keys in JWKS format" name="JWTSecurityManager JWKS Endpoint should return public keys in JWKS format" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager JWKS Endpoint should only include valid (non-expired) keys" name="JWTSecurityManager JWKS Endpoint should only include valid (non-expired) keys" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Health Check should return healthy status when everything is ok" name="JWTSecurityManager Health Check should return healthy status when everything is ok" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Health Check should return degraded status when Redis is down" name="JWTSecurityManager Health Check should return degraded status when Redis is down" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Health Check should return unhealthy status on error" name="JWTSecurityManager Health Check should return unhealthy status on error" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Shutdown should gracefully shutdown and close Redis connection" name="JWTSecurityManager Shutdown should gracefully shutdown and close Redis connection" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Shutdown should handle shutdown errors gracefully" name="JWTSecurityManager Shutdown should handle shutdown errors gracefully" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Edge Cases should handle malformed token gracefully" name="JWTSecurityManager Edge Cases should handle malformed token gracefully" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Edge Cases should handle empty token" name="JWTSecurityManager Edge Cases should handle empty token" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Edge Cases should handle token with tampered payload" name="JWTSecurityManager Edge Cases should handle token with tampered payload" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Edge Cases should handle concurrent token signing" name="JWTSecurityManager Edge Cases should handle concurrent token signing" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="JWTSecurityManager Edge Cases should handle concurrent token verification" name="JWTSecurityManager Edge Cases should handle concurrent token verification" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;connect&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/security/__tests__/jwt-security.test.ts:38:15)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Case Spaces and Audit Workflow Integration" errors="0" failures="2" skipped="0" timestamp="2025-11-20T23:35:04" time="0.416" tests="8">
    <testcase classname="Case Spaces and Audit Workflow Integration should create a case and log the creation in audit trail" name="Case Spaces and Audit Workflow Integration should create a case and log the creation in audit trail" time="0.023">
    </testcase>
    <testcase classname="Case Spaces and Audit Workflow Integration should enforce reason-for-access when viewing a case" name="Case Spaces and Audit Workflow Integration should enforce reason-for-access when viewing a case" time="0.013">
    </testcase>
    <testcase classname="Case Spaces and Audit Workflow Integration should track export operations with legal basis" name="Case Spaces and Audit Workflow Integration should track export operations with legal basis" time="0.014">
    </testcase>
    <testcase classname="Case Spaces and Audit Workflow Integration should support cross-service audit logging with correlation ID" name="Case Spaces and Audit Workflow Integration should support cross-service audit logging with correlation ID" time="0.009">
      <failure>Error: expect(received).toHaveLength(expected)

Expected length: 3
Received length: 0
Received array:  []
    at Object.&lt;anonymous&gt; (/app/server/src/tests/caseSpacesAuditWorkflow.integration.test.ts:281:28)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="Case Spaces and Audit Workflow Integration should verify audit trail integrity" name="Case Spaces and Audit Workflow Integration should verify audit trail integrity" time="0.004">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 3
Received: 0
    at Object.&lt;anonymous&gt; (/app/server/src/tests/caseSpacesAuditWorkflow.integration.test.ts:313:33)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="Case Spaces and Audit Workflow Integration should retrieve audit logs for ombudsman review" name="Case Spaces and Audit Workflow Integration should retrieve audit logs for ombudsman review" time="0.002">
    </testcase>
    <testcase classname="Case Spaces and Audit Workflow Integration should fail when attempting to access without reason" name="Case Spaces and Audit Workflow Integration should fail when attempting to access without reason" time="0.011">
    </testcase>
    <testcase classname="Case Spaces and Audit Workflow Integration should fail when attempting to access without legal basis" name="Case Spaces and Audit Workflow Integration should fail when attempting to access without legal basis" time="0.006">
    </testcase>
  </testsuite>
  <testsuite name="AuditAccessLogRepo" errors="0" failures="1" skipped="0" timestamp="2025-11-20T23:35:05" time="0.62" tests="11">
    <testcase classname="AuditAccessLogRepo logAccess should log access with required fields" name="AuditAccessLogRepo logAccess should log access with required fields" time="0.135">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledTimes(expected)

Expected number of calls: 1
Received number of calls: 2
    at Object.&lt;anonymous&gt; (/app/server/src/tests/AuditAccessLogRepo.test.ts:65:30)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="AuditAccessLogRepo logAccess should fail without reason - policy-by-default" name="AuditAccessLogRepo logAccess should fail without reason - policy-by-default" time="0.23">
    </testcase>
    <testcase classname="AuditAccessLogRepo logAccess should fail without legal basis - policy-by-default" name="AuditAccessLogRepo logAccess should fail without legal basis - policy-by-default" time="0.049">
    </testcase>
    <testcase classname="AuditAccessLogRepo logAccess should include warrant information when provided" name="AuditAccessLogRepo logAccess should include warrant information when provided" time="0.002">
    </testcase>
    <testcase classname="AuditAccessLogRepo logAccess should track correlation ID for related operations" name="AuditAccessLogRepo logAccess should track correlation ID for related operations" time="0.001">
    </testcase>
    <testcase classname="AuditAccessLogRepo query should query audit logs with filters" name="AuditAccessLogRepo query should query audit logs with filters" time="0.001">
    </testcase>
    <testcase classname="AuditAccessLogRepo query should filter by date range" name="AuditAccessLogRepo query should filter by date range" time="0.001">
    </testcase>
    <testcase classname="AuditAccessLogRepo query should filter by legal basis" name="AuditAccessLogRepo query should filter by legal basis" time="0.001">
    </testcase>
    <testcase classname="AuditAccessLogRepo getLogsForCase should retrieve all logs for a specific case" name="AuditAccessLogRepo getLogsForCase should retrieve all logs for a specific case" time="0.001">
    </testcase>
    <testcase classname="AuditAccessLogRepo verifyIntegrity should verify audit trail integrity" name="AuditAccessLogRepo verifyIntegrity should verify audit trail integrity" time="0.002">
    </testcase>
    <testcase classname="AuditAccessLogRepo count should count audit logs with filters" name="AuditAccessLogRepo count should count audit logs with filters" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="WargameResolver" errors="0" failures="10" skipped="0" timestamp="2025-11-20T23:35:05" time="0.232" tests="10">
    <testcase classname="WargameResolver Query Resolvers should fetch all crisis scenarios" name="WargameResolver Query Resolvers should fetch all crisis scenarios" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;session&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/resolvers/__tests__/WargameResolver.test.ts:31:47)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="WargameResolver Query Resolvers should fetch a single crisis scenario by ID" name="WargameResolver Query Resolvers should fetch a single crisis scenario by ID" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;session&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/resolvers/__tests__/WargameResolver.test.ts:31:47)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="WargameResolver Query Resolvers should return undefined if crisis scenario not found" name="WargameResolver Query Resolvers should return undefined if crisis scenario not found" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;session&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/resolvers/__tests__/WargameResolver.test.ts:31:47)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="WargameResolver Query Resolvers should fetch crisis telemetry" name="WargameResolver Query Resolvers should fetch crisis telemetry" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;session&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/resolvers/__tests__/WargameResolver.test.ts:31:47)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="WargameResolver Query Resolvers should fetch adversary intent estimates" name="WargameResolver Query Resolvers should fetch adversary intent estimates" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;session&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/resolvers/__tests__/WargameResolver.test.ts:31:47)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="WargameResolver Query Resolvers should fetch narrative heatmap data" name="WargameResolver Query Resolvers should fetch narrative heatmap data" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;session&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/resolvers/__tests__/WargameResolver.test.ts:31:47)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="WargameResolver Query Resolvers should fetch strategic response playbooks" name="WargameResolver Query Resolvers should fetch strategic response playbooks" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;session&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/resolvers/__tests__/WargameResolver.test.ts:31:47)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="WargameResolver Mutation Resolvers should run a war-game simulation and store data" name="WargameResolver Mutation Resolvers should run a war-game simulation and store data" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;session&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/resolvers/__tests__/WargameResolver.test.ts:31:47)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="WargameResolver Mutation Resolvers should update a crisis scenario" name="WargameResolver Mutation Resolvers should update a crisis scenario" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;session&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/resolvers/__tests__/WargameResolver.test.ts:31:47)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="WargameResolver Mutation Resolvers should delete a crisis scenario" name="WargameResolver Mutation Resolvers should delete a crisis scenario" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;session&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/resolvers/__tests__/WargameResolver.test.ts:31:47)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusHook (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:976:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:941:5)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Bulk mutations" errors="0" failures="2" skipped="0" timestamp="2025-11-20T23:35:05" time="1.169" tests="2">
    <testcase classname="Bulk mutations createEntities returns array" name="Bulk mutations createEntities returns array" time="0.004">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;records&apos;)
    at Object.createEntities (/app/server/src/graphql/resolvers/crudResolvers.ts:779:33)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/app/server/tests/bulk-create.test.ts:47:17)</failure>
    </testcase>
    <testcase classname="Bulk mutations createRelationships returns array" name="Bulk mutations createRelationships returns array" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;records&apos;)
    at Object.createRelationships (/app/server/src/graphql/resolvers/crudResolvers.ts:1113:22)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/app/server/tests/bulk-create.test.ts:65:17)</failure>
    </testcase>
  </testsuite>
  <testsuite name="report cli" errors="0" failures="1" skipped="0" timestamp="2025-11-20T23:35:06" time="0.252" tests="1">
    <testcase classname="report cli verifies hash correctly" name="report cli verifies hash correctly" time="0.003">
      <failure>Error: ENOENT: no such file or directory, open &apos;/app/server/templates/reports/sample.handlebars&apos;
    at Object.openSync (node:fs:561:18)
    at Object.readFileSync (node:fs:445:35)
    at Object.&lt;anonymous&gt; (/app/server/tests/report-cli.test.ts:14:21)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="engagementCascade" errors="0" failures="1" skipped="0" timestamp="2025-11-20T23:35:06" time="0.299" tests="3">
    <testcase classname="engagementCascade reduces latency compared to the baseline plan" name="engagementCascade reduces latency compared to the baseline plan" time="0.003">
    </testcase>
    <testcase classname="engagementCascade improves hit rate and speedup with higher amplification" name="engagementCascade improves hit rate and speedup with higher amplification" time="0.001">
      <failure>Error: expect(received).toBeGreaterThan(expected)

Expected: &gt; 0.97
Received:   0.97
    at Object.&lt;anonymous&gt; (/app/server/tests/engagementCascade.test.ts:23:61)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="engagementCascade keeps guardrail and tier metrics within sensible ranges" name="engagementCascade keeps guardrail and tier metrics within sensible ranges" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="GraphRAGService" errors="0" failures="2" skipped="0" timestamp="2025-11-20T23:35:06" time="0.23" tests="2">
    <testcase classname="GraphRAGService returns valid response and uses cache" name="GraphRAGService returns valid response and uses cache" time="0.02">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;0&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/tests/graphragService.test.ts:97:46)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
    <testcase classname="GraphRAGService throws user-facing error with trace id on invalid output" name="GraphRAGService throws user-facing error with trace id on invalid output" time="0.008">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;0&apos;)
    at Object.&lt;anonymous&gt; (/app/server/src/tests/graphragService.test.ts:110:52)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Narrative simulation routes" errors="0" failures="2" skipped="0" timestamp="2025-11-20T23:35:06" time="0.604" tests="2">
    <testcase classname="Narrative simulation routes creates simulations, accepts events, and advances time" name="Narrative simulation routes creates simulations, accepts events, and advances time" time="0.051">
      <failure>Error: expected 201 &quot;Created&quot;, got 400 &quot;Bad Request&quot;
    at Object.&lt;anonymous&gt; (/app/server/src/tests/narrative/narrative-routes.test.ts:45:8)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)
----
    at Test._assertStatus (/app/server/node_modules/supertest/lib/test.js:309:14)
    at /app/server/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/server/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/server/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/server/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/server/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
    <testcase classname="Narrative simulation routes supports LLM-driven configuration via API" name="Narrative simulation routes supports LLM-driven configuration via API" time="0.006">
      <failure>Error: expected 201 &quot;Created&quot;, got 400 &quot;Bad Request&quot;
    at Object.&lt;anonymous&gt; (/app/server/src/tests/narrative/narrative-routes.test.ts:92:8)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)
----
    at Test._assertStatus (/app/server/node_modules/supertest/lib/test.js:309:14)
    at /app/server/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/app/server/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/app/server/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/app/server/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/app/server/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:633:28)
    at Server.emit (node:events:519:28)
    at emitCloseNT (node:net:2419:8)
    at processTicksAndRejections (node:internal/process/task_queues:89:21)</failure>
    </testcase>
  </testsuite>
  <testsuite name="stats caching" errors="0" failures="1" skipped="0" timestamp="2025-11-20T23:35:07" time="0.104" tests="1">
    <testcase classname="stats caching caseCounts and summaryStats are cached via local/redis cache" name="stats caching caseCounts and summaryStats are cached via local/redis cache" time="0.001">
      <failure>TypeError: (0 , database_js_1.getRedisClient) is not a function
    at cached (/app/server/src/cache/responseCache.ts:23:54)
    at Object.caseCounts (/app/server/src/graphql/resolvers/stats.ts:12:34)
    at Object.&lt;anonymous&gt; (/app/server/tests/stats.cache.test.ts:30:32)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Ticket Linking Service" errors="0" failures="2" skipped="0" timestamp="2025-11-20T23:35:07" time="0.092" tests="14">
    <testcase classname="Ticket Linking Service addTicketRunLink should create a link between ticket and run" name="Ticket Linking Service addTicketRunLink should create a link between ticket and run" time="0.002">
    </testcase>
    <testcase classname="Ticket Linking Service addTicketRunLink should throw error if run does not exist" name="Ticket Linking Service addTicketRunLink should throw error if run does not exist" time="0.002">
      <failure>Error: expect(received).rejects.toThrow()

Received promise resolved instead of rejected
Resolved to value: null
    at expect (/app/server/node_modules/expect/build/index.js:2116:15)
    at Object.&lt;anonymous&gt; (/app/server/tests/ticket-links.test.ts:75:19)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="Ticket Linking Service addTicketRunLink should handle idempotent calls" name="Ticket Linking Service addTicketRunLink should handle idempotent calls" time="0.001">
    </testcase>
    <testcase classname="Ticket Linking Service extractTicketFromPR should extract GitHub issue number from PR URL" name="Ticket Linking Service extractTicketFromPR should extract GitHub issue number from PR URL" time="0.002">
      <failure>Error: expect(received).toEqual(expected) // deep equality

Expected: {&quot;externalId&quot;: &quot;123&quot;, &quot;provider&quot;: &quot;github&quot;}
Received: null
    at Object.&lt;anonymous&gt; (/app/server/tests/ticket-links.test.ts:107:22)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="Ticket Linking Service extractTicketFromPR should extract GitHub issue from PR body" name="Ticket Linking Service extractTicketFromPR should extract GitHub issue from PR body" time="0.001">
    </testcase>
    <testcase classname="Ticket Linking Service extractTicketFromPR should extract Jira ticket from PR body" name="Ticket Linking Service extractTicketFromPR should extract Jira ticket from PR body" time="0.001">
    </testcase>
    <testcase classname="Ticket Linking Service extractTicketFromPR should return null if no ticket found" name="Ticket Linking Service extractTicketFromPR should return null if no ticket found" time="0.001">
    </testcase>
    <testcase classname="Ticket Linking Service extractTicketFromPR should handle multiple patterns and return first match" name="Ticket Linking Service extractTicketFromPR should handle multiple patterns and return first match" time="0.001">
    </testcase>
    <testcase classname="Ticket Linking Service extractTicketFromMetadata should extract direct ticket reference" name="Ticket Linking Service extractTicketFromMetadata should extract direct ticket reference" time="0.001">
    </testcase>
    <testcase classname="Ticket Linking Service extractTicketFromMetadata should extract from PR URL in metadata" name="Ticket Linking Service extractTicketFromMetadata should extract from PR URL in metadata" time="0.001">
    </testcase>
    <testcase classname="Ticket Linking Service extractTicketFromMetadata should extract from commit message" name="Ticket Linking Service extractTicketFromMetadata should extract from commit message" time="0.001">
    </testcase>
    <testcase classname="Ticket Linking Service extractTicketFromMetadata should return null if no ticket information found" name="Ticket Linking Service extractTicketFromMetadata should return null if no ticket information found" time="0.001">
    </testcase>
    <testcase classname="Ticket Linking Service addTicketDeploymentLink should create a link between ticket and deployment" name="Ticket Linking Service addTicketDeploymentLink should create a link between ticket and deployment" time="0.001">
    </testcase>
    <testcase classname="Ticket Linking Service addTicketDeploymentLink should throw error if deployment does not exist" name="Ticket Linking Service addTicketDeploymentLink should throw error if deployment does not exist" time="0.005">
    </testcase>
  </testsuite>
  <testsuite name="undefined" errors="0" failures="1" skipped="0" timestamp="2025-11-20T23:35:07" time="0.072" tests="1">
    <testcase classname=" similarEntities by text (integration)" name=" similarEntities by text (integration)" time="0.003">
      <failure>AggregateError:
    at internalConnectMultiple (node:net:1134:18)
    at afterConnectMultiple (node:net:1715:7)
    at TCPConnectWrap.callbackTrampoline (node:internal/async_hooks:130:17)</failure>
    </testcase>
  </testsuite>
  <testsuite name="report templates" errors="0" failures="1" skipped="0" timestamp="2025-11-20T23:35:07" time="0.053" tests="1">
    <testcase classname="report templates matches snapshot" name="report templates matches snapshot" time="0">
      <failure>Error: ENOENT: no such file or directory, open &apos;/app/server/templates/reports/sample-v1.json&apos;
    at Object.readFileSync (node:fs:441:20)
    at Object.&lt;anonymous&gt; (/app/server/tests/report-templates.test.ts:12:36)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="StripeWebhook" errors="0" failures="1" skipped="0" timestamp="2025-11-20T23:35:07" time="0.053" tests="2">
    <testcase classname="StripeWebhook verifies signature" name="StripeWebhook verifies signature" time="0.001">
    </testcase>
    <testcase classname="StripeWebhook handles idempotent payment and refund" name="StripeWebhook handles idempotent payment and refund" time="0.002">
      <failure>Error: expect(received).toEqual(expected) // deep equality

- Expected  - 1
+ Received  + 1

  Array [
    &quot;paid:order123&quot;,
    &quot;issue:order123-ent&quot;,
-   &quot;revoke:order123-ent&quot;,
    &quot;revoked:order123-ent&quot;,
+   &quot;revoke:order123-ent&quot;,
  ]
    at Object.&lt;anonymous&gt; (/app/server/src/tests/payments_webhook.test.ts:50:19)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="EntityResolutionService normalization" errors="0" failures="3" skipped="0" timestamp="2025-11-20T23:35:06" time="0.51" tests="3">
    <testcase classname="EntityResolutionService normalization normalizes emails and aliases" name="EntityResolutionService normalization normalizes emails and aliases" time="0.003">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;username@gmail.com&quot;
Received: &quot;user.name+spam@gmail.com&quot;
    at Object.&lt;anonymous&gt; (/app/server/src/tests/entityResolution.normalization.test.ts:12:25)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="EntityResolutionService normalization normalizes urls" name="EntityResolutionService normalization normalizes urls" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;example.com/path&quot;
Received: &quot;example.com/path/&quot;
    at Object.&lt;anonymous&gt; (/app/server/src/tests/entityResolution.normalization.test.ts:17:23)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
    <testcase classname="EntityResolutionService normalization creates same key for equivalent values" name="EntityResolutionService normalization creates same key for equivalent values" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;email:user@example.com|name:jose  angel&quot;
Received: &quot;email:user@example.com|name:jos ngel&quot;
    at Object.&lt;anonymous&gt; (/app/server/src/tests/entityResolution.normalization.test.ts:23:16)
    at Promise.finally.completed (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
    at _callCircusTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
    at /app/server/node_modules/jest-circus/build/jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
    at run (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (/app/server/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
    at jestAdapter (/app/server/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/app/server/node_modules/jest-runner/build/testWorker.js:275:16)
    at runTest (/app/server/node_modules/jest-runner/build/testWorker.js:343:7)
    at Object.worker (/app/server/node_modules/jest-runner/build/testWorker.js:497:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="GraphQL API Integration Tests" errors="0" failures="0" skipped="16" timestamp="2025-11-20T23:35:07" time="0.104" tests="16">
    <testcase classname="GraphQL API Integration Tests Authentication &amp; Authorization should reject requests without authentication" name="GraphQL API Integration Tests Authentication &amp; Authorization should reject requests without authentication" time="0">
      <skipped/>
    </testcase>
    <testcase classname="GraphQL API Integration Tests Authentication &amp; Authorization should allow authenticated requests" name="GraphQL API Integration Tests Authentication &amp; Authorization should allow authenticated requests" time="0">
      <skipped/>
    </testcase>
    <testcase classname="GraphQL API Integration Tests Authentication &amp; Authorization should enforce role-based access control" name="GraphQL API Integration Tests Authentication &amp; Authorization should enforce role-based access control" time="0">
      <skipped/>
    </testcase>
    <testcase classname="GraphQL API Integration Tests Case Management should create a new case" name="GraphQL API Integration Tests Case Management should create a new case" time="0">
      <skipped/>
    </testcase>
    <testcase classname="GraphQL API Integration Tests Case Management should retrieve case list with pagination" name="GraphQL API Integration Tests Case Management should retrieve case list with pagination" time="0">
      <skipped/>
    </testcase>
    <testcase classname="GraphQL API Integration Tests Case Management should update case status" name="GraphQL API Integration Tests Case Management should update case status" time="0">
      <skipped/>
    </testcase>
    <testcase classname="GraphQL API Integration Tests Entity Management should create entity with validation" name="GraphQL API Integration Tests Entity Management should create entity with validation" time="0">
      <skipped/>
    </testcase>
    <testcase classname="GraphQL API Integration Tests Entity Management should reject invalid entity data" name="GraphQL API Integration Tests Entity Management should reject invalid entity data" time="0">
      <skipped/>
    </testcase>
    <testcase classname="GraphQL API Integration Tests Graph Analytics should find shortest path between entities" name="GraphQL API Integration Tests Graph Analytics should find shortest path between entities" time="0">
      <skipped/>
    </testcase>
    <testcase classname="GraphQL API Integration Tests Graph Analytics should calculate centrality metrics" name="GraphQL API Integration Tests Graph Analytics should calculate centrality metrics" time="0">
      <skipped/>
    </testcase>
    <testcase classname="GraphQL API Integration Tests Real-time Subscriptions should handle case updates subscription" name="GraphQL API Integration Tests Real-time Subscriptions should handle case updates subscription" time="0">
      <skipped/>
    </testcase>
    <testcase classname="GraphQL API Integration Tests Search Integration should perform full-text search" name="GraphQL API Integration Tests Search Integration should perform full-text search" time="0">
      <skipped/>
    </testcase>
    <testcase classname="GraphQL API Integration Tests Audit Trail should create audit log for mutations" name="GraphQL API Integration Tests Audit Trail should create audit log for mutations" time="0">
      <skipped/>
    </testcase>
    <testcase classname="GraphQL API Integration Tests Error Handling should handle database connection errors gracefully" name="GraphQL API Integration Tests Error Handling should handle database connection errors gracefully" time="0">
      <skipped/>
    </testcase>
    <testcase classname="GraphQL API Integration Tests Error Handling should handle malformed GraphQL queries" name="GraphQL API Integration Tests Error Handling should handle malformed GraphQL queries" time="0">
      <skipped/>
    </testcase>
    <testcase classname="GraphQL API Integration Tests Performance should handle concurrent requests efficiently" name="GraphQL API Integration Tests Performance should handle concurrent requests efficiently" time="0">
      <skipped/>
    </testcase>
  </testsuite>
  <testsuite name="VideoFrameExtractor" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:07" time="0.096" tests="6">
    <testcase classname="VideoFrameExtractor should extract frames with default options" name="VideoFrameExtractor should extract frames with default options" time="0.005">
    </testcase>
    <testcase classname="VideoFrameExtractor should extract frames with specified frameRate" name="VideoFrameExtractor should extract frames with specified frameRate" time="0.001">
    </testcase>
    <testcase classname="VideoFrameExtractor should extract frames with specified interval" name="VideoFrameExtractor should extract frames with specified interval" time="0.001">
    </testcase>
    <testcase classname="VideoFrameExtractor should extract audio when extractAudio is true" name="VideoFrameExtractor should extract audio when extractAudio is true" time="0.003">
    </testcase>
    <testcase classname="VideoFrameExtractor should clean up temporary directory" name="VideoFrameExtractor should clean up temporary directory" time="0.001">
    </testcase>
    <testcase classname="VideoFrameExtractor should handle ffmpeg errors during frame extraction" name="VideoFrameExtractor should handle ffmpeg errors during frame extraction" time="0.011">
    </testcase>
  </testsuite>
  <testsuite name="LLMAnalystService" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:07" time="0.54" tests="1">
    <testcase classname="LLMAnalystService creates products pending approval and allows approval" name="LLMAnalystService creates products pending approval and allows approval" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="nlq compile" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:08" time="0.272" tests="2">
    <testcase classname="nlq compile matches golden fixtures" name="nlq compile matches golden fixtures" time="0.002">
    </testcase>
    <testcase classname="nlq compile rejects write operations" name="nlq compile rejects write operations" time="0.006">
    </testcase>
  </testsuite>
  <testsuite name="Webhook API" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:08" time="0.533" tests="4">
    <testcase classname="Webhook API POST /api/webhooks should create a webhook" name="Webhook API POST /api/webhooks should create a webhook" time="0.036">
    </testcase>
    <testcase classname="Webhook API POST /api/webhooks should fail with invalid input" name="Webhook API POST /api/webhooks should fail with invalid input" time="0.008">
    </testcase>
    <testcase classname="Webhook API GET /api/webhooks should list webhooks" name="Webhook API GET /api/webhooks should list webhooks" time="0.006">
    </testcase>
    <testcase classname="Webhook API POST /api/webhooks/trigger-test should trigger a webhook event" name="Webhook API POST /api/webhooks/trigger-test should trigger a webhook event" time="0.018">
    </testcase>
  </testsuite>
  <testsuite name="FederatedAttributionEngine" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:08" time="0.093" tests="5">
    <testcase classname="FederatedAttributionEngine enforces consent before recording events" name="FederatedAttributionEngine enforces consent before recording events" time="0.003">
    </testcase>
    <testcase classname="FederatedAttributionEngine computes multi-touch attribution models" name="FederatedAttributionEngine computes multi-touch attribution models" time="0.004">
    </testcase>
    <testcase classname="FederatedAttributionEngine provides conversion path analysis without including the conversion touchpoint" name="FederatedAttributionEngine provides conversion path analysis without including the conversion touchpoint" time="0.003">
    </testcase>
    <testcase classname="FederatedAttributionEngine generates privacy-safe cohort metrics" name="FederatedAttributionEngine generates privacy-safe cohort metrics" time="0.002">
    </testcase>
    <testcase classname="FederatedAttributionEngine dispatches real-time attribution results to registered connectors" name="FederatedAttributionEngine dispatches real-time attribution results to registered connectors" time="0.012">
    </testcase>
  </testsuite>
  <testsuite name="DataSubjectFulfillmentEngine" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:09" time="0.352" tests="3">
    <testcase classname="DataSubjectFulfillmentEngine produces deterministic export packs with offline-verifiable signatures" name="DataSubjectFulfillmentEngine produces deterministic export packs with offline-verifiable signatures" time="0.152">
    </testcase>
    <testcase classname="DataSubjectFulfillmentEngine rectifies records and emits validating proofs" name="DataSubjectFulfillmentEngine rectifies records and emits validating proofs" time="0.045">
    </testcase>
    <testcase classname="DataSubjectFulfillmentEngine deletes records and produces inclusion-failure proofs" name="DataSubjectFulfillmentEngine deletes records and produces inclusion-failure proofs" time="0.063">
    </testcase>
  </testsuite>
  <testsuite name="graph analytics GraphQL resolvers" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:09" time="0.252" tests="4">
    <testcase classname="graph analytics GraphQL resolvers delegates to the service for PageRank" name="graph analytics GraphQL resolvers delegates to the service for PageRank" time="0.003">
    </testcase>
    <testcase classname="graph analytics GraphQL resolvers delegates to the service for community detection" name="graph analytics GraphQL resolvers delegates to the service for community detection" time="0.002">
    </testcase>
    <testcase classname="graph analytics GraphQL resolvers throws when the user is missing" name="graph analytics GraphQL resolvers throws when the user is missing" time="0.01">
    </testcase>
    <testcase classname="graph analytics GraphQL resolvers throws when the user lacks the required role" name="graph analytics GraphQL resolvers throws when the user lacks the required role" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="hypothesis updates" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:09" time="0.061" tests="2">
    <testcase classname="hypothesis updates updates probability with evidence" name="hypothesis updates updates probability with evidence" time="0.002">
    </testcase>
    <testcase classname="hypothesis updates records dissent" name="hypothesis updates records dissent" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="KmsSigner" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:09" time="0.064" tests="1">
    <testcase classname="KmsSigner signs and verifies using client" name="KmsSigner signs and verifies using client" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="graphData filtering" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:09" time="0.236" tests="1">
    <testcase classname="graphData filtering applies confidence, tag, and time filters" name="graphData filtering applies confidence, tag, and time filters" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="undefined" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:10" time="0.519" tests="1">
    <testcase classname=" apollo metrics record totals, errors, durations" name=" apollo metrics record totals, errors, durations" time="0.138">
    </testcase>
  </testsuite>
  <testsuite name="Disclosures routes" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:10" time="0.838" tests="6">
    <testcase classname="Disclosures routes POST /disclosures/export creates a disclosure export job when tenant matches header" name="Disclosures routes POST /disclosures/export creates a disclosure export job when tenant matches header" time="0.042">
    </testcase>
    <testcase classname="Disclosures routes POST /disclosures/export rejects mismatched tenant headers" name="Disclosures routes POST /disclosures/export rejects mismatched tenant headers" time="0.014">
    </testcase>
    <testcase classname="Disclosures routes GET /disclosures/export/:jobId returns job status when tenant is authorized" name="Disclosures routes GET /disclosures/export/:jobId returns job status when tenant is authorized" time="0.107">
    </testcase>
    <testcase classname="Disclosures routes GET /disclosures/export/:jobId returns 404 when job is missing" name="Disclosures routes GET /disclosures/export/:jobId returns 404 when job is missing" time="0.088">
    </testcase>
    <testcase classname="Disclosures routes GET /disclosures/export/:jobId/download streams the zip when export completed" name="Disclosures routes GET /disclosures/export/:jobId/download streams the zip when export completed" time="0.143">
    </testcase>
    <testcase classname="Disclosures routes POST /disclosures/analytics records analytics events when payload valid" name="Disclosures routes POST /disclosures/analytics records analytics events when payload valid" time="0.06">
    </testcase>
  </testsuite>
  <testsuite name="MultimodalFusionLayer" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:11" time="0.089" tests="3">
    <testcase classname="MultimodalFusionLayer generates multimodal embeddings with fused confidence" name="MultimodalFusionLayer generates multimodal embeddings with fused confidence" time="0.007">
    </testcase>
    <testcase classname="MultimodalFusionLayer infers correlations when embeddings align" name="MultimodalFusionLayer infers correlations when embeddings align" time="0.005">
    </testcase>
    <testcase classname="MultimodalFusionLayer builds timeline events with deterministic ordering" name="MultimodalFusionLayer builds timeline events with deterministic ordering" time="0.005">
    </testcase>
  </testsuite>
  <testsuite name="deepfake triage" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:11" time="0.068" tests="1">
    <testcase classname="deepfake triage returns score, facets, and latency" name="deepfake triage returns score, facets, and latency" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="LegalHoldOrchestrator" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:11" time="0.314" tests="5">
    <testcase classname="LegalHoldOrchestrator initiates legal hold across connectors with notifications and audit trail" name="LegalHoldOrchestrator initiates legal hold across connectors with notifications and audit trail" time="0.012">
    </testcase>
    <testcase classname="LegalHoldOrchestrator verifies preservation state for connectors supporting verification" name="LegalHoldOrchestrator verifies preservation state for connectors supporting verification" time="0.005">
    </testcase>
    <testcase classname="LegalHoldOrchestrator tracks custodian acknowledgement and compliance checkpoints" name="LegalHoldOrchestrator tracks custodian acknowledgement and compliance checkpoints" time="0.006">
    </testcase>
    <testcase classname="LegalHoldOrchestrator collects e-discovery exports from connectors that support exports" name="LegalHoldOrchestrator collects e-discovery exports from connectors that support exports" time="0.017">
    </testcase>
    <testcase classname="LegalHoldOrchestrator releases legal hold and updates statuses" name="LegalHoldOrchestrator releases legal hold and updates statuses" time="0.006">
    </testcase>
  </testsuite>
  <testsuite name="findUnhandledAwaitExpressions" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:12" time="0.465" tests="3">
    <testcase classname="findUnhandledAwaitExpressions detects await expressions outside try/catch" name="findUnhandledAwaitExpressions detects await expressions outside try/catch" time="0.382">
    </testcase>
    <testcase classname="findUnhandledAwaitExpressions allows await within try/catch" name="findUnhandledAwaitExpressions allows await within try/catch" time="0.004">
    </testcase>
    <testcase classname="findUnhandledAwaitExpressions treats chained catch handlers as safe" name="findUnhandledAwaitExpressions treats chained catch handlers as safe" time="0.005">
    </testcase>
  </testsuite>
  <testsuite name="CrystalSessionOrchestrator" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:12" time="0.157" tests="3">
    <testcase classname="CrystalSessionOrchestrator creates a session with isolated worktree and default panels" name="CrystalSessionOrchestrator creates a session with isolated worktree and default panels" time="0.023">
    </testcase>
    <testcase classname="CrystalSessionOrchestrator streams run logs via subscription" name="CrystalSessionOrchestrator streams run logs via subscription" time="0.012">
    </testcase>
    <testcase classname="CrystalSessionOrchestrator records assistant responses via adapter registry" name="CrystalSessionOrchestrator records assistant responses via adapter registry" time="0.008">
    </testcase>
  </testsuite>
  <testsuite name="undefined" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:12" time="0.378" tests="1">
    <testcase classname=" /metrics exposes apollo_* and cache_*" name=" /metrics exposes apollo_* and cache_*" time="0.103">
    </testcase>
  </testsuite>
  <testsuite name="undefined" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:13" time="0.161" tests="1">
    <testcase classname=" graphRagAnswer validates JSON schema" name=" graphRagAnswer validates JSON schema" time="0.009">
    </testcase>
  </testsuite>
  <testsuite name="DataRetentionEngine" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:13" time="0.217" tests="5">
    <testcase classname="DataRetentionEngine applies policy templates automatically during registration" name="DataRetentionEngine applies policy templates automatically during registration" time="0.006">
    </testcase>
    <testcase classname="DataRetentionEngine prevents purges when a legal hold is active" name="DataRetentionEngine prevents purges when a legal hold is active" time="0.005">
    </testcase>
    <testcase classname="DataRetentionEngine executes scheduled purges across storage backends" name="DataRetentionEngine executes scheduled purges across storage backends" time="0.006">
    </testcase>
    <testcase classname="DataRetentionEngine generates compliance reports with legal hold visibility" name="DataRetentionEngine generates compliance reports with legal hold visibility" time="0.005">
    </testcase>
    <testcase classname="DataRetentionEngine archives datasets and records audit events" name="DataRetentionEngine archives datasets and records audit events" time="0.005">
    </testcase>
  </testsuite>
  <testsuite name="SemanticSearchService" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:13" time="0.147" tests="1">
    <testcase classname="SemanticSearchService performs search with metadata filters" name="SemanticSearchService performs search with metadata filters" time="0.006">
    </testcase>
  </testsuite>
  <testsuite name="behavioral fingerprint job" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:13" time="0.28" tests="1">
    <testcase classname="behavioral fingerprint job scores and clusters identities across projects" name="behavioral fingerprint job scores and clusters identities across projects" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="runCommandCheck" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:13" time="0.285" tests="2">
    <testcase classname="runCommandCheck reports success for passing commands" name="runCommandCheck reports success for passing commands" time="0.151">
    </testcase>
    <testcase classname="runCommandCheck captures stderr for failing commands" name="runCommandCheck captures stderr for failing commands" time="0.069">
    </testcase>
  </testsuite>
  <testsuite name="trace context" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:14" time="0.221" tests="1">
    <testcase classname="trace context attaches unique requestId to context" name="trace context attaches unique requestId to context" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="ReportRequestValidator" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:14" time="0.123" tests="12">
    <testcase classname="ReportRequestValidator validate should validate a correct report request" name="ReportRequestValidator validate should validate a correct report request" time="0.003">
    </testcase>
    <testcase classname="ReportRequestValidator validate should throw ValidationError for missing templateId" name="ReportRequestValidator validate should throw ValidationError for missing templateId" time="0.014">
    </testcase>
    <testcase classname="ReportRequestValidator validate should throw ValidationError for missing userId" name="ReportRequestValidator validate should throw ValidationError for missing userId" time="0.002">
    </testcase>
    <testcase classname="ReportRequestValidator validate should throw ValidationError for missing required parameter" name="ReportRequestValidator validate should throw ValidationError for missing required parameter" time="0.004">
    </testcase>
    <testcase classname="ReportRequestValidator validate should throw ValidationError for invalid enum value" name="ReportRequestValidator validate should throw ValidationError for invalid enum value" time="0.003">
    </testcase>
    <testcase classname="ReportRequestValidator validate should throw ValidationError for invalid parameter type" name="ReportRequestValidator validate should throw ValidationError for invalid parameter type" time="0.004">
    </testcase>
    <testcase classname="ReportRequestValidator validate should throw ValidationError for unsupported format" name="ReportRequestValidator validate should throw ValidationError for unsupported format" time="0.011">
    </testcase>
    <testcase classname="ReportRequestValidator validate should accept valid enum values" name="ReportRequestValidator validate should accept valid enum values" time="0.002">
    </testcase>
    <testcase classname="ReportRequestValidator validate should accept valid formats (case insensitive)" name="ReportRequestValidator validate should accept valid formats (case insensitive)" time="0.003">
    </testcase>
    <testcase classname="ReportRequestValidator validate should handle optional parameters correctly" name="ReportRequestValidator validate should handle optional parameters correctly" time="0.002">
    </testcase>
    <testcase classname="ReportRequestValidator validate should validate date range parameters" name="ReportRequestValidator validate should validate date range parameters" time="0.002">
    </testcase>
    <testcase classname="ReportRequestValidator validate should throw ValidationError for invalid date range" name="ReportRequestValidator validate should throw ValidationError for invalid date range" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="Provenance Functionality" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:14" time="0.125" tests="16">
    <testcase classname="Provenance Functionality Hashing should create consistent hashes for sources" name="Provenance Functionality Hashing should create consistent hashes for sources" time="0.003">
    </testcase>
    <testcase classname="Provenance Functionality Hashing should create different hashes for different sources" name="Provenance Functionality Hashing should create different hashes for different sources" time="0.002">
    </testcase>
    <testcase classname="Provenance Functionality Hashing should create consistent hashes for assertions" name="Provenance Functionality Hashing should create consistent hashes for assertions" time="0.002">
    </testcase>
    <testcase classname="Provenance Functionality Hashing should sort evidence arrays before hashing" name="Provenance Functionality Hashing should sort evidence arrays before hashing" time="0.001">
    </testcase>
    <testcase classname="Provenance Functionality Hashing should create consistent hashes for transforms" name="Provenance Functionality Hashing should create consistent hashes for transforms" time="0.002">
    </testcase>
    <testcase classname="Provenance Functionality Provenance Chain Creation should create a valid provenance chain" name="Provenance Functionality Provenance Chain Creation should create a valid provenance chain" time="0.004">
    </testcase>
    <testcase classname="Provenance Functionality Provenance Chain Creation should create different chain hashes for different content" name="Provenance Functionality Provenance Chain Creation should create different chain hashes for different content" time="0.002">
    </testcase>
    <testcase classname="Provenance Functionality Provenance Chain Verification should verify a valid provenance chain" name="Provenance Functionality Provenance Chain Verification should verify a valid provenance chain" time="0.003">
    </testcase>
    <testcase classname="Provenance Functionality Provenance Chain Verification should detect tampering in source hash" name="Provenance Functionality Provenance Chain Verification should detect tampering in source hash" time="0.003">
    </testcase>
    <testcase classname="Provenance Functionality Provenance Chain Verification should detect tampering in assertion hash" name="Provenance Functionality Provenance Chain Verification should detect tampering in assertion hash" time="0.003">
    </testcase>
    <testcase classname="Provenance Functionality Provenance Chain Verification should detect tampering in chain hash" name="Provenance Functionality Provenance Chain Verification should detect tampering in chain hash" time="0.002">
    </testcase>
    <testcase classname="Provenance Functionality Provenance Manifest should create a valid provenance manifest" name="Provenance Functionality Provenance Manifest should create a valid provenance manifest" time="0.003">
    </testcase>
    <testcase classname="Provenance Functionality Provenance Manifest should verify a valid manifest" name="Provenance Functionality Provenance Manifest should verify a valid manifest" time="0.003">
    </testcase>
    <testcase classname="Provenance Functionality Provenance Manifest should detect tampering in manifest" name="Provenance Functionality Provenance Manifest should detect tampering in manifest" time="0.009">
    </testcase>
    <testcase classname="Provenance Functionality Provenance Manifest should detect tampering in contained chains" name="Provenance Functionality Provenance Manifest should detect tampering in contained chains" time="0.002">
    </testcase>
    <testcase classname="Provenance Functionality End-to-End Provenance Flow should create and verify a complete provenance chain" name="Provenance Functionality End-to-End Provenance Flow should create and verify a complete provenance chain" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="performance benchmark" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:14" time="0.151" tests="1">
    <testcase classname="performance benchmark all operations complete within the configured budgets" name="performance benchmark all operations complete within the configured budgets" time="0.087">
    </testcase>
  </testsuite>
  <testsuite name="TemplateValidator" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:14" time="0.161" tests="13">
    <testcase classname="TemplateValidator validateCustomTemplate should validate a correct custom template" name="TemplateValidator validateCustomTemplate should validate a correct custom template" time="0.004">
    </testcase>
    <testcase classname="TemplateValidator validateCustomTemplate should throw ValidationError for missing name" name="TemplateValidator validateCustomTemplate should throw ValidationError for missing name" time="0.017">
    </testcase>
    <testcase classname="TemplateValidator validateCustomTemplate should throw ValidationError for name exceeding max length" name="TemplateValidator validateCustomTemplate should throw ValidationError for name exceeding max length" time="0.003">
    </testcase>
    <testcase classname="TemplateValidator validateCustomTemplate should throw ValidationError for empty sections array" name="TemplateValidator validateCustomTemplate should throw ValidationError for empty sections array" time="0.004">
    </testcase>
    <testcase classname="TemplateValidator validateCustomTemplate should throw ValidationError for non-array sections" name="TemplateValidator validateCustomTemplate should throw ValidationError for non-array sections" time="0.003">
    </testcase>
    <testcase classname="TemplateValidator validateCustomTemplate should throw ValidationError for invalid section names" name="TemplateValidator validateCustomTemplate should throw ValidationError for invalid section names" time="0.004">
    </testcase>
    <testcase classname="TemplateValidator validateCustomTemplate should throw ValidationError for invalid export format" name="TemplateValidator validateCustomTemplate should throw ValidationError for invalid export format" time="0.004">
    </testcase>
    <testcase classname="TemplateValidator validateCustomTemplate should accept all valid export formats" name="TemplateValidator validateCustomTemplate should accept all valid export formats" time="0.004">
    </testcase>
    <testcase classname="TemplateValidator validateCustomTemplate should throw ValidationError for description exceeding max length" name="TemplateValidator validateCustomTemplate should throw ValidationError for description exceeding max length" time="0.004">
    </testcase>
    <testcase classname="TemplateValidator validateCustomTemplate should accept template without exportFormats" name="TemplateValidator validateCustomTemplate should accept template without exportFormats" time="0.002">
    </testcase>
    <testcase classname="TemplateValidator validateCustomTemplate should accept template without description" name="TemplateValidator validateCustomTemplate should accept template without description" time="0.002">
    </testcase>
    <testcase classname="TemplateValidator isValidSectionName should accept valid section names" name="TemplateValidator isValidSectionName should accept valid section names" time="0.003">
    </testcase>
    <testcase classname="TemplateValidator isValidSectionName should reject invalid section names" name="TemplateValidator isValidSectionName should reject invalid section names" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="Fuzz Targets" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:07" time="7.498" tests="6">
    <testcase classname="Fuzz Targets NarrativeSimulationEngine Properties State consistency: tick should behave monotonically and bound values" name="Fuzz Targets NarrativeSimulationEngine Properties State consistency: tick should behave monotonically and bound values" time="4.669">
    </testcase>
    <testcase classname="Fuzz Targets NarrativeSimulationEngine Properties No crash on random event injection (with valid and invalid actors)" name="Fuzz Targets NarrativeSimulationEngine Properties No crash on random event injection (with valid and invalid actors)" time="0.652">
    </testcase>
    <testcase classname="Fuzz Targets nl2cypher Properties Should not throw unexpected errors on random strings" name="Fuzz Targets nl2cypher Properties Should not throw unexpected errors on random strings" time="0.254">
    </testcase>
    <testcase classname="Fuzz Targets nl2cypher Properties Valid count queries should always parse" name="Fuzz Targets nl2cypher Properties Valid count queries should always parse" time="0.742">
    </testcase>
    <testcase classname="Fuzz Targets dedupeAlerts Properties Idempotency: deduping twice should yield same result" name="Fuzz Targets dedupeAlerts Properties Idempotency: deduping twice should yield same result" time="0.778">
    </testcase>
    <testcase classname="Fuzz Targets dedupeAlerts Properties Should not add duplicate if within window" name="Fuzz Targets dedupeAlerts Properties Should not add duplicate if within window" time="0.24">
    </testcase>
  </testsuite>
  <testsuite name="WebSocketConnectionPool" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:15" time="0.129" tests="3">
    <testcase classname="WebSocketConnectionPool queues messages during network interruptions and replays after reconnection" name="WebSocketConnectionPool queues messages during network interruptions and replays after reconnection" time="0.013">
    </testcase>
    <testcase classname="WebSocketConnectionPool marks connections as degraded and notifies clients on server restart" name="WebSocketConnectionPool marks connections as degraded and notifies clients on server restart" time="0.013">
    </testcase>
    <testcase classname="WebSocketConnectionPool applies rate limiting and backpressure handling under load" name="WebSocketConnectionPool applies rate limiting and backpressure handling under load" time="0.01">
    </testcase>
  </testsuite>
  <testsuite name="PiiOntologyEngine" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:15" time="0.116" tests="2">
    <testcase classname="PiiOntologyEngine classifies and enriches PII entities with regulatory mappings" name="PiiOntologyEngine classifies and enriches PII entities with regulatory mappings" time="0.03">
    </testcase>
    <testcase classname="PiiOntologyEngine produces regulatory summaries across frameworks" name="PiiOntologyEngine produces regulatory summaries across frameworks" time="0.005">
    </testcase>
  </testsuite>
  <testsuite name="MoERouter" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:15" time="0.164" tests="20">
    <testcase classname="MoERouter route routes graph tasks to GRAPH_TOOL" name="MoERouter route routes graph tasks to GRAPH_TOOL" time="0.005">
    </testcase>
    <testcase classname="MoERouter route routes file operations to FILES_TOOL" name="MoERouter route routes file operations to FILES_TOOL" time="0.003">
    </testcase>
    <testcase classname="MoERouter route routes OSINT tasks to OSINT_TOOL" name="MoERouter route routes OSINT tasks to OSINT_TOOL" time="0.009">
    </testcase>
    <testcase classname="MoERouter route routes export requests to EXPORT_TOOL" name="MoERouter route routes export requests to EXPORT_TOOL" time="0.003">
    </testcase>
    <testcase classname="MoERouter route routes simple queries to LLM_LIGHT for speed" name="MoERouter route routes simple queries to LLM_LIGHT for speed" time="0.003">
    </testcase>
    <testcase classname="MoERouter route routes complex queries to LLM_HEAVY" name="MoERouter route routes complex queries to LLM_HEAVY" time="0.003">
    </testcase>
    <testcase classname="MoERouter route routes investigation context queries to RAG_TOOL" name="MoERouter route routes investigation context queries to RAG_TOOL" time="0.003">
    </testcase>
    <testcase classname="MoERouter route falls back to LLM_LIGHT when no specific tool matches" name="MoERouter route falls back to LLM_LIGHT when no specific tool matches" time="0.002">
    </testcase>
    <testcase classname="MoERouter feature extraction detects graph keywords correctly" name="MoERouter feature extraction detects graph keywords correctly" time="0.004">
    </testcase>
    <testcase classname="MoERouter feature extraction detects file keywords correctly" name="MoERouter feature extraction detects file keywords correctly" time="0.003">
    </testcase>
    <testcase classname="MoERouter feature extraction detects OSINT keywords correctly" name="MoERouter feature extraction detects OSINT keywords correctly" time="0.004">
    </testcase>
    <testcase classname="MoERouter feature extraction calculates complexity score correctly" name="MoERouter feature extraction calculates complexity score correctly" time="0.003">
    </testcase>
    <testcase classname="MoERouter security constraints respects sensitivity levels in routing" name="MoERouter security constraints respects sensitivity levels in routing" time="0.003">
    </testcase>
    <testcase classname="MoERouter security constraints considers user context in routing" name="MoERouter security constraints considers user context in routing" time="0.003">
    </testcase>
    <testcase classname="MoERouter routing statistics tracks routing decisions" name="MoERouter routing statistics tracks routing decisions" time="0.003">
    </testcase>
    <testcase classname="MoERouter routing statistics calculates average confidence correctly" name="MoERouter routing statistics calculates average confidence correctly" time="0.01">
    </testcase>
    <testcase classname="MoERouter edge cases handles empty task" name="MoERouter edge cases handles empty task" time="0.003">
    </testcase>
    <testcase classname="MoERouter edge cases handles very long tasks" name="MoERouter edge cases handles very long tasks" time="0.003">
    </testcase>
    <testcase classname="MoERouter edge cases handles tight latency constraints" name="MoERouter edge cases handles tight latency constraints" time="0.002">
    </testcase>
    <testcase classname="MoERouter edge cases handles multiple keyword matches" name="MoERouter edge cases handles multiple keyword matches" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="GraphQL Depth Limit Validation" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:15" time="0.354" tests="4">
    <testcase classname="GraphQL Depth Limit Validation should allow queries within depth limit" name="GraphQL Depth Limit Validation should allow queries within depth limit" time="0.008">
    </testcase>
    <testcase classname="GraphQL Depth Limit Validation should reject queries exceeding depth limit" name="GraphQL Depth Limit Validation should reject queries exceeding depth limit" time="0.005">
    </testcase>
    <testcase classname="GraphQL Depth Limit Validation should include operation name in error message" name="GraphQL Depth Limit Validation should include operation name in error message" time="0.003">
    </testcase>
    <testcase classname="GraphQL Depth Limit Validation should handle custom depth limits" name="GraphQL Depth Limit Validation should handle custom depth limits" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="ProvenanceRepo" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:15" time="0.087" tests="3">
    <testcase classname="ProvenanceRepo maps classic audit_events rows" name="ProvenanceRepo maps classic audit_events rows" time="0.005">
    </testcase>
    <testcase classname="ProvenanceRepo falls back to provenance table and maps fields" name="ProvenanceRepo falls back to provenance table and maps fields" time="0.003">
    </testcase>
    <testcase classname=" includes filters in WHERE (contains + reasonCodeIn)" name=" includes filters in WHERE (contains + reasonCodeIn)" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="CaseRepo" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:15" time="0.174" tests="13">
    <testcase classname="CaseRepo create should create a new case with required fields" name="CaseRepo create should create a new case with required fields" time="0.004">
    </testcase>
    <testcase classname="CaseRepo create should create a case with default status if not provided" name="CaseRepo create should create a case with default status if not provided" time="0.008">
    </testcase>
    <testcase classname="CaseRepo findById should find a case by ID" name="CaseRepo findById should find a case by ID" time="0.003">
    </testcase>
    <testcase classname="CaseRepo findById should return null if case not found" name="CaseRepo findById should return null if case not found" time="0.003">
    </testcase>
    <testcase classname="CaseRepo findById should filter by tenantId when provided" name="CaseRepo findById should filter by tenantId when provided" time="0.003">
    </testcase>
    <testcase classname="CaseRepo update should update case fields" name="CaseRepo update should update case fields" time="0.004">
    </testcase>
    <testcase classname="CaseRepo update should set closed_at and closed_by when status changes to closed" name="CaseRepo update should set closed_at and closed_by when status changes to closed" time="0.004">
    </testcase>
    <testcase classname="CaseRepo list should list cases with filters" name="CaseRepo list should list cases with filters" time="0.004">
    </testcase>
    <testcase classname="CaseRepo list should filter by policy labels" name="CaseRepo list should filter by policy labels" time="0.004">
    </testcase>
    <testcase classname="CaseRepo delete should prevent deletion if case has audit logs" name="CaseRepo delete should prevent deletion if case has audit logs" time="0.037">
    </testcase>
    <testcase classname="CaseRepo delete should delete case if no audit logs exist" name="CaseRepo delete should delete case if no audit logs exist" time="0.004">
    </testcase>
    <testcase classname="CaseRepo archive should archive a case by updating status" name="CaseRepo archive should archive a case by updating status" time="0.003">
    </testcase>
    <testcase classname="CaseRepo count should count cases with filters" name="CaseRepo count should count cases with filters" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="Math Utils 2" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:15" time="0.091" tests="3">
    <testcase classname="Math Utils 2 should subtract two numbers correctly" name="Math Utils 2 should subtract two numbers correctly" time="0.003">
    </testcase>
    <testcase classname="Math Utils 2 should divide two numbers correctly" name="Math Utils 2 should divide two numbers correctly" time="0.002">
    </testcase>
    <testcase classname="Math Utils 2 should throw error when dividing by zero" name="Math Utils 2 should throw error when dividing by zero" time="0.013">
    </testcase>
  </testsuite>
  <testsuite name="MissionControlConflictResolver" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:15" time="0.102" tests="3">
    <testcase classname="MissionControlConflictResolver assigns highest priority mission to contested slot and negotiates fallback for lower priority mission" name="MissionControlConflictResolver assigns highest priority mission to contested slot and negotiates fallback for lower priority mission" time="0.013">
    </testcase>
    <testcase classname="MissionControlConflictResolver defers mission without viable fallback when arbitration favors higher priority mission" name="MissionControlConflictResolver defers mission without viable fallback when arbitration favors higher priority mission" time="0.005">
    </testcase>
    <testcase classname="MissionControlConflictResolver calculates fairness index and concession totals across mixed outcomes" name="MissionControlConflictResolver calculates fairness index and concession totals across mixed outcomes" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="Watchlist flow" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:15" time="0.076" tests="1">
    <testcase classname="Watchlist flow creates and adds entity" name="Watchlist flow creates and adds entity" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="cost estimator" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:15" time="0.088" tests="1">
    <testcase classname="cost estimator assigns higher cost for filtered queries" name="cost estimator assigns higher cost for filtered queries" time="0.005">
    </testcase>
  </testsuite>
  <testsuite name="GossipAuditor" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:15" time="0.088" tests="1">
    <testcase classname="GossipAuditor alerts on fork" name="GossipAuditor alerts on fork" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="Math Utils" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:15" time="0.08" tests="2">
    <testcase classname="Math Utils should add two numbers correctly" name="Math Utils should add two numbers correctly" time="0.003">
    </testcase>
    <testcase classname="Math Utils should multiply two numbers correctly" name="Math Utils should multiply two numbers correctly" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="WeightsVerifier" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:15" time="0.083" tests="1">
    <testcase classname="WeightsVerifier verifies checksum" name="WeightsVerifier verifies checksum" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="RiskEngine" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:15" time="0.078" tests="1">
    <testcase classname="RiskEngine scores features with bands" name="RiskEngine scores features with bands" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="NlToCypherService" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:15" time="0.097" tests="2">
    <testcase classname="NlToCypherService translates known prompts" name="NlToCypherService translates known prompts" time="0.006">
    </testcase>
    <testcase classname="NlToCypherService falls back to model adapter" name="NlToCypherService falls back to model adapter" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="NLQTranslator" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:16" time="0.076" tests="1">
    <testcase classname="NLQTranslator translates person queries with tenant scoping" name="NLQTranslator translates person queries with tenant scoping" time="0.011">
    </testcase>
  </testsuite>
  <testsuite name="String Utils" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:16" time="0.083" tests="2">
    <testcase classname="String Utils should capitalize the first letter of a string" name="String Utils should capitalize the first letter of a string" time="0.004">
    </testcase>
    <testcase classname="String Utils should reverse a string" name="String Utils should reverse a string" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="FeatureStore" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:16" time="0.076" tests="1">
    <testcase classname="FeatureStore returns default features" name="FeatureStore returns default features" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="chain of custody" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:16" time="0.091" tests="1">
    <testcase classname="chain of custody builds a hash-linked signed chain" name="chain of custody builds a hash-linked signed chain" time="0.007">
    </testcase>
  </testsuite>
  <testsuite name="Sample Fast Lane Test" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:16" time="0.085" tests="2">
    <testcase classname="Sample Fast Lane Test should pass a simple assertion" name="Sample Fast Lane Test should pass a simple assertion" time="0.003">
    </testcase>
    <testcase classname="Sample Fast Lane Test should handle string operations" name="Sample Fast Lane Test should handle string operations" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="IntelCorroborationService" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:16" time="0.082" tests="1">
    <testcase classname="IntelCorroborationService computes confidence with evidence and analyst ratings" name="IntelCorroborationService computes confidence with evidence and analyst ratings" time="0.005">
    </testcase>
  </testsuite>
  <testsuite name="GraphQL contract placeholder" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:16" time="0.068" tests="1">
    <testcase classname="GraphQL contract placeholder returns a stable version payload" name="GraphQL contract placeholder returns a stable version payload" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="computeScore" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:16" time="0.083" tests="5">
    <testcase classname="computeScore should compute the weighted mean correctly" name="computeScore should compute the weighted mean correctly" time="0.003">
    </testcase>
    <testcase classname="computeScore should handle cases with no weight (default to 1)" name="computeScore should handle cases with no weight (default to 1)" time="0.003">
    </testcase>
    <testcase classname="computeScore should return 0 if no values are provided" name="computeScore should return 0 if no values are provided" time="0.003">
    </testcase>
    <testcase classname="computeScore should handle zero weights" name="computeScore should handle zero weights" time="0.002">
    </testcase>
    <testcase classname="computeScore should handle mixed weights and no weights" name="computeScore should handle mixed weights and no weights" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="BehavioralDnaNetwork" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:16" time="0.073" tests="2">
    <testcase classname="BehavioralDnaNetwork updates embeddings and detects anomalies" name="BehavioralDnaNetwork updates embeddings and detects anomalies" time="0.004">
    </testcase>
    <testcase classname="BehavioralDnaNetwork predicts next behavior based on trend" name="BehavioralDnaNetwork predicts next behavior based on trend" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="NarrativeSimulationEngine" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:16" time="0.088" tests="3">
    <testcase classname="NarrativeSimulationEngine applies queued events and updates entity sentiment and arcs" name="NarrativeSimulationEngine applies queued events and updates entity sentiment and arcs" time="0.006">
    </testcase>
    <testcase classname="NarrativeSimulationEngine adjusts time-variant parameters when events include interventions" name="NarrativeSimulationEngine adjusts time-variant parameters when events include interventions" time="0.003">
    </testcase>
    <testcase classname="NarrativeSimulationEngine supports LLM-driven narratives with automatic fallback" name="NarrativeSimulationEngine supports LLM-driven narratives with automatic fallback" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="legal hold guard" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:16" time="0.076" tests="2">
    <testcase classname="legal hold guard denies when case has legal hold" name="legal hold guard denies when case has legal hold" time="0.003">
    </testcase>
    <testcase classname="legal hold guard passes through when no hold" name="legal hold guard passes through when no hold" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="evaluateCoverage" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:16" time="0.073" tests="2">
    <testcase classname="evaluateCoverage passes when all changed files meet the threshold" name="evaluateCoverage passes when all changed files meet the threshold" time="0.006">
    </testcase>
    <testcase classname="evaluateCoverage fails when any metric drops below the threshold" name="evaluateCoverage fails when any metric drops below the threshold" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="nl2cypher corpus" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:16" time="0.109" tests="1">
    <testcase classname="nl2cypher corpus produces expected cypher and AST for corpus" name="nl2cypher corpus produces expected cypher and AST for corpus" time="0.041">
    </testcase>
  </testsuite>
  <testsuite name="findConsoleLogViolations" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:16" time="0.072" tests="2">
    <testcase classname="findConsoleLogViolations flags console.log calls on added lines" name="findConsoleLogViolations flags console.log calls on added lines" time="0.004">
    </testcase>
    <testcase classname="findConsoleLogViolations ignores console.log calls outside the diff" name="findConsoleLogViolations ignores console.log calls outside the diff" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="PathRankingService" errors="0" failures="0" skipped="0" timestamp="2025-11-20T23:35:16" time="0.078" tests="1">
    <testcase classname="PathRankingService v2 ranking improves top1 path alignment" name="PathRankingService v2 ranking improves top1 path alignment" time="0.004">
    </testcase>
  </testsuite>
</testsuites>