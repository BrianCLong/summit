# IntelGraph Server - Development Environment
# Auto-generated with secure defaults $(new Date().toISOString())

# Application
NODE_ENV=development
PORT=8080

# Database URLs
DATABASE_URL=postgresql://maestro:maestro-dev-secret@localhost:5432/maestro?sslmode=prefer
DATABASE_READ_REPLICAS=
PG_WRITE_POOL_SIZE=24
PG_READ_POOL_SIZE=60
PG_QUERY_MAX_RETRIES=3
PG_RETRY_BASE_DELAY_MS=40
PG_RETRY_MAX_DELAY_MS=500
PG_READ_TIMEOUT_MS=5000
PG_WRITE_TIMEOUT_MS=30000
PG_CONNECTION_LEAK_THRESHOLD_MS=15000
PG_SLOW_QUERY_THRESHOLD_MS=2000
PG_PREPARED_STATEMENT_CACHE_SIZE=500
PG_SLOW_QUERY_ANALYSIS_ENTRIES=200
PG_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
PG_CIRCUIT_BREAKER_COOLDOWN_MS=30000

# Optimized Pooling Configuration
PG_IDLE_TIMEOUT_MS=30000
PG_MAX_LIFETIME_MS=3600000
PG_POOL_MONITOR_INTERVAL_MS=15000
PG_WAIT_QUEUE_THRESHOLD=20

NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=neo4j-dev-password

# Redis URL format (alternative to individual settings)
REDIS_URL=redis://localhost:6379

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis-dev-secret
# Redis Cluster Configuration (optional)
# REDIS_USE_CLUSTER=true
# REDIS_CLUSTER_NODES=redis-node-1:6379,redis-node-2:6379,redis-node-3:6379
# REDIS_TLS_ENABLED=true

# Security (auto-generated secure secrets)
JWT_SECRET=CHANGE_ME_GENERATE_SECURE_SECRET
JWT_REFRESH_SECRET=CHANGE_ME_GENERATE_SECURE_SECRET
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d
SESSION_SECRET=CHANGE_ME_GENERATE_SECURE_SECRET
ENCRYPTION_KEY=CHANGE_ME_GENERATE_SECURE_SECRET
ABYSS_SECURITY_HEADER=CHANGE_ME_GENERATE_SECURE_SECRET

# OIDC Configuration (configure for production)
# OIDC_ISSUER=https://your-oidc-provider.com
# OIDC_CLIENT_ID=your-client-id
# OIDC_CLIENT_SECRET=your-client-secret
# OIDC_REDIRECT_URI=http://localhost:8080/auth/callback

# CORS (used by validation)
CORS_ORIGIN=http://localhost:3000,http://localhost:5173
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,https://app.maestro.dev

# Rate Limiting (used by validation)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_MAX_AUTHENTICATED=1000
AI_RATE_LIMIT_WINDOW_MS=900000
AI_RATE_LIMIT_MAX_REQUESTS=50
BACKGROUND_RATE_LIMIT_WINDOW_MS=60000
BACKGROUND_RATE_LIMIT_MAX_REQUESTS=120

# Caching Configuration
CACHE_ENABLED=true
CACHE_TTL_DEFAULT=300
L1_CACHE_MAX_BYTES=1073741824
L1_CACHE_FALLBACK_TTL_SECONDS=300

# GraphQL Cost Analysis
ENFORCE_GRAPHQL_COST_LIMITS=true
# GRAPHQL_COST_CONFIG_PATH=/path/to/cost-config.json
# COST_EXEMPT_TENANTS=tenant1,tenant2

# External APIs (optional)
# OPENAI_API_KEY=sk-your-openai-key
# VIRUSTOTAL_API_KEY=your-virustotal-key

# Feature Flags
AI_ENABLED=false
KAFKA_ENABLED=false
MAESTRO_MCP_ENABLED=true
MAESTRO_PIPELINES_ENABLED=true

# OpenTelemetry (tracing + metrics exporters)
OTEL_SERVICE_NAME=intelgraph-server
OTEL_EXPORTER_OTLP_TRACES_ENDPOINT=http://localhost:4318/v1/traces
OTEL_EXPORTER_OTLP_METRICS_ENDPOINT=http://localhost:4318/v1/metrics
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=1.0

# Logging
LOG_LEVEL=debug

# TLS (optional for development)
# TLS_KEY_PATH=/path/to/private.key
# TLS_CERT_PATH=/path/to/certificate.crt

# Docling Service (document processing)
DOCLING_SVC_URL=http://localhost:5001
DOCLING_SVC_TIMEOUT_MS=30000

# Health Endpoints (enabled by default for K8s probes)
HEALTH_ENDPOINTS_ENABLED=true

# Security Headers
SECURITY_HEADERS_ENABLED=true
SECURITY_HEADERS_CSP_ENABLED=false
SECURITY_HEADERS_CSP_REPORT_ONLY=true

# GA Cloud Mode (strict production constraints)
# GA_CLOUD=true
# AWS_REGION=us-east-1

# Development Only - DO NOT ENABLE IN PRODUCTION
# ENABLE_INSECURE_DEV_AUTH=true
