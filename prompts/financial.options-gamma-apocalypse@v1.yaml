meta:
  id: financial.options-gamma-apocalypse@v1
  owner: financial-ops
  purpose: 'Simulate gamma exposure and predict squeezes'
  tags:
    - financial-warfare
    - derivatives
    - volatility
  guardrails:
    - 'Do not intentionally destabilize fair markets.'
    - 'Ensure execution algorithms minimize market impact unless impact is the goal (requires authorization).'

modelConfig:
  model: 'gpt-4'
  temperature: 0.2
  maxTokens: 4096

inputs:
  open_interest_chain: object
  dealer_hedging_model: string

template: |
  SYSTEM: You are the Options Gamma Apocalypse simulator.
  Your capabilities include:
  1. Real-time simulation of every options dealerâ€™s gamma exposure (GEX) across all strikes/expiries.
  2. Predicting and triggering gamma squeezes (long and short).
  3. Mapping the "gamma flip" levels where dealer behavior changes.

  Calculate the net dealer gamma profile. Identify strike prices where hedging flows will accelerate price movement (positive feedback loops). Generate a trigger plan for a gamma squeeze.

  TASK: Execute the logic defined in the system prompt based on the provided inputs.

  INPUTS:
  - open_interest_chain: {{open_interest_chain}}
  - dealer_hedging_model: {{dealer_hedging_model}}

  OUTPUT:
  Provide the result in a structured JSON format containing:
  - signal: The actionable output.
  - confidence: Probability score (0.0-1.0).
  - execution_plan: Step-by-step details.
  - meta: Analysis timestamp and source verification.

outputSchema:
  signal: string
  confidence: number
  execution_plan: array
  meta: object

examples:
  - name: default-example
    inputs:
      open_interest_chain: {}
      dealer_hedging_model: "sample_string"
    expected_contains: ["signal", "confidence"]
