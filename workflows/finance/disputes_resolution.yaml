name: disputes_resolution
nodes:
  - id: ingest_dispute
    next: gather_context
  - id: gather_context
    type: agent_task
    agent: agent_dispute_handler
    next: propose_resolution
  - id: propose_resolution
    type: agent_task
    agent: agent_dispute_handler
    next: hitl_review
  - id: hitl_review
    type: hitl_review
    required_role: "disputes_officer"
    next_approved: execute_refund
    next_denied: reject_dispute
  - id: execute_refund
    type: execute
    tool: "issue_refund"
    data_class: FINANCIAL_SENSITIVE
    next: evidence_emit
  - id: reject_dispute
    type: execute
    tool: "close_dispute"
    next: evidence_emit
  - id: evidence_emit
    type: evidence_writer
