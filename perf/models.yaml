# Traffic models and performance budgets for golden journeys
journeys:
  - id: GP-001
    name: interactive-graph-search
    description: Analyst opens workspace, runs entity search, expands relationships, saves a case note.
    traffic_model:
      mode: open
      target_rps: 60
      arrival_pattern: diurnal
      diurnal_profile:
        weekday_peak_rps: 80
        weekend_peak_rps: 40
        ramp_up_utc: "12:00"
        ramp_down_utc: "02:00"
      burst:
        factor: 3
        duration: 10m
    mix:
      steps:
        - name: auth-and-bootstrap
          share: 0.1
        - name: entity-search
          share: 0.35
        - name: relationship-explore
          share: 0.35
        - name: save-note
          share: 0.2
    budgets:
      latency_ms:
        p95: 180
        p99: 320
      error_rate: 0.01
      resources:
        cpu_utilization_pct: 65
        memory_utilization_pct: 70
      slo:
        objective: 99.5
        window: 30d
        burn_threshold_fast: 2.0
        burn_threshold_slow: 1.0
    data_tenancy:
      tenant: test-perf
      headers:
        x-perf: "true"
        x-tenant: test-perf

  - id: GP-002
    name: case-ingestion-pipeline
    description: Bulk ingest of case JSON with downstream enrichment workers.
    traffic_model:
      mode: closed
      virtual_users: 40
      target_rps: 45
      arrival_pattern: steady
      burst:
        factor: 2
        duration: 20m
    mix:
      steps:
        - name: upload-case
          share: 0.25
        - name: enqueue-enrichment
          share: 0.25
        - name: monitor-status
          share: 0.3
        - name: persist-summary
          share: 0.2
    budgets:
      latency_ms:
        p95: 220
        p99: 400
      error_rate: 0.005
      resources:
        cpu_utilization_pct: 60
        memory_utilization_pct: 75
      slo:
        objective: 99.0
        window: 30d
        burn_threshold_fast: 2.5
        burn_threshold_slow: 1.2
    data_tenancy:
      tenant: test-perf
      headers:
        x-perf: "true"
        x-tenant: test-perf

  - id: GP-003
    name: intel-report-publish
    description: Analysts compile and publish reports with graph snapshots and attachments.
    traffic_model:
      mode: open
      target_rps: 25
      arrival_pattern: bursty
      burst:
        factor: 4
        duration: 8m
      diurnal_profile:
        weekday_peak_rps: 35
        weekend_peak_rps: 18
        ramp_up_utc: "14:00"
        ramp_down_utc: "00:00"
    mix:
      steps:
        - name: load-draft
          share: 0.2
        - name: attach-assets
          share: 0.25
        - name: render-graph
          share: 0.3
        - name: publish
          share: 0.25
    budgets:
      latency_ms:
        p95: 250
        p99: 420
      error_rate: 0.0075
      resources:
        cpu_utilization_pct: 55
        memory_utilization_pct: 70
      slo:
        objective: 99.2
        window: 30d
        burn_threshold_fast: 2.0
        burn_threshold_slow: 1.0
    data_tenancy:
      tenant: test-perf
      headers:
        x-perf: "true"
        x-tenant: test-perf

perf_budgets:
  web:
    p95_ms: 180
    p99_ms: 320
    cpu_pct: 65
    memory_pct: 70
  enrichment-worker:
    p95_ms: 220
    p99_ms: 400
    cpu_pct: 60
    memory_pct: 75
  reporting:
    p95_ms: 250
    p99_ms: 420
    cpu_pct: 55
    memory_pct: 70

patterns:
  open_model: arrival-rate
  closed_model: virtual-users
  defaults:
    soak_duration: 3h
    spike_factor: 3
    smoke_rps: 5
