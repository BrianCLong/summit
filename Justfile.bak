
# ===== Runtime care =====
proxy-restart:
    bash tools/restart_proxy.sh

ollama-kill:
    bash tools/ollama_kill.sh

health:
    ./tools/ping_llms.sh

# ===== RAG =====
rag-build:
    python3 tools/rag_index.py

rag *q:
    python3 tools/rag_query.py {{q}}

# ===== RAG =====
rag-build:
    python3 tools/rag_index.py

# Style A: pass the whole question as a single arg:
rag q='':
    python3 tools/rag_query.py {{q}}

# Style B: space-separated args (more comfy):
ragrun +q:
    python3 tools/rag_query.py {{q | join(" ")}}

# Perplexity helper (opens Chrome with the query)
px +q:
    open -a "Google Chrome" "https://www.perplexity.ai/search?q={{(q | join(" ") | urlencode)}}"

ollama-kill:
    bash tools/ollama_kill.sh

# ===== RAG =====
rag-build:
    python3 tools/rag_index.py

# Pass a whole question as one arg:
rag q='':
    python3 tools/rag_query.py {{q}}

# Or pass space-separated args (no special templating needed):
ragrun +q:
    python3 tools/rag_query.py {{q}}

# Perplexity helper (uses your agentic browser in Chrome)
px +q:
    open -a "Google Chrome" "https://www.perplexity.ai/search?q={{quote(q)}}"

# Kill any stuck Ollama runners
ollama-kill:
    bash tools/ollama_kill.sh

# ===== RAG =====
rag-build:
    python3 tools/rag_index.py

# Pass the whole question as one arg, e.g.:
#   just rag q='how do we run neo4j guard?'
rag q='':
    python3 tools/rag_query.py {{q}}

# Or space-separated args, e.g.:
#   just ragrun how do we run neo4j guard?
ragrun +q:
    python3 tools/rag_query.py {{q}}

# Perplexity helper (single-arg form)
#   just px q='neo4j migration guard best practices'
px q='':
    open -a "Google Chrome" "https://www.perplexity.ai/search?q={{q}}"

# Kill any stuck Ollama runners
ollama-kill:
    bash tools/ollama_kill.sh
