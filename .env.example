# =============================================================================
# Summit Platform Environment Configuration
# =============================================================================
# This file contains ALL environment variables required for the platform.
# Copy this file to .env and fill in production values before deployment.
#
# PRODUCTION CHECKLIST:
#   1. Set NODE_ENV=production
#   2. Set CONFIG_VALIDATE_ON_START=true
#   3. Set HEALTH_ENDPOINTS_ENABLED=true
#   4. Replace ALL placeholder values (change_me, replace_me, etc.)
#   5. Use strong, unique secrets (minimum 32 characters)
#   6. Never commit actual secrets to version control
# =============================================================================

# -----------------------------------------------------------------------------
# ENVIRONMENT & RUNTIME
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=4000

# CRITICAL: Enable strict config validation in production
# Set to 'true' to fail fast on invalid configuration
CONFIG_VALIDATE_ON_START=false

# CRITICAL: Enable health endpoints for K8s probes
# Set to 'true' in production for /healthz and /readyz to work
HEALTH_ENDPOINTS_ENABLED=true

# -----------------------------------------------------------------------------
# CORE DATABASES
# -----------------------------------------------------------------------------
# Neo4j Graph Database
NEO4J_URI=bolt://localhost:7687
NEO4J_USERNAME=neo4j
NEO4J_USER=neo4j
NEO4J_PASSWORD=change_me_in_dev

# PostgreSQL
POSTGRES_PASSWORD=change_me_in_dev
DATABASE_URL=postgresql://intelgraph:change_me_in_dev@localhost:5432/intelgraph?sslmode=prefer

# Redis
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=change_me_in_dev

# -----------------------------------------------------------------------------
# AUTHENTICATION & SECURITY
# -----------------------------------------------------------------------------
# OIDC Provider (Okta, Auth0, etc.)
OIDC_ISSUER=https://example.okta.com
OIDC_CLIENT_ID=local-dev-client
OIDC_CLIENT_SECRET=replace_me_in_dev
OIDC_REDIRECT_URI=http://localhost:4000/auth/callback

# Session & JWT Secrets (MUST be unique, random, 32+ chars in production)
SESSION_SECRET=replace_me_with_random_string
JWT_SECRET=replace_me_with_random_string
JWT_REFRESH_SECRET=replace_me_with_random_string

# CORS (comma-separated list of allowed origins)
CORS_ORIGIN=http://localhost:3000,http://localhost:5173
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000

# Gateway feature toggles
FEATURE_LAC_ENFORCE=true
COPILOT_NLQ=true
UI_TRIPANE=true

# ⚠️ SECURITY: Semantic validation (EXPERIMENTAL - DO NOT ENABLE)
# Validates AI agent prompts/outputs for injection attacks, poisoning, jailbreaking
# Current implementation uses STUB methods (returns 0.0) - NOT SAFE for production
# Set to 'false' (default) until full validation is implemented
# See: server/src/conductor/validation/semantic-validator.ts
SEMANTIC_VALIDATION_ENABLED=false
POLICY_COMPILER_URL=http://localhost:8102
PROV_LEDGER_URL=http://localhost:8101
NLQ_SERVICE_URL=http://localhost:8103
ER_SERVICE_URL=http://localhost:8104
INGEST_SERVICE_URL=http://localhost:8105
ZK_TX_SERVICE_URL=http://localhost:8106
PREDICTD_PORT=4001

# AI provider keys (optional for local smoke tests)
OPENAI_API_KEY=sk-local-placeholder
ANTHROPIC_API_KEY=local-placeholder

# Linear integration
LINEAR_API_KEY=lin_api_replace_me
LINEAR_TEAM_ID=replace_with_team_id
LINEAR_WEBHOOK_SECRET=replace_with_webhook_secret

# Notion integration
NOTION_API_KEY=ntn_replace_me
NOTION_WORKSPACE_ID=replace_with_workspace_id
NOTION_DATABASE_ID=replace_with_database_id

# Atlassian integration (Jira & Confluence)
ATLASSIAN_EMAIL=your_email@example.com
ATLASSIAN_API_TOKEN=replace_with_api_token
ATLASSIAN_BASE_URL=https://yourcompany.atlassian.net
