# =============================================================================
# IntelGraph Platform - Environment Configuration
# =============================================================================
# Copy this file to .env and update with your values
# For production: generate secure secrets with: openssl rand -base64 32
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=4000

# -----------------------------------------------------------------------------
# Core Databases
# -----------------------------------------------------------------------------
# PostgreSQL connection string (required)
DATABASE_URL=postgresql://postgres:localdevpassword@localhost:5432/intelgraph

# Neo4j graph database
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=change_me_in_dev

# Redis cache/queue
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------
# JWT secrets (minimum 32 characters, use secure random values in production)
JWT_SECRET=dev-jwt-secret-at-least-32-characters-long
JWT_REFRESH_SECRET=dev-jwt-refresh-secret-at-least-32-chars

# OIDC Provider (Okta, Auth0, etc.)
OIDC_ISSUER=https://example.okta.com
OIDC_CLIENT_ID=local-dev-client
OIDC_CLIENT_SECRET=replace_me_in_dev
SESSION_SECRET=replace_me_with_random_string

# CORS allowed origins (comma-separated for multiple)
CORS_ORIGIN=http://localhost:3000

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_MAX_AUTHENTICATED=1000
AI_RATE_LIMIT_WINDOW_MS=900000
AI_RATE_LIMIT_MAX_REQUESTS=50
BACKGROUND_RATE_LIMIT_WINDOW_MS=60000
BACKGROUND_RATE_LIMIT_MAX_REQUESTS=120

# -----------------------------------------------------------------------------
# Caching
# -----------------------------------------------------------------------------
CACHE_ENABLED=true
CACHE_TTL_DEFAULT=300
L1_CACHE_MAX_BYTES=1073741824
L1_CACHE_FALLBACK_TTL_SECONDS=300

# -----------------------------------------------------------------------------
# GraphQL Configuration
# -----------------------------------------------------------------------------
ENFORCE_GRAPHQL_COST_LIMITS=true
GRAPHQL_COST_CONFIG_PATH=
COST_EXEMPT_TENANTS=

# Gateway feature toggles
FEATURE_LAC_ENFORCE=true
COPILOT_NLQ=true
UI_TRIPANE=true

# ⚠️ SECURITY: Semantic validation (EXPERIMENTAL - DO NOT ENABLE)
# Validates AI agent prompts/outputs for injection attacks, poisoning, jailbreaking
# Current implementation uses STUB methods (returns 0.0) - NOT SAFE for production
# Set to 'false' (default) until full validation is implemented
# See: server/src/conductor/validation/semantic-validator.ts
SEMANTIC_VALIDATION_ENABLED=false
POLICY_COMPILER_URL=http://localhost:8102
PROV_LEDGER_URL=http://localhost:8101
NLQ_SERVICE_URL=http://localhost:8103
ER_SERVICE_URL=http://localhost:8104
INGEST_SERVICE_URL=http://localhost:8105
ZK_TX_SERVICE_URL=http://localhost:8106
PREDICTD_PORT=4001

# AI provider keys (optional for local smoke tests)
OPENAI_API_KEY=sk-local-placeholder
ANTHROPIC_API_KEY=local-placeholder

# Linear integration
LINEAR_API_KEY=lin_api_replace_me
LINEAR_TEAM_ID=replace_with_team_id
LINEAR_WEBHOOK_SECRET=replace_with_webhook_secret

# Notion integration
NOTION_API_KEY=ntn_replace_me
NOTION_WORKSPACE_ID=replace_with_workspace_id
NOTION_DATABASE_ID=replace_with_database_id

# Atlassian integration (Jira & Confluence)
ATLASSIAN_EMAIL=your_email@example.com
ATLASSIAN_API_TOKEN=replace_with_api_token
ATLASSIAN_BASE_URL=https://yourcompany.atlassian.net
