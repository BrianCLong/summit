# Canonical Backlog
# Source of Truth for all work.

# Schema for each item:
# - title: "Concise actionable thing"
#   component: "Component Name"
#   epic: "Epic Name"
#   type: "Feature" | "Tech Debt" | "Spike" | "Doc" | "Ops"
#   status: "Idea" | "Ready" | "In Progress" | "In Review" | "In Prod" | "Validated"
#   priority: "P0" | "P1" | "P2" | "P3"
#   spec_link: "URL"
#   description: "..."
#   acceptance_criteria:
#     - "Criterion 1"
#   evidence:
#     merged_pr: "URL"

backlog:
  # --- Core / Immediate (from issues.csv) ---
  - title: "Implement durable run/task/event store (Postgres)"
    component: "Orchestrator Core"
    epic: "Core Reliability"
    type: "Feature"
    status: "Ready"
    priority: "P0"
    spec_link: "issue_bodies/orchestrator_core_durable_store.md"
    description: "Replace in-memory storage with durable Postgres tables."

  - title: "Wire OPA gate + reason-for-access for WRITE/DEPLOY actions"
    component: "Policy"
    epic: "Security & Governance"
    type: "Security"
    status: "Ready"
    priority: "P0"
    spec_link: "issue_bodies/policy_opa_gate.md"
    description: "Enforce OPA policies on critical mutations."

  - title: "Implement Kill Switch and Autonomy Profiles"
    component: "Orchestrator Core"
    epic: "Core Reliability"
    type: "Feature"
    status: "Ready"
    priority: "P0"
    spec_link: "issue_bodies/orchestrator_kill_switch_profiles.md"
    description: "Emergency stop and autonomy level configuration."

  - title: "Implement Comprehensive UI Accessibility (WCAG AAA Compliance)"
    component: "Frontend"
    epic: "Frontend Experience"
    type: "Feature"
    status: "Ready"
    priority: "P0"
    spec_link: "issue_bodies/ui_accessibility_wcag_aaa.md"
    description: "Ensure full accessibility compliance."

  - title: "Implement Comprehensive Data License and TOS Enforcement Engine"
    component: "Policy"
    epic: "Security & Governance"
    type: "Security"
    status: "Ready"
    priority: "P0"
    spec_link: "issue_bodies/license_tos_enforcement.md"

  - title: "Snapshot → verify (SHA256, signed) → restore with streamed status"
    component: "DR Orchestrator"
    epic: "Core Reliability"
    type: "Feature"
    status: "Ready"
    priority: "P0"
    spec_link: "issue_bodies/dr_backup_restore.md"

  - title: "Implement Prompt Injection and Data Poisoning Guardrails"
    component: "Security"
    epic: "Security & Governance"
    type: "Security"
    status: "Ready"
    priority: "P0"
    spec_link: "issue_bodies/prompt_injection_guardrails.md"

  # --- Product / MVP Features (from backlog.yaml) ---
  - title: "Case spaces with immutable audit + SLA timers"
    component: "Collaboration"
    epic: "Collaboration"
    type: "Feature"
    status: "Ready"
    priority: "P0"
    acceptance_criteria:
      - "Immutable audit trail"
      - "SLA timers visible"

  - title: "Comment threads bound to graph nodes"
    component: "Collaboration"
    epic: "Collaboration"
    type: "Feature"
    status: "Ready"
    priority: "P0"

  - title: "STIX/TAXII + MISP bi-directional connectors"
    component: "Integrations"
    epic: "Integrations"
    type: "Feature"
    status: "Ready"
    priority: "P0"

  - title: "Slack/Teams + Jira/ServiceNow integration"
    component: "Integrations"
    epic: "Integrations"
    type: "Feature"
    status: "Ready"
    priority: "P0"

  - title: "Metrics/Prometheus + DR/BCP baseline"
    component: "Ops"
    epic: "Ops & Reliability"
    type: "Ops"
    status: "Ready"
    priority: "P0"

  - title: "Tri-pane Timeline + Map + Graph view"
    component: "Frontend"
    epic: "Frontend Experience"
    type: "Feature"
    status: "Ready"
    priority: "P0"

  - title: "Undo/Redo + Explain-this-view panel"
    component: "Frontend"
    epic: "Frontend Experience"
    type: "Feature"
    status: "Ready"
    priority: "P0"

  # --- Platform / Infrastructure (from backlog.json) ---
  - title: "Implement Policy Fuzzer with Advanced Features"
    component: "AI/Governance"
    epic: "Policy Fuzzer Development"
    type: "Feature"
    status: "Ready"
    priority: "P0"
    acceptance_criteria:
      - "Given a policy and query, the fuzzer generates adversarial pairs"
      - "Attack grammars are applied"
      - "Oracle correctly determines expected compliance"
      - "Metamorphic relations are tested"
      - "Coverage metrics collected"
      - "HTML report generated"
    evidence_hooks:
      - metric: "fuzzer_coverage_percentage"
        slo: 80

  - title: "Implement Firecracker pooler with warm worker targets"
    component: "Runtime"
    epic: "Firecracker Runtime"
    type: "Feature"
    status: "Ready"
    priority: "P0"
    acceptance_criteria:
      - "Pooler maintains warm micro-VMs"
      - "Autoscale provisions new micro-VMs within 300ms"
      - "Cold start p95 <= 300ms"
    evidence_hooks:
      - metric: "mcp_cold_start_p95_ms"
        slo: 300

  - title: "Deterministic sandboxing and attestation"
    component: "Runtime"
    epic: "Firecracker Runtime"
    type: "Feature"
    status: "Ready"
    priority: "P0"
    acceptance_criteria:
      - "SBOM signature verified"
      - "Snapshot hashes and random seeds captured"
      - "Runs are reproducible"
      - "Attestation records written to ledger"

  - title: "OpenTelemetry spans across MCP protocol"
    component: "Observability"
    epic: "Deterministic Replay"
    type: "Feature"
    status: "Ready"
    priority: "P0"
    acceptance_criteria:
      - "Spans exist for session start, router hops, tool invocations"
      - "Sensitive fields redacted"
      - "Dashboards surface session metrics"

  - title: "Deterministic replay engine v1"
    component: "Observability"
    epic: "Deterministic Replay"
    type: "Feature"
    status: "Ready"
    priority: "P0"
    acceptance_criteria:
      - "Replay reproduces >=95% sessions without divergence"
      - "Stubs capture and rehydrate responses"

  - title: "Provenance ledger and retention workflows"
    component: "Compliance"
    epic: "Compliance Pack"
    type: "Feature"
    status: "Ready"
    priority: "P0"
    acceptance_criteria:
      - "Immutable ledger stores hashes, signatures, retention tier"
      - "RTBF workflows purge/sequester data"
      - "Warrant-bound exports generate manifests"

  - title: "Public benchmark shootout"
    component: "Performance"
    epic: "Compliance Pack"
    type: "Feature"
    status: "Ready"
    priority: "P0"
    acceptance_criteria:
      - "Harness runs on Metorial and IntelGraph"
      - "Publish p50/p95/p99 latency, error burn, cost"
      - "Public dashboard and blog"

  # --- Code Debt / TODOs (Sampled) ---
  - title: "Integrate with actual Neo4j sandbox connection in nl-to-cypher"
    component: "AI"
    epic: "Tech Debt"
    type: "Tech Debt"
    status: "Idea"
    priority: "P1"
    description: "Currently simulating connection. Source: server/src/ai/nl-to-cypher/nl-to-cypher.service.ts"

  - title: "Implement proper OIDC validation with issuer verification in OPA ABAC"
    component: "Security"
    epic: "Tech Debt"
    type: "Security"
    status: "Idea"
    priority: "P0"
    description: "Source: server/src/middleware/opa-abac.ts"

  - title: "Log audit entry to hash chain in RedactionMiddleware"
    component: "Security"
    epic: "Tech Debt"
    type: "Security"
    status: "Idea"
    priority: "P0"
    description: "Source: server/src/pii/redactionMiddleware.ts"

  - title: "Monitor system metrics (CPU, memory, query latency) in TieredRateLimit"
    component: "Ops"
    epic: "Tech Debt"
    type: "Ops"
    status: "Idea"
    priority: "P1"
    description: "Source: server/src/middleware/TieredRateLimitMiddleware.ts"
