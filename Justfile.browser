set shell := ["/bin/bash", "-cu"]

# === BROWSER AI WORKFLOW ORCHESTRATION ===

# Show available browser AI tools
browser-list:
    python3 tools/browser_ai.py --list

# Open Perplexity with context-aware query
px q='':
    python3 tools/px.py "{{q}}"

# Open Perplexity Comet browser with query
comet q='':
    python3 tools/browser_ai.py --tool comet "{{q}}"

# Open Claude.ai with query (manual input required)
claude q='':
    python3 tools/browser_ai.py --tool claude "{{q}}"

# Open ChatGPT with query (manual input required)
gpt q='':
    python3 tools/browser_ai.py --tool chatgpt "{{q}}"

# Open Google Gemini with query
gemini q='':
    python3 tools/browser_ai.py --tool gemini "{{q}}"

# === MULTI-TOOL WORKFLOWS ===

# Research workflow: opens multiple AI tools for comprehensive research
research q='':
    python3 tools/browser_ai.py --research "{{q}}"

# Deep research workflow: uses more tools and higher context
research-deep q='':
    python3 tools/browser_ai.py --research --deep "{{q}}"

# Code review workflow: opens tools optimized for code analysis
code-review file='':
    python3 tools/browser_ai.py --code-review "{{file}}"

# Architecture design workflow: opens tools for system design
architecture component='':
    python3 tools/browser_ai.py --architecture "{{component}}"

# === SPECIFIC USE CASES ===

# Research IntelGraph-specific technical topics
tech-research q='':
    python3 tools/browser_ai.py --research --context high "IntelGraph technical: {{q}}"

# Get help with Neo4j/Cypher queries
neo4j-help q='':
    python3 tools/browser_ai.py --tools perplexity claude --context high "Neo4j Cypher help: {{q}}"

# Get help with React/GraphQL frontend issues
react-help q='':
    python3 tools/browser_ai.py --tools claude perplexity --context high "React GraphQL help: {{q}}"

# Get help with AI/ML integration issues
ai-help q='':
    python3 tools/browser_ai.py --tools perplexity gemini --context high "AI ML integration help: {{q}}"

# Get help with DevOps/deployment issues
devops-help q='':
    python3 tools/browser_ai.py --tools claude perplexity --context high "DevOps deployment help: {{q}}"

# === PMI INTEGRATION ===

# Research project management best practices
pmi-research q='':
    python3 tools/browser_ai.py --research --context medium "PMI project management: {{q}}"

# Get help with RAID management
raid-help q='':
    python3 tools/browser_ai.py --tool perplexity --context medium "RAID register management: {{q}}"

# Research stakeholder engagement strategies
stakeholder-help q='':
    python3 tools/browser_ai.py --tools perplexity claude --context medium "Stakeholder engagement: {{q}}"

# === COMPETITIVE INTELLIGENCE ===

# Research competitors and market trends
competitor-research company='':
    python3 tools/browser_ai.py --research --context low "Intelligence analysis platform competitive research: {{company}}"

# Research latest tech trends relevant to IntelGraph
trend-research topic='':
    python3 tools/browser_ai.py --research --deep --context medium "Technology trends for intelligence analysis: {{topic}}"

# === DEVELOPMENT WORKFLOWS ===

# Open multiple tools for debugging session
debug-session error='':
    python3 tools/browser_ai.py --tools claude perplexity stackblitz --delay 1.5 --context high "Debug IntelGraph error: {{error}}"

# Get architectural guidance for new features
feature-design feature='':
    python3 tools/browser_ai.py --architecture "{{feature}}" --context high

# Research security best practices
security-research topic='':
    python3 tools/browser_ai.py --tools perplexity claude --context high "Security best practices for intelligence platform: {{topic}}"

# === QUICK TOOLS ===

# Open all major AI tools (for complex problems)
all-ai q='':
    python3 tools/browser_ai.py --tools perplexity claude gemini chatgpt --delay 2.0 "{{q}}"

# Open research tools only
research-tools q='':
    python3 tools/browser_ai.py --tools perplexity comet --delay 1.0 "{{q}}"

# Open coding tools only  
coding-tools q='':
    python3 tools/browser_ai.py --tools claude github-copilot cursor --delay 1.5 "{{q}}"

# === CONTEXT VARIATIONS ===

# Query with minimal context (for general questions)
ask-simple q='':
    python3 tools/browser_ai.py --tool perplexity --context none "{{q}}"

# Query with full project context
ask-full q='':
    python3 tools/browser_ai.py --tool perplexity --context high "{{q}}"

# === WORKFLOW HELPERS ===

# Create browser workflow for specific agent roles
guy-research q='':
    python3 tools/browser_ai.py --research --context high "IntelGraph architecture (Guy perspective): {{q}}"

elara-research q='':
    python3 tools/browser_ai.py --research --deep --context high "Research and context analysis (Elara perspective): {{q}}"

aegis-research q='':
    python3 tools/browser_ai.py --tools perplexity claude --context high "Security and governance (Aegis perspective): {{q}}"

orion-research q='':
    python3 tools/browser_ai.py --tools perplexity claude --context high "Graph database and data (Orion perspective): {{q}}"

hermes-research q='':
    python3 tools/browser_ai.py --tools claude perplexity --context high "CI/CD and deployment (Hermes perspective): {{q}}"

# === INTEGRATION WITH LOCAL TOOLS ===

# Combine RAG query with browser research
hybrid-research q='':
    @echo "🔍 Searching local knowledge base..."
    python3 tools/rag_query_enhanced.py "{{q}}" || echo "No local results found"
    @echo ""
    @echo "🌐 Opening browser research..."
    python3 tools/browser_ai.py --research "{{q}}"

# Compare local vs external knowledge
compare-knowledge q='':
    @echo "📚 Local Knowledge:"
    python3 tools/rag_query_enhanced.py --no-answer "{{q}}" | head -20
    @echo ""
    @echo "🌐 External Research:"
    python3 tools/browser_ai.py --tool perplexity "{{q}}"

# === SHORTCUTS ===

# Quick Perplexity (most common use case)
p q='':
    python3 tools/browser_ai.py --tool perplexity "{{q}}"

# Quick Claude (second most common)
c q='':
    python3 tools/browser_ai.py --tool claude "{{q}}"

# Quick multi-tool research
r q='':
    python3 tools/browser_ai.py --research "{{q}}"

# === MAINTENANCE ===

# Test browser tool connectivity
browser-test:
    @echo "Testing browser AI tools..."
    python3 tools/browser_ai.py --tool perplexity --context none "test query" --delay 0.5
    @echo "✅ Browser workflow test complete"

# Show current project context
browser-context:
    @echo "Current IntelGraph context:"
    @git branch --show-current 2>/dev/null || echo "No git branch"
    @echo "Recent commits:"
    @git log --oneline -3 2>/dev/null || echo "No git history"
    @echo "Modified files:"
    @git diff --name-only HEAD~1 2>/dev/null || echo "No recent changes"