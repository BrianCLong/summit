apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: maestro
  namespace: intelgraph-prod
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /$2
    nginx.ingress.kubernetes.io/ssl-redirect: 'true'
    # Optional: admin IP allow-list (comma-separated CIDRs)
    # Set via kustomize/helm or edit here: e.g., 203.0.113.0/24,198.51.100.10/32
    # nginx.ingress.kubernetes.io/whitelist-source-range: "0.0.0.0/0"
spec:
  rules:
    - host: dev.intelgraph.local
      http:
        paths:
          - path: /maestro(/|$)(.*)
            pathType: Prefix
            backend:
              service:
                name: maestro-server
                port:
                  number: 8080
