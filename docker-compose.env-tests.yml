version: "3.9"
services:
  node-tests:
    image: node:20-alpine
    working_dir: /workspace
    volumes:
      - .:/workspace:ro
    environment:
      TEST_ENVIRONMENT: ${TEST_ENVIRONMENT:-dev}
      SYNTHETIC_DATA_PATH: /workspace/scripts/tests/data/synthetic-test-data.json
    command: ["node", "scripts/tests/run_node_tests.mjs"]

  python-tests:
    image: python:3.11-slim
    working_dir: /workspace
    volumes:
      - .:/workspace:ro
    environment:
      TEST_ENVIRONMENT: ${TEST_ENVIRONMENT:-dev}
      SYNTHETIC_DATA_PATH: /workspace/scripts/tests/data/synthetic-test-data.json
    command: ["python", "scripts/tests/run_python_tests.py"]
