c6ce1c81e0eef4243ef754bb4f3d14c7
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const src_1 = require("../src");
const crypto_1 = require("crypto");
test('put and get fingerprint', async () => {
    const store = new src_1.AFLStore('redis://localhost:6381'); // test redis
    const fp = { contentHash: (0, crypto_1.randomUUID)(), formatSig: 'mime:1000:0:NOEXIF', timingSig: '12h:0', xformSig: 'nokpw', route: 'tip' };
    await store.put(fp);
    const got = await store.getBySignature({ formatSig: fp.formatSig, timingSig: fp.timingSig, xformSig: fp.xformSig });
    expect(got?.route).toBe('tip');
    await store.close();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2JyaWFubG9uZy9EZXZlbG9wZXIvc3VtbWl0L3BhY2thZ2VzL2FmbC1zdG9yZS90ZXN0cy9hZmwuc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLGdDQUFrQztBQUNsQyxtQ0FBb0M7QUFFcEMsSUFBSSxDQUFDLHlCQUF5QixFQUFFLEtBQUssSUFBSSxFQUFFO0lBQ3pDLE1BQU0sS0FBSyxHQUFHLElBQUksY0FBUSxDQUFDLHdCQUF3QixDQUFDLENBQUMsQ0FBQyxhQUFhO0lBQ25FLE1BQU0sRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFFLElBQUEsbUJBQVUsR0FBRSxFQUFFLFNBQVMsRUFBQyxvQkFBb0IsRUFBRSxTQUFTLEVBQUMsT0FBTyxFQUFFLFFBQVEsRUFBQyxPQUFPLEVBQUUsS0FBSyxFQUFDLEtBQUssRUFBRSxDQUFDO0lBQzNILE1BQU0sS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFTLENBQUMsQ0FBQztJQUMzQixNQUFNLEdBQUcsR0FBRyxNQUFNLEtBQUssQ0FBQyxjQUFjLENBQUMsRUFBRSxTQUFTLEVBQUUsRUFBRSxDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsRUFBRSxDQUFDLFNBQVMsRUFBRSxRQUFRLEVBQUUsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7SUFDcEgsTUFBTSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDL0IsTUFBTSxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDdEIsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2JyaWFubG9uZy9EZXZlbG9wZXIvc3VtbWl0L3BhY2thZ2VzL2FmbC1zdG9yZS90ZXN0cy9hZmwuc3BlYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBRkxTdG9yZSB9IGZyb20gJy4uL3NyYyc7XG5pbXBvcnQgeyByYW5kb21VVUlEIH0gZnJvbSAnY3J5cHRvJztcblxudGVzdCgncHV0IGFuZCBnZXQgZmluZ2VycHJpbnQnLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHN0b3JlID0gbmV3IEFGTFN0b3JlKCdyZWRpczovL2xvY2FsaG9zdDo2MzgxJyk7IC8vIHRlc3QgcmVkaXNcbiAgY29uc3QgZnAgPSB7IGNvbnRlbnRIYXNoOiByYW5kb21VVUlEKCksIGZvcm1hdFNpZzonbWltZToxMDAwOjA6Tk9FWElGJywgdGltaW5nU2lnOicxMmg6MCcsIHhmb3JtU2lnOidub2twdycsIHJvdXRlOid0aXAnIH07XG4gIGF3YWl0IHN0b3JlLnB1dChmcCBhcyBhbnkpO1xuICBjb25zdCBnb3QgPSBhd2FpdCBzdG9yZS5nZXRCeVNpZ25hdHVyZSh7IGZvcm1hdFNpZzogZnAuZm9ybWF0U2lnLCB0aW1pbmdTaWc6IGZwLnRpbWluZ1NpZywgeGZvcm1TaWc6IGZwLnhmb3JtU2lnIH0pO1xuICBleHBlY3QoZ290Py5yb3V0ZSkudG9CZSgndGlwJyk7XG4gIGF3YWl0IHN0b3JlLmNsb3NlKCk7XG59KTsiXSwidmVyc2lvbiI6M30=