85b9e5594a1af8b0111e7a639aa5f89b
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.bayesianUpdate = bayesianUpdate;
exports.applyEvidence = applyEvidence;
exports.addDissent = addDissent;
exports.missingEvidencePrompts = missingEvidencePrompts;
function bayesianUpdate(prior, evidence) {
    let odds = prior / (1 - prior);
    for (const e of evidence) {
        const weight = e.likelihoodGivenHypothesis / e.likelihoodGivenAlternative;
        odds *= weight;
    }
    return odds / (1 + odds);
}
function applyEvidence(h, e) {
    const evidence = [...h.evidence, e];
    const posterior = bayesianUpdate(h.prior, evidence);
    return { ...h, evidence, posterior };
}
function addDissent(h, note) {
    return { ...h, dissent: [...h.dissent, note] };
}
function missingEvidencePrompts(h) {
    const uncited = h.evidence.filter((e) => !e.cited);
    return uncited.map((e) => `Evidence ${e.id} lacks citation`);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2JyaWFubG9uZy9EZXZlbG9wZXIvc3VtbWl0L3NlcnZlci9zcmMvaHlwb3RoZXNlcy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOztBQWtCQSx3Q0FPQztBQUVELHNDQUlDO0FBRUQsZ0NBRUM7QUFFRCx3REFHQztBQXRCRCxTQUFnQixjQUFjLENBQUMsS0FBYSxFQUFFLFFBQW9CO0lBQ2hFLElBQUksSUFBSSxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQztJQUMvQixLQUFLLE1BQU0sQ0FBQyxJQUFJLFFBQVEsRUFBRSxDQUFDO1FBQ3pCLE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBQyx5QkFBeUIsR0FBRyxDQUFDLENBQUMsMEJBQTBCLENBQUM7UUFDMUUsSUFBSSxJQUFJLE1BQU0sQ0FBQztJQUNqQixDQUFDO0lBQ0QsT0FBTyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7QUFDM0IsQ0FBQztBQUVELFNBQWdCLGFBQWEsQ0FBQyxDQUFhLEVBQUUsQ0FBVztJQUN0RCxNQUFNLFFBQVEsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNwQyxNQUFNLFNBQVMsR0FBRyxjQUFjLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNwRCxPQUFPLEVBQUUsR0FBRyxDQUFDLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxDQUFDO0FBQ3ZDLENBQUM7QUFFRCxTQUFnQixVQUFVLENBQUMsQ0FBYSxFQUFFLElBQVk7SUFDcEQsT0FBTyxFQUFFLEdBQUcsQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDO0FBQ2pELENBQUM7QUFFRCxTQUFnQixzQkFBc0IsQ0FBQyxDQUFhO0lBQ2xELE1BQU0sT0FBTyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNuRCxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztBQUMvRCxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9icmlhbmxvbmcvRGV2ZWxvcGVyL3N1bW1pdC9zZXJ2ZXIvc3JjL2h5cG90aGVzZXMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGludGVyZmFjZSBFdmlkZW5jZSB7XG4gIGlkOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGxpa2VsaWhvb2RHaXZlbkh5cG90aGVzaXM6IG51bWJlcjsgLy8gUChFfEgpXG4gIGxpa2VsaWhvb2RHaXZlbkFsdGVybmF0aXZlOiBudW1iZXI7IC8vIFAoRXx+SClcbiAgY2l0ZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSHlwb3RoZXNpcyB7XG4gIGlkOiBzdHJpbmc7XG4gIHN0YXRlbWVudDogc3RyaW5nO1xuICBwcmlvcjogbnVtYmVyOyAvLyBQKEgpXG4gIGV2aWRlbmNlOiBFdmlkZW5jZVtdO1xuICBwb3N0ZXJpb3I6IG51bWJlcjsgLy8gdXBkYXRlZCBwcm9iYWJpbGl0eVxuICByZXNpZHVhbFVua25vd25zOiBzdHJpbmdbXTtcbiAgZGlzc2VudDogc3RyaW5nW107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiYXllc2lhblVwZGF0ZShwcmlvcjogbnVtYmVyLCBldmlkZW5jZTogRXZpZGVuY2VbXSk6IG51bWJlciB7XG4gIGxldCBvZGRzID0gcHJpb3IgLyAoMSAtIHByaW9yKTtcbiAgZm9yIChjb25zdCBlIG9mIGV2aWRlbmNlKSB7XG4gICAgY29uc3Qgd2VpZ2h0ID0gZS5saWtlbGlob29kR2l2ZW5IeXBvdGhlc2lzIC8gZS5saWtlbGlob29kR2l2ZW5BbHRlcm5hdGl2ZTtcbiAgICBvZGRzICo9IHdlaWdodDtcbiAgfVxuICByZXR1cm4gb2RkcyAvICgxICsgb2Rkcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBseUV2aWRlbmNlKGg6IEh5cG90aGVzaXMsIGU6IEV2aWRlbmNlKTogSHlwb3RoZXNpcyB7XG4gIGNvbnN0IGV2aWRlbmNlID0gWy4uLmguZXZpZGVuY2UsIGVdO1xuICBjb25zdCBwb3N0ZXJpb3IgPSBiYXllc2lhblVwZGF0ZShoLnByaW9yLCBldmlkZW5jZSk7XG4gIHJldHVybiB7IC4uLmgsIGV2aWRlbmNlLCBwb3N0ZXJpb3IgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZERpc3NlbnQoaDogSHlwb3RoZXNpcywgbm90ZTogc3RyaW5nKTogSHlwb3RoZXNpcyB7XG4gIHJldHVybiB7IC4uLmgsIGRpc3NlbnQ6IFsuLi5oLmRpc3NlbnQsIG5vdGVdIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtaXNzaW5nRXZpZGVuY2VQcm9tcHRzKGg6IEh5cG90aGVzaXMpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IHVuY2l0ZWQgPSBoLmV2aWRlbmNlLmZpbHRlcigoZSkgPT4gIWUuY2l0ZWQpO1xuICByZXR1cm4gdW5jaXRlZC5tYXAoKGUpID0+IGBFdmlkZW5jZSAke2UuaWR9IGxhY2tzIGNpdGF0aW9uYCk7XG59XG4iXSwidmVyc2lvbiI6M30=