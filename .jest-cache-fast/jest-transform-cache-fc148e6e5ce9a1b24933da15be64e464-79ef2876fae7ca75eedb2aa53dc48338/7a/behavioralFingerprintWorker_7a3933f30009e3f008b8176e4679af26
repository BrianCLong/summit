6e52bcfda414740216c2e56680bb9ddc
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.runBehavioralFingerprintJob = runBehavioralFingerprintJob;
const EntityResolutionService_js_1 = require("../services/EntityResolutionService.js");
async function runBehavioralFingerprintJob(identities) {
    const er = new EntityResolutionService_js_1.EntityResolutionService();
    const fingerprints = identities.map((i) => {
        const { fingerprint, score } = er.fuseBehavioralFingerprint(i.telemetry);
        return { id: i.id, projectId: i.projectId, fingerprint, score };
    });
    const clusters = er.clusterIdentitiesAcrossProjects(identities);
    return { fingerprints, clusters };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2JyaWFubG9uZy9EZXZlbG9wZXIvc3VtbWl0L3NlcnZlci9zcmMvd29ya2Vycy9iZWhhdmlvcmFsRmluZ2VycHJpbnRXb3JrZXIudHMiLCJtYXBwaW5ncyI6Ijs7QUFTQSxrRUFRQztBQWpCRCx1RkFBaUY7QUFTMUUsS0FBSyxVQUFVLDJCQUEyQixDQUFDLFVBQTJCO0lBQzNFLE1BQU0sRUFBRSxHQUFHLElBQUksb0RBQXVCLEVBQUUsQ0FBQztJQUN6QyxNQUFNLFlBQVksR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7UUFDeEMsTUFBTSxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLENBQUMseUJBQXlCLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3pFLE9BQU8sRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFDLFNBQVMsRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLENBQUM7SUFDbEUsQ0FBQyxDQUFDLENBQUM7SUFDSCxNQUFNLFFBQVEsR0FBRyxFQUFFLENBQUMsK0JBQStCLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDaEUsT0FBTyxFQUFFLFlBQVksRUFBRSxRQUFRLEVBQUUsQ0FBQztBQUNwQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9icmlhbmxvbmcvRGV2ZWxvcGVyL3N1bW1pdC9zZXJ2ZXIvc3JjL3dvcmtlcnMvYmVoYXZpb3JhbEZpbmdlcnByaW50V29ya2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVudGl0eVJlc29sdXRpb25TZXJ2aWNlIH0gZnJvbSBcIi4uL3NlcnZpY2VzL0VudGl0eVJlc29sdXRpb25TZXJ2aWNlLmpzXCI7XG5pbXBvcnQgeyBCZWhhdmlvcmFsVGVsZW1ldHJ5IH0gZnJvbSBcIi4uL3NlcnZpY2VzL0JlaGF2aW9yYWxGaW5nZXJwcmludFNlcnZpY2UuanNcIjtcblxuaW50ZXJmYWNlIElkZW50aXR5SW5wdXQge1xuICBpZDogc3RyaW5nO1xuICBwcm9qZWN0SWQ6IHN0cmluZztcbiAgdGVsZW1ldHJ5OiBCZWhhdmlvcmFsVGVsZW1ldHJ5W107XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5CZWhhdmlvcmFsRmluZ2VycHJpbnRKb2IoaWRlbnRpdGllczogSWRlbnRpdHlJbnB1dFtdKSB7XG4gIGNvbnN0IGVyID0gbmV3IEVudGl0eVJlc29sdXRpb25TZXJ2aWNlKCk7XG4gIGNvbnN0IGZpbmdlcnByaW50cyA9IGlkZW50aXRpZXMubWFwKChpKSA9PiB7XG4gICAgY29uc3QgeyBmaW5nZXJwcmludCwgc2NvcmUgfSA9IGVyLmZ1c2VCZWhhdmlvcmFsRmluZ2VycHJpbnQoaS50ZWxlbWV0cnkpO1xuICAgIHJldHVybiB7IGlkOiBpLmlkLCBwcm9qZWN0SWQ6IGkucHJvamVjdElkLCBmaW5nZXJwcmludCwgc2NvcmUgfTtcbiAgfSk7XG4gIGNvbnN0IGNsdXN0ZXJzID0gZXIuY2x1c3RlcklkZW50aXRpZXNBY3Jvc3NQcm9qZWN0cyhpZGVudGl0aWVzKTtcbiAgcmV0dXJuIHsgZmluZ2VycHJpbnRzLCBjbHVzdGVycyB9O1xufVxuIl0sInZlcnNpb24iOjN9