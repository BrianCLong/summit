95b2ca1cf0ce0f083a2bd93acc0654d6
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const src_1 = require("../src");
test('emits sanctions under stress', () => {
    const res = (0, src_1.replayWithSanctions)({ runId: 'r1', steps: [{ id: 'a', tool: 'web.fetch', tokens: 4000, cost: 0.008, start: 0, end: 1 }], plan: {} }, { apiFailureRate: 0.5, tokenCap: 1000, policyStrict: true });
    expect(res.sanctions.length).toBeGreaterThan(0);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2JyaWFubG9uZy9EZXZlbG9wZXIvc3VtbWl0L3BhY2thZ2VzL2Nyc3AvdGVzdHMvY3JzcC5zcGVjLnRzIiwibWFwcGluZ3MiOiI7O0FBQUEsZ0NBQTZDO0FBQzdDLElBQUksQ0FBQyw4QkFBOEIsRUFBRSxHQUFFLEVBQUU7SUFDdkMsTUFBTSxHQUFHLEdBQUcsSUFBQSx5QkFBbUIsRUFBQyxFQUFFLEtBQUssRUFBQyxJQUFJLEVBQUUsS0FBSyxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLElBQUksRUFBQyxXQUFXLEVBQUMsTUFBTSxFQUFDLElBQUksRUFBQyxJQUFJLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsR0FBRyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsSUFBSSxFQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsY0FBYyxFQUFDLEdBQUcsRUFBRSxRQUFRLEVBQUMsSUFBSSxFQUFFLFlBQVksRUFBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBQzNMLE1BQU0sQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsRCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvYnJpYW5sb25nL0RldmVsb3Blci9zdW1taXQvcGFja2FnZXMvY3JzcC90ZXN0cy9jcnNwLnNwZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVwbGF5V2l0aFNhbmN0aW9ucyB9IGZyb20gJy4uL3NyYyc7XG50ZXN0KCdlbWl0cyBzYW5jdGlvbnMgdW5kZXIgc3RyZXNzJywgKCk9PntcbiAgY29uc3QgcmVzID0gcmVwbGF5V2l0aFNhbmN0aW9ucyh7IHJ1bklkOidyMScsIHN0ZXBzOlt7aWQ6J2EnLHRvb2w6J3dlYi5mZXRjaCcsdG9rZW5zOjQwMDAsY29zdDowLjAwOCxzdGFydDowLGVuZDoxfV0sIHBsYW46e30gfSwgeyBhcGlGYWlsdXJlUmF0ZTowLjUsIHRva2VuQ2FwOjEwMDAsIHBvbGljeVN0cmljdDp0cnVlIH0pO1xuICBleHBlY3QocmVzLnNhbmN0aW9ucy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==