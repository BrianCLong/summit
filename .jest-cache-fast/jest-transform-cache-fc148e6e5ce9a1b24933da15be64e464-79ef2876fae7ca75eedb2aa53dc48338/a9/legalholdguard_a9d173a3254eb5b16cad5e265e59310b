556e24b76dbaa2585a4a8943287312d9
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.denyWhenHold = void 0;
const denyWhenHold = async (req, reply) => {
    const { id } = req.params;
    const c = await req.db.case.findUnique({ where: { id } });
    if (c?.legalHold) {
        return reply.code(423).send({ error: 'Legal hold active: operation locked' });
    }
};
exports.denyWhenHold = denyWhenHold;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2JyaWFubG9uZy9EZXZlbG9wZXIvc3VtbWl0L3NlcnZlci9zcmMvY2FzZXMvbGVnYWwtaG9sZC1ndWFyZC50cyIsIm1hcHBpbmdzIjoiOzs7QUFBTyxNQUFNLFlBQVksR0FBRyxLQUFLLEVBQUUsR0FBUSxFQUFFLEtBQVUsRUFBRSxFQUFFO0lBQ3pELE1BQU0sRUFBRSxFQUFFLEVBQUUsR0FBRyxHQUFHLENBQUMsTUFBYSxDQUFDO0lBQ2pDLE1BQU0sQ0FBQyxHQUFHLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQzFELElBQUksQ0FBQyxFQUFFLFNBQVMsRUFBRSxDQUFDO1FBQ2pCLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFLLEVBQUUscUNBQXFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2hGLENBQUM7QUFDSCxDQUFDLENBQUM7QUFOVyxRQUFBLFlBQVksZ0JBTXZCIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9icmlhbmxvbmcvRGV2ZWxvcGVyL3N1bW1pdC9zZXJ2ZXIvc3JjL2Nhc2VzL2xlZ2FsLWhvbGQtZ3VhcmQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGRlbnlXaGVuSG9sZCA9IGFzeW5jIChyZXE6IGFueSwgcmVwbHk6IGFueSkgPT4ge1xuICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zIGFzIGFueTtcbiAgY29uc3QgYyA9IGF3YWl0IHJlcS5kYi5jYXNlLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZCB9IH0pO1xuICBpZiAoYz8ubGVnYWxIb2xkKSB7XG4gICAgcmV0dXJuIHJlcGx5LmNvZGUoNDIzKS5zZW5kKHsgZXJyb3I6ICdMZWdhbCBob2xkIGFjdGl2ZTogb3BlcmF0aW9uIGxvY2tlZCcgfSk7XG4gIH1cbn07XG4iXSwidmVyc2lvbiI6M30=