dfa7f37abc89af33105f26a2ba674d1e
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const index_1 = require("../src/index");
test('createRule posts to endpoint', async () => {
    const calls = [];
    // @ts-ignore
    global.fetch = async (url, opts) => {
        calls.push({ url, opts });
        return { ok: true, json: async () => ({ ok: true }) };
    };
    await (0, index_1.createRule)('http://test', { id: '1', field: 'f', type: 'required' });
    expect(calls[0].url).toBe('http://test/dq/rules');
    expect(JSON.parse(calls[0].opts.body).id).toBe('1');
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2JyaWFubG9uZy9EZXZlbG9wZXIvc3VtbWl0L3BhY2thZ2VzL3Nkay9kYXRhLXF1YWxpdHktanMvdGVzdC9pbmRleC50ZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBQUEsd0NBQTBDO0FBRTFDLElBQUksQ0FBQyw4QkFBOEIsRUFBRSxLQUFLLElBQUksRUFBRTtJQUM5QyxNQUFNLEtBQUssR0FBVSxFQUFFLENBQUM7SUFDeEIsYUFBYTtJQUNiLE1BQU0sQ0FBQyxLQUFLLEdBQUcsS0FBSyxFQUFFLEdBQVcsRUFBRSxJQUFTLEVBQUUsRUFBRTtRQUM5QyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7UUFDMUIsT0FBTyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFTLENBQUM7SUFDL0QsQ0FBQyxDQUFDO0lBQ0YsTUFBTSxJQUFBLGtCQUFVLEVBQUMsYUFBYSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDO0lBQzNFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUM7SUFDbEQsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDdEQsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2JyaWFubG9uZy9EZXZlbG9wZXIvc3VtbWl0L3BhY2thZ2VzL3Nkay9kYXRhLXF1YWxpdHktanMvdGVzdC9pbmRleC50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVJ1bGUgfSBmcm9tICcuLi9zcmMvaW5kZXgnO1xuXG50ZXN0KCdjcmVhdGVSdWxlIHBvc3RzIHRvIGVuZHBvaW50JywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBjYWxsczogYW55W10gPSBbXTtcbiAgLy8gQHRzLWlnbm9yZVxuICBnbG9iYWwuZmV0Y2ggPSBhc3luYyAodXJsOiBzdHJpbmcsIG9wdHM6IGFueSkgPT4ge1xuICAgIGNhbGxzLnB1c2goeyB1cmwsIG9wdHMgfSk7XG4gICAgcmV0dXJuIHsgb2s6IHRydWUsIGpzb246IGFzeW5jICgpID0+ICh7IG9rOiB0cnVlIH0pIH0gYXMgYW55O1xuICB9O1xuICBhd2FpdCBjcmVhdGVSdWxlKCdodHRwOi8vdGVzdCcsIHsgaWQ6ICcxJywgZmllbGQ6ICdmJywgdHlwZTogJ3JlcXVpcmVkJyB9KTtcbiAgZXhwZWN0KGNhbGxzWzBdLnVybCkudG9CZSgnaHR0cDovL3Rlc3QvZHEvcnVsZXMnKTtcbiAgZXhwZWN0KEpTT04ucGFyc2UoY2FsbHNbMF0ub3B0cy5ib2R5KS5pZCkudG9CZSgnMScpO1xufSk7XG4iXSwidmVyc2lvbiI6M30=