{"file":"/Users/brianlong/Developer/summit/server/tests/__helpers__/legacyGraphTestkit.ts","mappings":";;AAMA,sDAcC;AApBD,2CAA8C;AAC9C,qDAAoD;AACpD,2DAAwD;AAIjD,KAAK,UAAU,qBAAqB,CACzC,GAAyD,EACzD,UAA+B,EAAE;IAEjC,MAAM,MAAM,GAAG,IAAI,qBAAY,CAAC,EAAE,QAAQ,EAAR,iBAAQ,EAAE,SAAS,EAAT,qBAAS,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC;IAC9E,MAAM,MAAM,CAAC,KAAK,EAAE,CAAC;IACrB,IAAI,CAAC;QACH,MAAM,IAAI,GAAG,KAAK,EAAE,EAAE,KAAK,EAAE,SAAS,EAAa,EAAE,EAAE;YACrD,OAAO,MAAM,CAAC,gBAAgB,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,EAAE,EAAE,YAAY,EAAE,OAAO,EAAE,CAAC,CAAC;QAClF,CAAC,CAAC;QACF,OAAO,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC;IACzB,CAAC;YAAS,CAAC;QACT,MAAM,MAAM,CAAC,IAAI,EAAE,CAAC;IACtB,CAAC;AACH,CAAC","names":[],"sources":["/Users/brianlong/Developer/summit/server/tests/__helpers__/legacyGraphTestkit.ts"],"sourcesContent":["import { ApolloServer } from '@apollo/server';\nimport { typeDefs } from '../../src/graphql/schema';\nimport { resolvers } from '../../src/graphql/resolvers';\n\ntype ExecInput = { query: string; variables?: Record<string, any> };\n\nexport async function withLegacyGraphServer<T>(\n  run: (exec: (i: ExecInput) => Promise<any>) => Promise<T>,\n  context: Record<string, any> = {},\n): Promise<T> {\n  const server = new ApolloServer({ typeDefs, resolvers, introspection: true });\n  await server.start();\n  try {\n    const exec = async ({ query, variables }: ExecInput) => {\n      return server.executeOperation({ query, variables }, { contextValue: context });\n    };\n    return await run(exec);\n  } finally {\n    await server.stop();\n  }\n}\n"],"version":3}