{"file":"/Users/brianlong/Developer/summit/server/src/conductor/steps/cleanroomJoin.ts","mappings":";;AAEA,sCAOC;AATD,iCAAmC;AAE5B,KAAK,UAAU,aAAa,CAAC,GAAQ,EAAE,IAAS;IACrD,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,IAAI,EAAE,CAAC;IAC9B,MAAM,MAAM,GAAG,MAAM,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,IAAI,EAAE,EAAE,GAAG,CAAC,MAAM,IAAI,EAAE,CAAC,CAAC;IAC5E,IAAI,GAAG,CAAC,EAAE,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC;QAC5C,KAAK,MAAM,GAAG,IAAI,GAAG,CAAC,EAAE,CAAC,OAAO;YAAE,MAAM,CAAC,GAAG,CAAC,GAAG,IAAA,YAAO,EAAC,MAAM,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC;IAC/E,CAAC;IACD,GAAG,CAAC,YAAY,CAAC,gBAAgB,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AAC1E,CAAC","names":[],"sources":["/Users/brianlong/Developer/summit/server/src/conductor/steps/cleanroomJoin.ts"],"sourcesContent":["import { applyDp } from '../../dp';\n\nexport async function cleanroomJoin(ctx: any, step: any) {\n  const cfg = step.inputs || {};\n  const joined = await ctx.enclave.join(cfg.joinKeys || [], cfg.select || []);\n  if (cfg.dp && Array.isArray(cfg.dp.columns)) {\n    for (const col of cfg.dp.columns) joined[col] = applyDp(joined[col], cfg.dp);\n  }\n  ctx.emitArtifact('cleanroom.json', Buffer.from(JSON.stringify(joined)));\n}\n\n"],"version":3}