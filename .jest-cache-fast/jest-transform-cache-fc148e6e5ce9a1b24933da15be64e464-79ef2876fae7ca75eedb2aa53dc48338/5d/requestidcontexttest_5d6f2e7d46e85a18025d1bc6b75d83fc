77b87bc79f7eecdc292d085862d31210
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const auth_js_1 = require("../src/lib/auth.js");
describe("trace context", () => {
    it("attaches unique requestId to context", async () => {
        const ctx1 = await (0, auth_js_1.getContext)({ req: { headers: {} } });
        const ctx2 = await (0, auth_js_1.getContext)({ req: { headers: {} } });
        expect(ctx1.requestId).toBeDefined();
        expect(ctx2.requestId).toBeDefined();
        expect(ctx1.requestId).not.toBe(ctx2.requestId);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2JyaWFubG9uZy9EZXZlbG9wZXIvc3VtbWl0L3NlcnZlci90ZXN0cy9yZXF1ZXN0LWlkLWNvbnRleHQudGVzdC50cyIsIm1hcHBpbmdzIjoiOztBQUFBLGdEQUFnRDtBQUVoRCxRQUFRLENBQUMsZUFBZSxFQUFFLEdBQUcsRUFBRTtJQUM3QixFQUFFLENBQUMsc0NBQXNDLEVBQUUsS0FBSyxJQUFJLEVBQUU7UUFDcEQsTUFBTSxJQUFJLEdBQUcsTUFBTSxJQUFBLG9CQUFVLEVBQUMsRUFBRSxHQUFHLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ3hELE1BQU0sSUFBSSxHQUFHLE1BQU0sSUFBQSxvQkFBVSxFQUFDLEVBQUUsR0FBRyxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUN4RCxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ3JDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDckMsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNsRCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9icmlhbmxvbmcvRGV2ZWxvcGVyL3N1bW1pdC9zZXJ2ZXIvdGVzdHMvcmVxdWVzdC1pZC1jb250ZXh0LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0Q29udGV4dCB9IGZyb20gXCIuLi9zcmMvbGliL2F1dGguanNcIjtcblxuZGVzY3JpYmUoXCJ0cmFjZSBjb250ZXh0XCIsICgpID0+IHtcbiAgaXQoXCJhdHRhY2hlcyB1bmlxdWUgcmVxdWVzdElkIHRvIGNvbnRleHRcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGN0eDEgPSBhd2FpdCBnZXRDb250ZXh0KHsgcmVxOiB7IGhlYWRlcnM6IHt9IH0gfSk7XG4gICAgY29uc3QgY3R4MiA9IGF3YWl0IGdldENvbnRleHQoeyByZXE6IHsgaGVhZGVyczoge30gfSB9KTtcbiAgICBleHBlY3QoY3R4MS5yZXF1ZXN0SWQpLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KGN0eDIucmVxdWVzdElkKS50b0JlRGVmaW5lZCgpO1xuICAgIGV4cGVjdChjdHgxLnJlcXVlc3RJZCkubm90LnRvQmUoY3R4Mi5yZXF1ZXN0SWQpO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9