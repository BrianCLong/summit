{"file":"/Users/brianlong/Developer/summit/server/tests/stripe-raw-body.spec.ts","mappings":";;;;;AAAA,0DAAgC;AAChC,sDAA8B;AAC9B,kEAAgD;AAEhD,QAAQ,CAAC,uBAAuB,EAAE,GAAG,EAAE;IACrC,MAAM,GAAG,GAAG,IAAA,iBAAO,GAAE,CAAC;IACtB,GAAG,CAAC,GAAG,CAAC,kBAAkB,EAAE,gBAAmB,CAAC,CAAC;IAEjD,MAAM,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC;IACpD,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,qBAAqB,EAAE,KAAK,IAAI,EAAE;QACzD,MAAM,GAAG,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;aAC3B,IAAI,CAAC,yBAAyB,CAAC;aAC/B,GAAG,CAAC,cAAc,EAAE,kBAAkB,CAAC;aACvC,GAAG,CAAC,kBAAkB,EAAE,UAAU,CAAC;aACnC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC;QAC3D,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAChD,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["/Users/brianlong/Developer/summit/server/tests/stripe-raw-body.spec.ts"],"sourcesContent":["import request from 'supertest';\nimport express from 'express';\nimport stripeRouter from '../src/routes/stripe';\n\ndescribe('Stripe raw-body route', () => {\n  const app = express();\n  app.use('/webhooks/stripe', stripeRouter as any);\n\n  const enabled = !!process.env.STRIPE_WEBHOOK_SECRET;\n  (enabled ? it : it.skip)('accepts raw payload', async () => {\n    const res = await request(app)\n      .post('/webhooks/stripe/events')\n      .set('Content-Type', 'application/json')\n      .set('Stripe-Signature', 'v1=dummy')\n      .send(Buffer.from(JSON.stringify({ ok: true }), 'utf8'));\n    expect([200, 400, 503]).toContain(res.status);\n  });\n});\n\n"],"version":3}