7e0d4d80aa19563f80d77861c338e6ec
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const index_js_1 = require("../src/index.js");
test('task validates and executes', async () => {
    const t = (0, index_js_1.defineTask)({
        validate: ({ payload }) => {
            if (payload.n == null)
                throw new Error('n required');
        },
        execute: async (_ctx, { payload }) => ({ payload: { doubled: payload.n * 2 } }),
    });
    const ctx = (0, index_js_1.createRunContext)({});
    const out = await t.execute(ctx, { payload: { n: 2 } });
    expect(out.payload.doubled).toBe(4);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2JyaWFubG9uZy9EZXZlbG9wZXIvc3VtbWl0L3BhY2thZ2VzL3Nkay10cy90ZXN0L3Rhc2suc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDhDQUErRDtBQUUvRCxJQUFJLENBQUMsNkJBQTZCLEVBQUUsS0FBSyxJQUFJLEVBQUU7SUFDN0MsTUFBTSxDQUFDLEdBQUcsSUFBQSxxQkFBVSxFQUFxQztRQUN2RCxRQUFRLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7WUFDeEIsSUFBSSxPQUFPLENBQUMsQ0FBQyxJQUFJLElBQUk7Z0JBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUN2RCxDQUFDO1FBQ0QsT0FBTyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBRSxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUM7S0FDaEYsQ0FBQyxDQUFDO0lBQ0gsTUFBTSxHQUFHLEdBQUcsSUFBQSwyQkFBZ0IsRUFBQyxFQUFFLENBQUMsQ0FBQztJQUNqQyxNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUN4RCxNQUFNLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEMsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2JyaWFubG9uZy9EZXZlbG9wZXIvc3VtbWl0L3BhY2thZ2VzL3Nkay10cy90ZXN0L3Rhc2suc3BlYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZpbmVUYXNrLCBjcmVhdGVSdW5Db250ZXh0IH0gZnJvbSAnLi4vc3JjL2luZGV4LmpzJztcblxudGVzdCgndGFzayB2YWxpZGF0ZXMgYW5kIGV4ZWN1dGVzJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCB0ID0gZGVmaW5lVGFzazx7IG46IG51bWJlciB9LCB7IGRvdWJsZWQ6IG51bWJlciB9Pih7XG4gICAgdmFsaWRhdGU6ICh7IHBheWxvYWQgfSkgPT4ge1xuICAgICAgaWYgKHBheWxvYWQubiA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoJ24gcmVxdWlyZWQnKTtcbiAgICB9LFxuICAgIGV4ZWN1dGU6IGFzeW5jIChfY3R4LCB7IHBheWxvYWQgfSkgPT4gKHsgcGF5bG9hZDogeyBkb3VibGVkOiBwYXlsb2FkLm4gKiAyIH0gfSksXG4gIH0pO1xuICBjb25zdCBjdHggPSBjcmVhdGVSdW5Db250ZXh0KHt9KTtcbiAgY29uc3Qgb3V0ID0gYXdhaXQgdC5leGVjdXRlKGN0eCwgeyBwYXlsb2FkOiB7IG46IDIgfSB9KTtcbiAgZXhwZWN0KG91dC5wYXlsb2FkLmRvdWJsZWQpLnRvQmUoNCk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==