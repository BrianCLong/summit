# Evidence Bundle

This directory contains deterministic evidence artifacts generated by
`summit_evidence.write_bundle`. Only `stamp.json` may include timestamps.

## Schemas

- `schemas/report.schema.json`: Schema for the main evidence report.
- `schemas/metrics.schema.json`: Schema for metrics collected during execution.
- `schemas/stamp.schema.json`: Schema for the attestation stamp (versions, time).
- `schemas/index.schema.json`: Schema for the index file mapping IDs to artifacts.

## Usage

Run `tools/ci/verify_bundle.py` for legacy bundles and `ci/evidence_verify.py` for evidence runs
under `evidence/runs/`.

## Schema Validation

Validate these files against `schemas/*.schema.json`.

## Adding a new evidence bundle

1. Create a folder named `evidence/<EVIDENCE_ID>/` with `report.json`, `metrics.json`, and
   `stamp.json`.
2. Ensure only `stamp.json` contains timestamps.
3. Add the bundle paths to `evidence/index.json`.
4. Validate the bundle with the evidence verifier before committing changes.

## Evidence runs

Evidence runs under `evidence/runs/<run_id>/` must include `report.json`, `metrics.json`,
`stamp.json`, and `index.json`. Use `ci/evidence_verify.py` to validate run bundles.

### Evidence ID index entry format

Add a new entry under `items` in `evidence/index.json` that maps the evidence ID to the three
artifact paths:

```json
{
  "version": "1.0",
  "items": {
    "EVD-EXAMPLE-000": [
      "evidence/EVD-EXAMPLE-000/report.json",
      "evidence/EVD-EXAMPLE-000/metrics.json",
      "evidence/EVD-EXAMPLE-000/stamp.json"
    ]
  }
}
```
