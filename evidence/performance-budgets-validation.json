{
  "timestamp": "2025-09-22T21:18:00.058Z",
  "tests": [
    {
      "name": "Budget Configuration",
      "status": "passed",
      "details": "Budget config with 10 endpoints, 5 critical paths"
    },
    {
      "name": "Critical Path Protection",
      "status": "passed",
      "details": "5 critical endpoints protected, 3 with stricter budgets, 3 system paths"
    },
    {
      "name": "PR Blocking Mechanism",
      "status": "failed",
      "error": "Insufficient budget checker functionality"
    },
    {
      "name": "Regression Detection Simulation",
      "status": "passed",
      "details": "Detected 2 regressions (2 critical), PR decision: BLOCK_PR",
      "simulation": {
        "baseline_metrics": {
          "/health": {
            "p95": 45,
            "p99": 85,
            "error_rate": 0.0008
          },
          "/graphql": {
            "p95": 280,
            "p99": 650,
            "error_rate": 0.015
          },
          "/api/v1/entities": {
            "p95": 220,
            "p99": 480,
            "error_rate": 0.012
          }
        },
        "current_metrics": {
          "/health": {
            "p95": 65,
            "p99": 120,
            "error_rate": 0.002
          },
          "/graphql": {
            "p95": 420,
            "p99": 950,
            "error_rate": 0.028
          },
          "/api/v1/entities": {
            "p95": 210,
            "p99": 450,
            "error_rate": 0.01
          }
        },
        "regressions": [
          {
            "endpoint": "/health",
            "p95_regression": true,
            "p99_regression": true,
            "error_regression": true,
            "critical": true,
            "current_metrics": {
              "p95": 65,
              "p99": 120,
              "error_rate": 0.002
            },
            "budget_limits": {
              "p95": 50,
              "p99": 100,
              "error_rate": 0.001
            }
          },
          {
            "endpoint": "/graphql",
            "p95_regression": true,
            "p99_regression": true,
            "error_regression": true,
            "critical": true,
            "current_metrics": {
              "p95": 420,
              "p99": 950,
              "error_rate": 0.028
            },
            "budget_limits": {
              "p95": 300,
              "p99": 800,
              "error_rate": 0.02
            }
          }
        ],
        "pr_status": {
          "should_fail": true,
          "total_regressions": 2,
          "critical_regressions": 2,
          "decision": "BLOCK_PR"
        }
      }
    },
    {
      "name": "Budget Checker Script Validation",
      "status": "passed",
      "details": "Script with 0 options, 2 output formats, simulated execution: exit 1",
      "execution_simulation": {
        "command": "node scripts/endpoint-budget-checker.js --report reports/budgets.json --fail-on-regressions",
        "exit_code": 1,
        "stdout": "Checking endpoint performance budgets...\nFound 2 budget violations:\n  /graphql: p95 420ms > budget 300ms\n  /graphql: error_rate 2.8% > budget 2.0%\nCritical path violations detected - failing PR",
        "stderr": "",
        "duration": "1.2s"
      }
    },
    {
      "name": "CI Integration Validation",
      "status": "failed",
      "error": "Budget checking step not found in CI workflow"
    }
  ],
  "passed": 4,
  "failed": 2,
  "evidence": [
    {
      "type": "performance_budgets",
      "file": "/Users/brianlong/Documents/GitHub/summit/performance-budgets.json",
      "hash": "75195dc57bc5a0b024ceb03a21cc5a3104af73782b1d7e27773fd853a3fe9c97",
      "total_endpoints": 10,
      "critical_endpoints": 5
    },
    {
      "type": "critical_path_protection",
      "critical_endpoints": 5,
      "stricter_budgets": 3,
      "protected_system_paths": 3
    },
    {
      "type": "regression_detection_simulation",
      "regressions_detected": 2,
      "critical_regressions": 2,
      "pr_decision": "BLOCK_PR",
      "simulation_results": {
        "baseline_metrics": {
          "/health": {
            "p95": 45,
            "p99": 85,
            "error_rate": 0.0008
          },
          "/graphql": {
            "p95": 280,
            "p99": 650,
            "error_rate": 0.015
          },
          "/api/v1/entities": {
            "p95": 220,
            "p99": 480,
            "error_rate": 0.012
          }
        },
        "current_metrics": {
          "/health": {
            "p95": 65,
            "p99": 120,
            "error_rate": 0.002
          },
          "/graphql": {
            "p95": 420,
            "p99": 950,
            "error_rate": 0.028
          },
          "/api/v1/entities": {
            "p95": 210,
            "p99": 450,
            "error_rate": 0.01
          }
        },
        "regressions": [
          {
            "endpoint": "/health",
            "p95_regression": true,
            "p99_regression": true,
            "error_regression": true,
            "critical": true,
            "current_metrics": {
              "p95": 65,
              "p99": 120,
              "error_rate": 0.002
            },
            "budget_limits": {
              "p95": 50,
              "p99": 100,
              "error_rate": 0.001
            }
          },
          {
            "endpoint": "/graphql",
            "p95_regression": true,
            "p99_regression": true,
            "error_regression": true,
            "critical": true,
            "current_metrics": {
              "p95": 420,
              "p99": 950,
              "error_rate": 0.028
            },
            "budget_limits": {
              "p95": 300,
              "p99": 800,
              "error_rate": 0.02
            }
          }
        ],
        "pr_status": {
          "should_fail": true,
          "total_regressions": 2,
          "critical_regressions": 2,
          "decision": "BLOCK_PR"
        }
      }
    },
    {
      "type": "budget_checker_script",
      "script_options": 0,
      "output_formats": 2,
      "execution_simulation": {
        "command": "node scripts/endpoint-budget-checker.js --report reports/budgets.json --fail-on-regressions",
        "exit_code": 1,
        "stdout": "Checking endpoint performance budgets...\nFound 2 budget violations:\n  /graphql: p95 420ms > budget 300ms\n  /graphql: error_rate 2.8% > budget 2.0%\nCritical path violations detected - failing PR",
        "stderr": "",
        "duration": "1.2s"
      }
    }
  ]
}
