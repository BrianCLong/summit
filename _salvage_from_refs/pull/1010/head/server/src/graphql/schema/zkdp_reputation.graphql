type ZkProof { proofDigest: String!, createdAt: String!, stmt: JSON! }

type ZkBundleVerify { ok: Boolean!, digests: [String!]! }

type Reputation { publisher: String!, score: Float!, proofsOk: Int!, proofsTotal: Int!, violations30d: Int!, refunds30d: Int! }

extend type Mutation {
  submitZkProofs(runId: ID!, proofs: [JSON!]!): ZkBundleVerify!
  requestZkVerification(runId: ID!): ZkBundleVerify!
}

extend type Query {
  reputation(publisher: String!): Reputation!
  topPublishers(limit: Int = 20): [Reputation!]!
}
