name: model-eval
on: [workflow_dispatch]
jobs:
  eval:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: node mlops/eval/offline_eval.ts > eval.json
      - run: node -e "const m=require('./eval.json'); if(m.ndcg10_v2 < m.ndcg10_v1*0.98) process.exit(1)"