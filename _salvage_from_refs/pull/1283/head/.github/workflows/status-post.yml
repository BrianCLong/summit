name: status-post

on:
  workflow_dispatch:
    inputs:
      stage:
        description: Stage (5/25/50/100/rollback)
        type: choice
        options: ["5","25","50","100","rollback"]
        required: true
      status:
        description: Status (started/passed/failed)
        type: choice
        options: ["started","passed","failed"]
        required: true
      tag:
        description: Release tag (optional)
        type: string
        required: false

permissions:
  contents: read

jobs:
  post:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@b4ffde65f46336ab6514f2d1f2326a8303d5c9b2
      - name: Post Slack
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
        run: |
          bash scripts/ops/status_post.sh "${{ inputs.stage }}" "${{ inputs.status }}" "${{ inputs.tag }}"

