#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-push checks..."

# Ensure codegen artifacts are up to date
echo "ğŸ“ Regenerating GraphQL types and persisted operations..."
npm run -w client codegen

# Verify safelist synchronization
echo "âœ… Verifying safelist covers all client operations..."
npm run verify:safelist

# Run lints to catch any gql literal usage
echo "ğŸ”§ Checking for raw gql usage..."
npm run -w client lint

echo "âœ… Pre-push checks passed!"