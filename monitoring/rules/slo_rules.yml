groups:
  - name: api_slo
    rules:
      - record: slo:api_latency_p95
        expr: histogram_quantile(0.95, sum(rate(http_request_duration_seconds_bucket[5m])) by (le, job))
        labels:
          slo: "true"
      - record: slo:api_success_rate
        expr: sum(rate(http_requests_total{code!~"5.."}[5m])) by (job) / sum(rate(http_requests_total[5m])) by (job)
        labels:
          slo: "true"
