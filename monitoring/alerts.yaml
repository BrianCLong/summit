alerting_rules:
  - alert: HighErrorRate
    expr: rate(summit_errors_total[5m]) > 0.05
    for: 2m
    labels:
      severity: critical
    annotations:
      summary: "Error rate exceeding 5%"

  - alert: PerformanceDegradation
    expr: summit_request_duration_seconds{p99="0.1"} > 0.15
    for: 5m
    labels:
      severity: warning

  - alert: ConfigReloadFailure
    expr: summit_config_reload_failures_total > 0
    for: 1m
    labels:
      severity: critical

  - alert: LLMHighLatency
    expr: histogram_quantile(0.99, sum(rate(llm_request_duration_seconds_bucket[5m])) by (le, model)) > 10
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: "LLM Latency p99 > 10s for model {{ $labels.model }}"

  - alert: MaestroJobFailure
    expr: rate(maestro_job_execution_duration_seconds_count{status="failed"}[5m]) > 0
    for: 5m
    labels:
      severity: error
    annotations:
      summary: "Maestro Job Failures detected for job {{ $labels.job_type }}"
