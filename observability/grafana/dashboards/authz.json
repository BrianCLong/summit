{
  "uid": "authz-dashboard",
  "title": "AuthZ",
  "schemaVersion": 36,
  "version": 1,
  "tags": ["authz", "opa"],
  "timezone": "browser",
  "refresh": "30s",
  "panels": [
    {
      "type": "graph",
      "title": "AuthZ decisions",
      "id": 1,
      "datasource": "Prometheus",
      "targets": [{ "expr": "sum by (decision) (rate(authz_decisions_total[5m]))" }],
      "lines": true,
      "linewidth": 2,
      "legend": { "show": true }
    },
    {
      "type": "graph",
      "title": "AuthZ denies by reason",
      "id": 2,
      "datasource": "Prometheus",
      "targets": [{ "expr": "sum by (reason) (rate(authz_denies_total[5m]))" }],
      "lines": true,
      "linewidth": 2,
      "legend": { "show": true }
    },
    {
      "type": "stat",
      "title": "p95 decision latency (s)",
      "id": 3,
      "datasource": "Prometheus",
      "targets": [
        {
          "expr": "histogram_quantile(0.95, sum by (le) (rate(authz_decision_latency_seconds_bucket[5m])))"
        }
      ],
      "options": {
        "reduceOptions": { "calcs": ["lastNotNull"], "values": false },
        "colorMode": "value"
      }
    }
  ],
  "templating": {
    "list": []
  }
}
