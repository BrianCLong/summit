groups:
  - name: finops-alerts
    rules:
      - alert: DailyCostExceeded
        expr: sum(cost_total_daily) > 1000 # Example: $1000 daily budget
        for: 1h
        labels: { severity: critical }
        annotations: { summary: 'Daily cost budget exceeded' }
      - alert: TenantTotalCostWarning
        expr: sum by (tenant_id) (tenant_cost_total{period="day"}) > 800
        for: 30m
        labels: { severity: warning }
        annotations:
          summary: 'Tenant daily spend is above warning threshold'
          description: 'Tenant daily rollup exceeds $800 for the current window.'
      - alert: ComputeCostSpike
        expr: increase(tenant_cost_compute[1d]) > 500
        for: 15m
        labels: { severity: warning }
        annotations:
          summary: 'Compute cost spike detected'
          description: 'Daily compute allocation moved more than $500 in the last 24h.'
      - alert: EgressBudgetExceeded
        expr: sum by (tenant_id) (tenant_cost_network) > 200
        for: 30m
        labels: { severity: warning }
        annotations:
          summary: 'Egress cost threshold crossed'
          description: 'Network/egress spend for a tenant is exceeding the daily budget guardrail.'
