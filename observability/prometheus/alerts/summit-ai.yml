groups:
  - name: summit.ai
    rules:
      - alert: SummitAiHighErrorRate
        expr: |
          sum(rate(http_requests_total{service="summit-ai", status=~"5.."}[5m]))
          /
          sum(rate(http_requests_total{service="summit-ai"}[5m]))
          > 0.05
        for: 5m
        labels:
          severity: critical
          service: summit-ai
        annotations:
          summary: 'Summit AI Error Rate > 5%'
          description: 'Summit AI is experiencing high error rate ({{ $value | humanizePercentage }}).'

      - alert: SummitAiHighLatency
        expr: histogram_quantile(0.95, sum(rate(http_request_duration_seconds_bucket{service="summit-ai"}[5m])) by (le)) > 2.0
        for: 5m
        labels:
          severity: warning
          service: summit-ai
        annotations:
          summary: 'Summit AI P95 Latency > 2s'
          description: '95th percentile latency is {{ $value }}s.'
