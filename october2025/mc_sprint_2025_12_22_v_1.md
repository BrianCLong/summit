---
slug: mc-sprint-2025-12-22-v1
version: 1.0.0
date: 2025-12-22
status: Proposed
owner: Platform Eng • DevSecOps (MC)
confidentiality: Internal
---

# MC Sprint Plan — v27.7 Holiday Freeze: Stability, Coverage & Multi‑Lang

> Theme: **Stabilize during freeze, widen coverage, and prep 2026 scale‑out.** Focus on low‑risk, high‑leverage improvements: policy test coverage, multi‑language builders, counter‑influence detection, and runbook hardening. Minimal blast radius; fast rollback.

**Scope anchor:** `/orchestrations/mc`  
**Prereqs:** v27.6 golden paths + waiver bot live  
**Timebox:** 2 weeks (Dec 22, 2025 – Jan 2, 2026, America/Denver)  
**Freeze window:** Prod deploys discouraged except security hotfixes with approver quorum.

---

## 0) Retro Snapshot (from 2025‑12‑08)

- ✅ Controls manifest + license gating shipped; golden paths validated.  
- ⚠️ Waiver‑bot adoption at 70%; some repos lack CODEOWNERS for step‑up.  
- ❌ Limited policy test coverage; multi‑language templates incomplete.

---

## 1) Sprint Goals (Outcomes)

1. **Policy test coverage ≥ 85%** across OPA bundles (supply‑chain, license, bypass).  
2. **Multi‑language builders**: add **Go, Python, Java** golden paths with MC, SBOM, verify, DR hooks.  
3. **Counter‑influence detection v1** on PRs/tickets with non‑accusatory alerts + evidence.  
4. **Runbook hardening**: operator, incident, and compliance runbooks **reviewed + printable**; links embedded in PR templates.  
5. **Freeze guardrails**: explicit allowlist for hotfix deploys; automatic evidence capture on freeze exceptions.

---

## 2) Swimlanes

### A) Policy Coverage (Owner: DevSecOps)
- Expand unit/property tests for OPA; add mutation tests; coverage report.

### B) Multi‑Lang Builders (Owner: Platform + DX)
- Golden path scaffolds for Go/Python/Java; language‑specific SBOM tooling; sample services.

### C) Counter‑Influence (Owner: SecOps)
- Lightweight analyzer for PR/ticket metadata; alert to #security‑advisory with neutral language.

### D) Runbooks & PR Templates (Owner: DX)
- Printable runbooks; PR templates with checklists; links to evidence generators.

### E) Freeze Guardrails (Owner: Release + DevSecOps)
- Freeze exception workflow with quorum approvals + TTL; auto‑evidence zip.

---

## 3) User Stories & Acceptance Criteria

> ID: `MC7-<lane>-<n>`

### Policy Coverage
1. **MC7-POL-1** — *OPA unit/property tests to 85%*
   - **AC:** `policy/coverage.txt` shows ≥85%; CI job fails on regressions.
2. **MC7-POL-2** — *Mutation tests*
   - **AC:** Mutant kill‑rate ≥ 80% using rego‑mutate harness.

### Multi‑Lang Builders
3. **MC7-ML-1** — *Go golden path*
   - **AC:** `create-service go` template builds, signs, SBOMs (CycloneDX/Go); DR nightly passes.
4. **MC7-ML-2** — *Python golden path*
   - **AC:** `pip`/`uv` build, `pip-licenses` export; SBOM + license gate work; example app green.
5. **MC7-ML-3** — *Java golden path*
   - **AC:** Maven/Gradle SBOM (CycloneDX), signature & provenance; example app green.

### Counter‑Influence
6. **MC7-CINF-1** — *Anomaly detector v1*
   - **AC:** Alerts when: reviewer churn spikes, coordinated comment timing, forced merges outside freeze; alert text includes evidence links; no personal accusations.

### Runbooks & Templates
7. **MC7-RBK-1** — *Printable runbooks*
   - **AC:** `/docs/mc/runbooks/*.md` export to PDF; links included in PR templates.

### Freeze Guardrails
8. **MC7-FRZ-1** — *Freeze exception workflow*
   - **AC:** Workflow requires quorum (Security + Release + Owner), TTL ≤ 4h; auto evidence pack attached.

---

## 4) Deliverables & Artifacts

- `policy/tests/*` (rego unit/property/mutation samples, coverage harness).  
- `packages/create-service/templates/{go,python,java}/` with MC + workflows.  
- `.github/workflows/counter-influence.yml` (advisory alerts).  
- `.github/PULL_REQUEST_TEMPLATE.md` (holiday edition) with runbook links.  
- `.github/workflows/freeze-exception.yml` (quorum + evidence).  
- Dashboards: `dashboards/mc-policy-coverage.json`, `dashboards/mc-influence.json`.

---

## 5) Scaffolds & Snippets

### A) OPA Coverage Harness
```bash
# file: policy/coverage.sh
set -euo pipefail
conftest test --policy policy/opa policy/samples/*.json --trace | tee policy/coverage.txt
# (placeholder: integrate rego coverage once available in CI image)
```

### B) Rego Mutation Testing (pseudo)
```bash
# file: policy/mutate.sh
set -euo pipefail
rego-mutator run policy/opa --inputs policy/samples --report policy/mutation.json
jq '.kill_rate' policy/mutation.json | awk '{ if ($1+0 < 0.80) exit 1 }'
```

### C) Golden Path — Go (template highlights)
```yaml
# file: packages/create-service/templates/go/.github/workflows/ci-main.yml
name: CI Main (Go)
on: [push, pull_request]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-go@v5
        with: { go-version: '1.23.x' }
      - run: go build ./...
      - run: syft packages dir:. -o cyclonedx-json > sbom.json
      - uses: sigstore/cosign-installer@v3
      - run: |
          for a in $(git ls-files | grep -E '^dist/|^build/' || true); do cosign sign-blob --yes "$a"; done
      - uses: actions/upload-artifact@v4
        with: { name: sbom, path: sbom.json }
      - name: Conftest (supply-chain + license)
        uses: open-policy-agent/conftest-action@v1
        with: { files: sbom.json, policy: policy/opa }
```

### D) Golden Path — Python (template highlights)
```yaml
# file: packages/create-service/templates/python/.github/workflows/ci-main.yml
name: CI Main (Python)
on: [push, pull_request]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with: { python-version: '3.12' }
      - run: pip install -r requirements.txt
      - run: cyclonedx-py --format json -o sbom.json
      - run: pip-licenses --format=json > licenses.json
      - uses: sigstore/cosign-installer@v3
      - run: echo "sign artifacts as applicable"
      - name: Policy gates
        uses: open-policy-agent/conftest-action@v1
        with: { files: sbom.json, policy: policy/opa }
```

### E) Golden Path — Java (template highlights)
```yaml
# file: packages/create-service/templates/java/.github/workflows/ci-main.yml
name: CI Main (Java)
on: [push, pull_request]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-java@v4
        with: { distribution: 'temurin', java-version: '21' }
      - run: mvn -B -ntp -DskipTests package cyclonedx:makeAggregateBom
      - run: mvn -q -Dexec.executable=echo -Dexec.args='dist/*' exec:exec || true
      - uses: sigstore/cosign-installer@v3
      - run: echo "sign artifacts as applicable"
      - name: Policy gates
        uses: open-policy-agent/conftest-action@v1
        with: { files: target/bom.json, policy: policy/opa }
```

### F) Counter‑Influence Analyzer (advisory only)
```yaml
# file: .github/workflows/counter-influence.yml
name: Counter-Influence Advisory
on:
  issues: { types: [opened, edited, labeled] }
  pull_request: { types: [opened, edited, labeled, review_requested] }
permissions: { contents: read }
jobs:
  analyze:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Heuristics (neutral)
        run: |
          echo "Detect reviewer churn, time-bunched comments, freeze-window bypass labels"; echo "ADVISORY ONLY"
```

### G) Freeze Exception Workflow (quorum + evidence)
```yaml
# file: .github/workflows/freeze-exception.yml
name: Freeze Exception
on:
  workflow_dispatch:
    inputs:
      reason: { required: true, description: 'Why' }
      ttl_hours: { required: true, default: '4' }
permissions: { contents: write, id-token: write }
jobs:
  approve:
    runs-on: ubuntu-latest
    steps:
      - name: Require quorum (Security, Release, Owner)
        run: echo "Human approval required (manual step)"
  evidence:
    needs: approve
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: ./scripts/mc-evidence.sh freeze-$(date +%F)
```

### H) PR Template (holiday freeze)
```md
<!-- file: .github/PULL_REQUEST_TEMPLATE.md -->
### Freeze Checklist
- [ ] Is this a security hotfix?  
- [ ] Quorum approvals attached (Security, Release, Owner)  
- [ ] Evidence pack link  
- [ ] Rollback plan + toggle

### Runbooks
- Operator: /docs/mc/runbooks/operator.md  
- Incident: /docs/mc/runbooks/incident.md  
- Compliance: /docs/mc/runbooks/compliance.md
```

---

## 6) Observability & Dashboards

```json
// file: dashboards/mc-policy-coverage.json
{ "title": "MC Policy Coverage", "panels": [
  {"type":"stat","title":"OPA Coverage %","targets":[{"expr":"100 * mc_policy_tests_covered / mc_policy_tests_total"}]},
  {"type":"graph","title":"Mutation Kill Rate","targets":[{"expr":"avg(mc_policy_mutation_kill_rate)"}]}
]}
```

```json
// file: dashboards/mc-influence.json
{ "title": "Counter-Influence", "panels": [
  {"type":"table","title":"Advisories","targets":[{"expr":"mc_counter_influence_advisories"}]},
  {"type":"graph","title":"Reviewer Churn","targets":[{"expr":"rate(mc_reviewer_churn[1d])"}]}
]}
```

---

## 7) Risks & Mitigations

1. **Holiday coverage gaps** — focus on advisory‑mode features; clearly labeled; defer enforce changes.  
2. **False signals in counter‑influence** — advisory only; provide evidence links; no personal blame.  
3. **Language‑specific SBOM quirks** — use known CycloneDX generators; keep allowlist for initial rollout.  
4. **Template sprawl** — golden paths centralized under `packages/create-service` with nightly validation.

---

## 8) DOD, Gates & Rollback

**DOD**
- [ ] OPA coverage ≥ 85%; mutation kill‑rate ≥ 80%.  
- [ ] Go/Python/Java golden paths generate green MC runs with SBOM + verify.  
- [ ] Counter‑influence advisories visible in dashboard (no pages).  
- [ ] Runbooks printable; PR template updated.  
- [ ] Freeze exception workflow creates evidence packs.

**Rollback**
- Disable `counter-influence.yml`; revert templates to previous tag; ignore policy coverage gates (advisory only).

---

## 9) Timeline & Capacity (2 weeks, holiday‑adjusted)

- **D1–D2:** Coverage harness; mutation tests.  
- **D3–D5:** Go/Python golden paths; sample apps.  
- **D6–D7:** Java golden path; DR nightly wiring.  
- **D8–D9:** Counter‑influence advisory + dashboards.  
- **D10:** Runbooks/PR template; freeze workflow; demo.

**Estimate:** 20–24 pts (reduced capacity for holidays).

---

## 10) Ticket Seed (importable)

```yaml
# file: .project/tickets/mc-sprint-2025-12-22.yaml
sprint: mc-2025-12-22
board:
  columns: [Backlog, Ready, In Progress, Review, Blocked, Done]
issues:
  - id: MC7-POL-1
    title: Raise OPA policy coverage to 85%
    labels: [mc, policy, tests]
    assignees: [owner-sec]
    points: 5
  - id: MC7-POL-2
    title: Mutation tests (kill-rate ≥80%)
    labels: [mc, policy, tests]
    assignees: [owner-sec]
    points: 3
  - id: MC7-ML-1
    title: Go golden path template
    labels: [mc, platform, dx]
    assignees: [owner-platform, owner-dx]
    points: 4
  - id: MC7-ML-2
    title: Python golden path template
    labels: [mc, platform, dx]
    assignees: [owner-platform, owner-dx]
    points: 4
  - id: MC7-ML-3
    title: Java golden path template
    labels: [mc, platform, dx]
    assignees: [owner-platform, owner-dx]
    points: 4
  - id: MC7-CINF-1
    title: Counter-influence advisory workflow + dashboard
    labels: [mc, security, observability]
    assignees: [owner-sec, owner-sre]
    points: 2
  - id: MC7-RBK-1
    title: Printable runbooks + PR template
    labels: [mc, dx, docs]
    assignees: [owner-dx]
    points: 2
  - id: MC7-FRZ-1
    title: Freeze exception workflow + evidence
    labels: [mc, release, policy]
    assignees: [owner-release, owner-sec]
    points: 2
```

---

## 11) Evidence & Reporting

- KPIs: OPA coverage %, mutation kill‑rate, #golden‑path repos created, advisory count, freeze exceptions with evidence.  
- Artifacts: coverage.txt, mutation.json, sample app run URLs, dashboards.  
- Store under `docs/mc/evidence/2025-12-22/`.

---

## 12) Changelog

- **Added:** Multi‑lang golden paths; policy coverage harness; counter‑influence advisories; freeze exception workflow.  
- **Changed:** Runbooks and PR templates to be freeze‑aware.  
- **Fixed:** Low policy test coverage and incomplete language support.

