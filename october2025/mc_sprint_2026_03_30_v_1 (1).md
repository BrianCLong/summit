---
slug: mc-sprint-2026-03-30-v1
version: 1.0.0
date: 2026-03-30
status: Proposed
owner: Platform Eng • DevSecOps (MC)
confidentiality: Internal
---

# MC Sprint Plan — v28.6 Transparency Portal, Vendor Risk & Repo Trust

> Theme: **Make trust externally visible and supply‑chain risk continuously managed.** Ship a customer‑facing transparency portal (attestations/SBOM/provenance), automate third‑party/vendor intake, and detect repo trust shifts (maintainer changes, typosquats, abandoned deps).

**Scope anchor:** `/orchestrations/mc`  
**Prereqs:** v28.5 privacy gates live; v28.4 risk engine enabled  
**Timebox:** 2 weeks (Mar 30–Apr 10, 2026, America/Denver)

---

## 0) Retro Snapshot (from 2026‑03‑16)

- ✅ Privacy inventories with CI/Admission gates; runtime redaction + egress privacy in place.
- ⚠️ Inventory coverage ~92%; a few services pending owners/retention.
- ❌ No external visibility for customers; vendor risk intake remains manual; limited detection of repo trust anomalies.

---

## 1) Sprint Goals (Outcomes)

1. **Transparency Portal v1** (read‑only): per‑release **attestations, SBOM, provenance, controls coverage**, and signature status downloadable by customers.
2. **Vendor Risk Intake v1**: automated questionnaire + artifact upload (SBOM, SOC2, pen test); score **VendorRisk 0–100** with waivers (TTL ≤ 90d).
3. **Repo Trust Signals**: detect and alert on **maintainer turnover, new maintainers, sudden release frequency changes, package rename/typosquat**, license flips.
4. **Contractual Export Pack**: one‑click export of release evidence + privacy inventory + vendor posture for auditors/customers.
5. **Governance & Guardrails**: publish safe disclosure policy, rate‑limit portal access, and ensure no secrets/PII leakage.

---

## 2) Swimlanes

### A) Portal (Owner: DX + Platform)
- Next.js app reading from evidence store; signed download manifests; public cache & CDN headers.

### B) Vendor Risk (Owner: SecOps + Legal)
- Intake forms + storage; scoring model; waiver registry with approvers + TTL; reminders.

### C) Repo Trust & Typosquat (Owner: DevSecOps)
- Pull signals from package registries + GitHub; heuristic rules; PR/ticket advisories.

### D) Evidence Packaging (Owner: CI Guild)
- `mc evidence export --customer <id>`; ensure redaction & privacy rules respected.

### E) Governance & Hardening (Owner: SRE)
- Portal WAF rules, rate limiting, no‑PII tests; tamper‑evident logs.

---

## 3) User Stories & Acceptance Criteria

> ID: `MC14-<lane>-<n>`

### Portal
1. **MC14-PORT-1** — *Release page*
   - **AC:** For tag `vX.Y.Z`, portal shows signatures ✅, provenance ✅, SBOM link, controls coverage %, dashboards snapshot.
2. **MC14-PORT-2** — *Signed download manifest*
   - **AC:** Manifest (`manifest.json`) is cosign‑signed; includes hashes of downloadable artifacts.

### Vendor Risk
3. **MC14-VEND-1** — *Intake + scoring*
   - **AC:** Vendor form ingests SBOM/controls; score computed 0–100; high risk => ticket + waiver option (TTL ≤ 90d).
4. **MC14-VEND-2** — *Reminder & expiry*
   - **AC:** Expiring waivers auto‑notify owners 7/3/1 days prior; expired blocks promotion of affected deps.

### Repo Trust
5. **MC14-TRUST-1** — *Maintainer/typosquat detection*
   - **AC:** Alert when new maintainer added to critical package, maintainer churn spikes, or typosquat appears in diff; PR advisory created.
6. **MC14-TRUST-2** — *License flip guard*
   - **AC:** License change from permissive→copyleft triggers policy review + waiver option.

### Evidence Pack
7. **MC14-EVID-1** — *Customer export*
   - **AC:** Zip contains SBOM, signatures, attestations, controls CSV, privacy inventory, vendor risk table; single signed manifest.

### Governance
8. **MC14-GOV-1** — *No secrets/PII in portal*
   - **AC:** DLP scan = 0; privacy smoke test passes; WAF rate limits verified.

---

## 4) Deliverables & Artifacts

- App: `apps/transparency-portal` (Next.js) + `infra/cdn/` config.
- Vendor: `vendor/intake.yaml`, `vendor/scoring.yaml`, `.github/workflows/vendor-reminders.yml`.
- Trust: `risk/repo-trust.ts`, `.github/workflows/repo-trust-watch.yml`.
- Evidence: `scripts/mc-evidence-export.sh`, `docs/compliance/customer-readme.md`.
- Policies: `policy/opa/vendor.rego`, `policy/opa/trust.rego`.
- Dashboards: `dashboards/mc-portal.json`, `dashboards/mc-vendor.json`, `dashboards/mc-trust.json`.

---

## 5) Scaffolds & Snippets

### A) Transparency Portal (routes)
```tsx
// file: apps/transparency-portal/app/releases/[tag]/page.tsx
import data from '@/lib/evidence';
export default async function Release({ params }:{ params:{ tag:string }}){
  const r = await data.getRelease(params.tag);
  return (
    <main className="p-8 space-y-6">
      <h1 className="text-2xl font-bold">Release {r.tag}</h1>
      <div className="grid md:grid-cols-2 gap-4">
        <Card><CardContent>
          <p>Signatures: {r.signatures ? '✅' : '❌'}</p>
          <p>Provenance: {r.provenance ? '✅' : '❌'}</p>
          <p>Controls Coverage: {r.controlsPct}%</p>
        </CardContent></Card>
        <Card><CardContent>
          <a href={r.sbomUrl}>Download SBOM</a>
          <a href={r.manifestUrl} className="block">Signed Manifest</a>
        </CardContent></Card>
      </div>
    </main>
  );
}
```

### B) Signed Download Manifest
```bash
# file: scripts/portal-manifest.sh
set -euo pipefail
TAG=$1; OUT="public/$TAG/manifest.json"
jq -n --arg tag "$TAG" --argfile items <(ls public/$TAG | jq -R . | jq -s .) '{tag:$tag, items:$items}' > "$OUT"
cosign sign-blob --yes "$OUT"
```

### C) Vendor Scoring (policy‑as‑data)
```yaml
# file: vendor/scoring.yaml
weights:
  soc2: 20
  iso27001: 15
  pentest_recent: 10
  sbom_present: 10
  critical_vulns: -40
  high_vulns: -20
  maintainer_risk: -15
  license_copyleft: -10
thresholds: { acceptable: 60 }
```

```rego
# file: policy/opa/vendor.rego
package vendor
score := sum([input.soc2*20, input.iso27001*15, input.pentest_recent*10, input.sbom_present*10]) - (input.critical_vulns*40 + input.high_vulns*20) - (input.maintainer_risk*15) - (input.license_copyleft*10)
allow { score >= input.thresholds.acceptable }
```

### D) Repo Trust Watch (GitHub + NPM/PyPI)
```yaml
# file: .github/workflows/repo-trust-watch.yml
name: Repo Trust Watch
on:
  schedule: [{ cron: '0 */6 * * *' }]
jobs:
  trust:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: node risk/repo-trust.js  # queries registries & GH events; posts advisories
```

```ts
// file: risk/repo-trust.ts
export async function analyze(pkg:string){
  // pseudo: fetch maintainers, release cadence, license, look for confusingly similar names
  return { maintainerChurn: 2, licenseFlip:false, typosquatCandidates:[] };
}
```

### E) Evidence Export
```bash
# file: scripts/mc-evidence-export.sh
set -euo pipefail
REL="$1"; OUT="dist/evidence/$REL"; mkdir -p "$OUT"
cp docs/mc/evidence/$REL/* "$OUT/" || true
cp privacy/* "$OUT/" || true
cp vendor/*.json "$OUT/" || true
jq -n --arg rel "$REL" '{release:$rel, items: inputs}' < <(ls -1 "$OUT" | jq -R .) > "$OUT/manifest.json"
cosign sign-blob --yes "$OUT/manifest.json"
zip -r "$REL-customer-pack.zip" "$OUT"
```

### F) Trust Policy (license flip/typosquat)
```rego
# file: policy/opa/trust.rego
package trust

deny[msg] { input.license_prev in {"MIT","Apache-2.0"}; input.license_now == "GPL-3.0-only"; msg := "License flip requires review" }
warn[msg] { some t in input.typosquat; msg := sprintf("Potential typosquat: %s", [t]) }
```

---

## 6) Observability & Dashboards

```json
// file: dashboards/mc-portal.json
{ "title": "Transparency Portal", "panels": [
  {"type":"stat","title":"Public Packs Served (24h)","targets":[{"expr":"increase(mc_portal_downloads_total[1d])"}]},
  {"type":"graph","title":"Coverage: Releases with Attestation","targets":[{"expr":"mc_releases_attested / mc_releases_total"}]}
]}
```

```json
// file: dashboards/mc-vendor.json
{ "title": "Vendor Risk", "panels": [
  {"type":"histogram","title":"Vendor Risk Scores","targets":[{"expr":"histogram_quantile(0.5, sum(rate(mc_vendor_score_bucket[7d])) by (le))"}]},
  {"type":"table","title":"Expiring Waivers","targets":[{"expr":"mc_vendor_waivers_expiring_7d"}]}
]}
```

```json
// file: dashboards/mc-trust.json
{ "title": "Repo Trust Signals", "panels": [
  {"type":"stat","title":"Typosquat Alerts (7d)","targets":[{"expr":"increase(mc_typosquat_alerts_total[7d])"}]},
  {"type":"table","title":"Maintainer Changes (critical deps)","targets":[{"expr":"mc_maintainer_churn_critical"}]}
]}
```

---

## 7) Risks & Mitigations

1. **Portal leaks sensitive data** — DLP + privacy smoke tests; serve only curated evidence; signed manifests; rate‑limit + WAF.
2. **False typosquat/trust alerts** — advisory first; require manual confirmation; provide ignore list with TTL.
3. **Vendor friction** — keep initial scoring simple; allow guided waivers with TTL ≤ 90d; publish remediation checklists.
4. **Legal/compliance review delay** — parallel track with Legal; use standard templates and language.

---

## 8) DOD, Gates & Rollback

**DOD**
- [ ] Portal v1 live (internal + pilot customers), signed manifests served.  
- [ ] Vendor intake + scoring operational; expiring waivers reminders working.  
- [ ] Repo trust watch posting advisories; license flip guard firing.  
- [ ] Customer evidence export packs downloadable.  
- [ ] WAF/rate‑limit and DLP checks green.

**Rollback**
- Disable public routes; keep internal portal; pause vendor reminders; silence trust watch workflow.

---

## 9) Timeline & Capacity (2 weeks)

- **D1–D3:** Portal skeleton + evidence adapters; signed manifest.  
- **D4–D6:** Vendor intake + scoring; reminders.  
- **D7–D8:** Repo trust watch + typosquat/flip rules.  
- **D9–D10:** Customer export; WAF/DLP checks; demo & retro.

**Estimate:** 24–28 pts across Platform, Sec, CI, SRE, DX.

---

## 10) Ticket Seed (importable)

```yaml
# file: .project/tickets/mc-sprint-2026-03-30.yaml
sprint: mc-2026-03-30
board:
  columns: [Backlog, Ready, In Progress, Review, Blocked, Done]
issues:
  - id: MC14-PORT-1
    title: Transparency portal release page + signed manifest
    labels: [mc, portal, dx]
    assignees: [owner-dx, owner-platform]
    points: 6
  - id: MC14-VEND-1
    title: Vendor intake + risk scoring v1
    labels: [mc, vendor, policy]
    assignees: [owner-sec]
    points: 6
  - id: MC14-TRUST-1
    title: Repo trust watch (maintainer/typosquat/license)
    labels: [mc, supply-chain]
    assignees: [owner-sec]
    points: 5
  - id: MC14-EVID-1
    title: Customer evidence export pack
    labels: [mc, compliance]
    assignees: [owner-ci]
    points: 3
  - id: MC14-GOV-1
    title: Portal hardening (WAF, DLP, rate limit)
    labels: [mc, sre, security]
    assignees: [owner-sre]
    points: 4
```

---

## 11) Evidence & Reporting

- KPIs: portal packs served, releases attested %, vendor scores distribution, expiring waivers, trust alerts.  
- Artifacts: portal manifests, vendor intakes, trust watch logs, customer packs.  
- Store under `docs/mc/evidence/2026-03-30/`.

---

## 12) Changelog

- **Added:** Transparency portal v1; vendor risk intake; repo trust/typosquat alerts; customer export packs.  
- **Changed:** Evidence now consumable externally with signed manifests.  
- **Fixed:** Lack of continuous vendor and repo trust monitoring.

