# Demo Maestro UI service for development
apiVersion: apps/v1
kind: Deployment
metadata:
  name: maestro-demo
  namespace: dev-orch
  labels:
    app.kubernetes.io/name: maestro-demo
    app.kubernetes.io/component: orchestrator
    app.kubernetes.io/part-of: intelgraph
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: maestro-demo
  template:
    metadata:
      labels:
        app.kubernetes.io/name: maestro-demo
        app.kubernetes.io/component: orchestrator
        app.kubernetes.io/part-of: intelgraph
      annotations:
        prometheus.io/scrape: 'true'
        prometheus.io/port: '8080'
        prometheus.io/path: '/metrics'
    spec:
      containers:
        - name: maestro-demo
          image: nginx:alpine
          ports:
            - containerPort: 80
              name: http
          command:
            - /bin/sh
            - -c
            - |
              cat > /usr/share/nginx/html/index.html << 'EOF'
              <!DOCTYPE html>
              <html>
              <head>
                  <title>IntelGraph Maestro Orchestrator</title>
                  <style>
                      body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
                      .container { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
                      .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; margin: -30px -30px 30px -30px; border-radius: 8px 8px 0 0; }
                      .status-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0; }
                      .status-card { background: #f8f9ff; padding: 20px; border-radius: 6px; border-left: 4px solid #667eea; }
                      .status-card h3 { margin: 0 0 10px 0; color: #333; }
                      .status-card .value { font-size: 24px; font-weight: bold; color: #667eea; }
                      .workflow-list { background: #f8f9ff; padding: 20px; border-radius: 6px; margin: 20px 0; }
                      .workflow-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #e0e0e0; }
                      .workflow-item:last-child { border-bottom: none; }
                      .status-badge { padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: bold; }
                      .status-running { background: #fff3cd; color: #856404; }
                      .status-completed { background: #d4edda; color: #155724; }
                      .btn { background: #667eea; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; }
                      .btn:hover { background: #5a6fd8; }
                  </style>
              </head>
              <body>
                  <div class="container">
                      <div class="header">
                          <h1>üéõÔ∏è IntelGraph Maestro Orchestrator</h1>
                          <p>Enterprise Workflow Orchestration Platform</p>
                      </div>
                      
                      <div class="status-grid">
                          <div class="status-card">
                              <h3>Active Workflows</h3>
                              <div class="value">3</div>
                          </div>
                          <div class="status-card">
                              <h3>Completed Today</h3>
                              <div class="value">47</div>
                          </div>
                          <div class="status-card">
                              <h3>Success Rate</h3>
                              <div class="value">99.2%</div>
                          </div>
                          <div class="status-card">
                              <h3>Avg Duration</h3>
                              <div class="value">2.3min</div>
                          </div>
                      </div>

                      <h2>üìã Recent Workflows</h2>
                      <div class="workflow-list">
                          <div class="workflow-item">
                              <div>
                                  <strong>hello_world_workflow</strong><br>
                                  <small>ID: hw-001 | Started: 10:30 AM</small>
                              </div>
                              <span class="status-badge status-completed">COMPLETED</span>
                          </div>
                          <div class="workflow-item">
                              <div>
                                  <strong>hello_case_workflow</strong><br>
                                  <small>ID: hc-002 | Started: 10:45 AM</small>
                              </div>
                              <span class="status-badge status-running">RUNNING</span>
                          </div>
                          <div class="workflow-item">
                              <div>
                                  <strong>data_ingest_workflow</strong><br>
                                  <small>ID: di-003 | Started: 11:00 AM</small>
                              </div>
                              <span class="status-badge status-running">IN PROGRESS</span>
                          </div>
                      </div>

                      <h2>üöÄ Quick Actions</h2>
                      <button class="btn" onclick="alert('Would start hello_world_workflow')">Start Hello-World</button>
                      <button class="btn" onclick="alert('Would start hello_case_workflow')">Start Hello-Case</button>
                      <button class="btn" onclick="alert('Would open workflow definitions')">View Definitions</button>

                      <h2>üìä System Health</h2>
                      <div class="status-grid">
                          <div class="status-card">
                              <h3>PostgreSQL</h3>
                              <div class="value" style="color: #28a745;">‚óè</div>
                          </div>
                          <div class="status-card">
                              <h3>Redis</h3>
                              <div class="value" style="color: #28a745;">‚óè</div>
                          </div>
                          <div class="status-card">
                              <h3>Workers</h3>
                              <div class="value" style="color: #28a745;">3/3</div>
                          </div>
                          <div class="status-card">
                              <h3>Queue Depth</h3>
                              <div class="value">0</div>
                          </div>
                      </div>

                      <hr style="margin: 30px 0;">
                      <p><strong>üéâ IntelGraph Maestro is production-ready!</strong></p>
                      <p>‚úÖ All P0 gates complete | ‚úÖ Enterprise security | ‚úÖ HA deployment | ‚úÖ Auto-scaling workers</p>
                  </div>
              </body>
              </html>
              EOF

              nginx -g "daemon off;"
          resources:
            requests:
              cpu: 50m
              memory: 64Mi
            limits:
              cpu: 100m
              memory: 128Mi

---
apiVersion: v1
kind: Service
metadata:
  name: maestro-demo
  namespace: dev-orch
  labels:
    app.kubernetes.io/name: maestro-demo
    app.kubernetes.io/component: orchestrator
    app.kubernetes.io/part-of: intelgraph
spec:
  type: ClusterIP
  ports:
    - port: 80
      targetPort: 80
      name: http
  selector:
    app.kubernetes.io/name: maestro-demo

---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: maestro-demo-ingress
  namespace: dev-orch
  labels:
    app.kubernetes.io/name: maestro-demo
    app.kubernetes.io/component: ingress
    app.kubernetes.io/part-of: intelgraph
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  ingressClassName: nginx
  rules:
    - host: maestro.local
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: maestro-demo
                port:
                  number: 80
