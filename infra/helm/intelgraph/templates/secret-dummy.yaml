{{- if .Values.dev.dummySecrets }}
{{- $db := .Values.database | default dict }}
{{- $pgVals := (get $db "postgresql") | default dict }}
{{- $neoVals := (get $db "neo4j") | default dict }}
{{- $redisVals := (get $db "redis") | default dict }}
{{- $pgUserKey := default "username" (get $pgVals "usernameKey") }}
{{- $pgPassKey := default "password" (get $pgVals "passwordKey") }}
{{- $pgUrlKey := default "url" (get $pgVals "urlKey") }}
apiVersion: v1
kind: Secret
metadata:
  name: postgres
  labels:
    app.kubernetes.io/name: {{ include "intelgraph.name" . }}
    app.kubernetes.io/instance: {{ .Release.Name }}
    app.kubernetes.io/component: database
type: Opaque
data:
  {{ $pgUserKey }}: {{ "postgres" | b64enc }}
  {{ $pgPassKey }}: {{ "postgres" | b64enc }}
  {{ $pgUrlKey }}: {{ "postgres://postgres:postgres@postgres:5432/postgres" | b64enc }}
---
{{- $neoUserKey := default "username" (get $neoVals "usernameKey") }}
{{- $neoPassKey := default "password" (get $neoVals "passwordKey") }}
{{- $neoUriKey := default "uri" (get $neoVals "uriKey") }}
apiVersion: v1
kind: Secret
metadata:
  name: neo4j
  labels:
    app.kubernetes.io/name: {{ include "intelgraph.name" . }}
    app.kubernetes.io/instance: {{ .Release.Name }}
    app.kubernetes.io/component: graph
type: Opaque
data:
  {{ $neoUserKey }}: {{ "neo4j" | b64enc }}
  {{ $neoPassKey }}: {{ "neo4j" | b64enc }}
  {{ $neoUriKey }}: {{ "bolt://neo4j:7687" | b64enc }}
---
{{- $redisUserKey := default "username" (get $redisVals "usernameKey") }}
{{- $redisPassKey := default "password" (get $redisVals "passwordKey") }}
{{- $redisUrlKey := default "url" (get $redisVals "urlKey") }}
apiVersion: v1
kind: Secret
metadata:
  name: redis
  labels:
    app.kubernetes.io/name: {{ include "intelgraph.name" . }}
    app.kubernetes.io/instance: {{ .Release.Name }}
    app.kubernetes.io/component: cache
type: Opaque
data:
  {{ $redisUserKey }}: {{ "redis" | b64enc }}
  {{ $redisPassKey }}: {{ "redis" | b64enc }}
  {{ $redisUrlKey }}: {{ "redis://redis:6379" | b64enc }}
{{- end }}
