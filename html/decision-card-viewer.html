<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Decision Cards</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <style>
      body {
        font-family: sans-serif;
        margin: 20px;
      }
      .card {
        border: 1px solid #ddd;
        padding: 12px;
        border-radius: 12px;
        margin: 8px;
      }
      .meta {
        opacity: 0.7;
      }
    </style>
  </head>
  <body>
    <input id="q" placeholder="filter…" />
    <button id="sortCost">sort by cost</button>
    <div id="list"></div>
    <script>
      $(function () {
        var cards = []; // fetch or inject
        function render() {
          $('#list').empty();
          var q = $('#q').val().toLowerCase();
          $.each(cards, function (_, c) {
            if (q && !JSON.stringify(c).toLowerCase().includes(q)) return;
            $('#list').append(
              '<div class="card"><div><b>' +
                c.taskId +
                '</b> → ' +
                c.chosenArm +
                '</div><div class=meta>eval ' +
                c.predictedEval.toFixed(2) +
                ' · $' +
                c.predictedCostUSD.toFixed(2) +
                ' · ±' +
                c.uncertainty.toFixed(2) +
                '</div><pre>' +
                c.rationale +
                '</pre></div>',
            );
          });
        }
        $('#sortCost').on('click', function () {
          cards.sort(function (a, b) {
            return a.predictedCostUSD - b.predictedCostUSD;
          });
          render();
        });
        $('#q').on('input', render);
        // demo
        cards = [
          {
            taskId: 't1',
            chosenArm: 'impl@small',
            predictedEval: 0.93,
            predictedCostUSD: 0.21,
            uncertainty: 0.04,
            rationale: 'Cheapest capable based on low risk & small diff.',
          },
        ];
        render();
      });
    </script>
  </body>
</html>
