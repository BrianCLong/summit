Epic,Sprint,Story ID,Story Name,Description,Key Acceptance Criteria
"High-Risk Ops v0.1",S1,1.1,Create High-Risk Ops domain model,"Define persistence/graph entities for high-risk ops (request, approvals, execution, receipt).","Schema exists for `HighRiskOperationRequest`, `Approval`, `Execution`, `Receipt`; migrations applied; unit tests for CRUD."
"High-Risk Ops v0.1",S1,1.2,High-Risk Ops API (requests & approvals),"Implement APIs to create and approve high-risk op requests.","`POST /high-risk-ops/requests` creates request with validation; `POST /.../:id/approve` records approval; only allowed users can act; GET returns status + approvals."
"High-Risk Ops v0.1",S1,1.3,High-Risk Ops execution stub,"Implement execution endpoint for TEMP_DB_READ_ACCESS (no real DB yet).","`POST /.../:id/execute` only works for approved requests; logs stub “grant access”; records execution status; failed exec changes state."
"High-Risk Ops v0.1",S1,1.4,Minimal receipts for High-Risk Ops,"Emit receipts for creation, approvals, execution.","Each request has receipts for create/approve/execute; `GET /high-risk-ops/requests/:id/receipts` returns them."
"High-Risk Ops v0.1",S1,1.5,Switchboard: High-Risk Ops list view,"Basic Security workspace list view for high-risk ops.","Security workspace exists; list shows id, type, target, requester, status, created_at; detail view shows approvals & execution info."
"High-Risk Ops v0.1",S2,1.6,High-Risk Ops policy bundle v0.1,"Create Rego module for TEMP_DB_READ_ACCESS rules.","Rego enforces engineer-only requests, prod-only, duration ≤ 2h, approvals `[team_lead, security_officer]`; ≥5 tests cover allow/deny scenarios."
"High-Risk Ops v0.1",S2,1.7,Wire High-Risk Ops to policy engine,"Call OPA/ policy engine on request creation and execution.","Request creation denied if policy `allowed=false`; execution re-checks policy; decisions include bundle version and are logged/persisted."
"High-Risk Ops v0.1",S2,1.8,High-Risk Ops evidence bundle API,"Implement evidence export for a high-risk request.","`GET /evidence/high-risk-ops/:id` returns manifest + request + approvals + execution + receipts + policy decisions as stable JSON."
"High-Risk Ops v0.1",S2,1.9,Switchboard: High-Risk Ops evidence tab,"Add Evidence tab to High-Risk detail.","Evidence tab shows event timeline and download button that calls evidence API and succeeds on real data."
"RevOps v0.1",S1,2.1,RevOps domain model,"Define entities for Lead, Opportunity, Quote, ContractStub.","Entities persisted with migrations; unit tests for CRUD; relationships wired (Lead→Opp, Opp→Quote, Quote→ContractStub)."
"RevOps v0.1",S1,2.2,RevOps API (lead → opp → quote),"Implement APIs to create leads and quotes.","`POST /revops/leads` creates lead and auto-creates linked Opp with enterprise team owner; `POST /revops/quotes` attaches to opp with status `draft`; `GET` returns quote with refs."
"RevOps v0.1",S1,2.3,RevOps discount approval flow skeleton,"Implement submit/approve/activate endpoints for quotes.","`submit-for-approval` sets `pending_approval`; `approve` records approvals and moves to `approved` when complete (hard-coded >20% rule); `activate` only allowed for `approved` and creates ContractStub."
"RevOps v0.1",S1,2.4,Minimal receipts for RevOps,"Emit receipts for quote submission, approvals, activation.","Each quote has receipts for submission, each approval, and activation; `GET /revops/quotes/:id/receipts` returns them."
"RevOps v0.1",S1,2.5,Switchboard: RevOps list view,"Basic RevOps workspace list view for quotes.","RevOps workspace exists; list shows id, account, owner, discount %, status; detail shows quote summary, approvals, activation status."
"RevOps v0.1",S2,2.6,RevOps discount policy bundle v0.1,"Rego policy for discount approvals.","Policy takes quote segment, discount %, subject role; discount ≤20% → AE-only; >20% → manager+finance; tests cover AE-only, manager+finance, invalid role."
"RevOps v0.1",S2,2.7,Wire RevOps flows to policy engine,"Call OPA on quote submission & persist decisions.","`submit-for-approval` calls policy, stores required_approvals; approve validates approver’s role; decisions persisted with bundle version."
"RevOps v0.1",S2,2.8,RevOps evidence bundle API,"Evidence export for a RevOps deal/quote.","`GET /evidence/revops/deals/:id` returns lead, opp, quote, contract stub, policy decisions, receipts, plus manifest."
"RevOps v0.1",S2,2.9,Switchboard: RevOps evidence tab,"Add Evidence tab to quote detail.","Evidence tab shows approvals vs required chain, discount vs threshold, and supports download of evidence bundle."
"Policy & Graph",S2,3.1,Graph persistence for core entities,"Ensure core entities appear as graph nodes/relations.","Graph layer has nodes for User/Team/Tenant/HighRisk/Lead/Opp/Quote/ContractStub; relationships implemented for core paths (e.g., lead→opp→quote, request→user→approvals)."
"Policy & Graph",S2,3.2,Graph neighborhood API,"API to retrieve neighbors for UI.","`GET /graph/entities/:id/neighbors` returns entity + first-degree neighbors with relationship types; used successfully by UI for at least one High-Risk and one Quote."
"Policy & Graph",S2,3.3,PolicyDecision entity,"Persist policy decisions as first-class entities.","PolicyDecision records include input refs, decision payload, bundle version, timestamp; graph edges from request/quote to PolicyDecision; evidence includes their IDs."
"Metering & Billing v0.1",S3,4.1,UsageEvent schema & emitter,"Define UsageEvent and emit for key actions.","UsageEvent structure finalized; events emitted for `policy_decision` and `workflow_run` with tenant_id, pack, metadata; validated and stored."
"Metering & Billing v0.1",S3,4.2,Meter aggregation job,"Aggregate UsageEvents into daily meter readings.","Batch job runs and produces `meter_readings` per tenant/day for `policy_decisions_count` and `workflow_runs_count`; idempotent."
"Metering & Billing v0.1",S3,4.3,Price plan config & rating,"Implement simple price plan and rating pipeline.","Config defines one plan with base fee + per-1k policy decisions + per-1k workflow runs; rating job outputs `rated_usage` (tenant, period, meter, qty, unit_price, amount)."
"Metering & Billing v0.1",S3,4.4,Invoice JSON v0.1,"Expose computed invoice JSON per tenant/period.","`GET /billing/invoices/:tenant_id/:period` returns base + usage lines and total using `rated_usage` only."
"Metering & Billing v0.1",S3,4.5,Billing evidence bundle v0.1,"Evidence export for billing/economics.","`GET /evidence/billing/:tenant_id/:period` returns sample UsageEvents, MeterReadings, RatedUsage, invoice JSON + manifest."
"Dashboards & UX v0.1",S3,5.1,Dashboard: High-Risk Ops overview,"Simple High-Risk Ops dashboard.","Dashboard shows total requests, executed vs pending, count of requests missing receipts; clicking card opens filtered list."
"Dashboards & UX v0.1",S3,5.2,Dashboard: RevOps Governance v0.1,"Simple RevOps governance dashboard.","Shows # leads, # quotes, # quotes needing approvals, basic avg approval time; values driven from real data."
"Dashboards & UX v0.1",S3,5.3,Dashboard: FinOps Demo Economics,"Simple FinOps dashboard for demo tenant.","For `demo-external`, shows counts for policy decisions/workflow runs and rated usage $; link to invoice view."
"Dashboards & UX v0.1",S4,5.4,Context-aware detail views,"Improve detail pages for High-Risk & RevOps.","From list, user can open detail, see approvals + evidence summary, and download evidence bundle for both High-Risk requests and Quotes."
"Dashboards & UX v0.1",S4,5.5,Basic SLO panel,"Show simple SLO stats (latency, receipts).","Small SLO widget on dashboard showing policy p95 latency and missing-receipts count; wired to actual metrics or precomputed stats."
"Packaging & Dogfooding",S4,6.1,Summit internal tenant config,"Configure `summit-internal` tenant with packs enabled.","Tenant `summit-internal` exists with config enabling High-Risk Ops, RevOps, FinOps demo; at least 1–2 flows run end-to-end in this tenant successfully."
"Packaging & Dogfooding",S4,6.2,Demo external tenant seeding,"Configure `demo-external` tenant + seed data.","Seed script populates one high-risk request and one lead→opp→quote→activation path; metering/rating pick them up; dashboards show their data."
"Packaging & Dogfooding",S4,6.3,Trust & Proof Pack v0.1 SKU definition,"Define SKU/manifest for the pack.","Manifest lists: enabled workflows, dashboards, evidence APIs, policy bundles; docs describe how to enable for a tenant."
"Packaging & Dogfooding",S4,6.4,Demo script & runbook,"Write demo script and operator runbook.","Script covers: High-Risk flow, RevOps flow, FinOps dashboard + invoice; runbook describes resetting demo data and troubleshooting."
"Packaging & Dogfooding",S4,6.5,Basic reliability guardrails,"Add alerts for missing receipts and metering failures.","Alerts configured and tested: missing receipts → alert; metering job failure → alert; documented in runbook."
