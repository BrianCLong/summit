name: hygiene

on:
  pull_request:
    paths:
      - '.github/workflows/**'
      - 'scripts/**/*.sh'
      - 'scripts/*.sh'
      - '.github/workflows/hygiene.yml'

jobs:
  actionlint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run actionlint
        uses: rhysd/actionlint@v1

  shellcheck:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run shellcheck
        uses: ludeeus/action-shellcheck@2.0.0
        with:
          severity: warning
          ignore_paths: node_modules

  actions-pinned:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Check actions are pinned
        run: bash scripts/hygiene/check-pinned-actions.sh
