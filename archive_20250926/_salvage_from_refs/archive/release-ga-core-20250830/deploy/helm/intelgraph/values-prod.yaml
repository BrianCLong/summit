# Production environment overrides
global:
  tag: "2025.08.21+build.1"
  pullPolicy: Always
  
  ingress:
    host: intelgraph.mycorp.com
    annotations:
      nginx.ingress.kubernetes.io/rate-limit: "100"
      nginx.ingress.kubernetes.io/rate-limit-window: "1m"
      nginx.ingress.kubernetes.io/configuration-snippet: |
        more_set_headers "X-Frame-Options: DENY";
        more_set_headers "X-Content-Type-Options: nosniff";
        more_set_headers "X-XSS-Protection: 1; mode=block";
        more_set_headers "Referrer-Policy: strict-origin-when-cross-origin";
        more_set_headers "Permissions-Policy: camera=(), microphone=(), geolocation=()";
  
  otel:
    samplingRate: 0.05  # Reduced sampling for production

# Production scaling
services:
  apiGateway:
    replicaCount: 6
    resources:
      limits:
        cpu: "4"
        memory: "4Gi"
      requests:
        cpu: "1"
        memory: "1Gi"
  
  analytics:
    replicaCount: 4
    resources:
      limits:
        cpu: "2"
        memory: "2Gi"
      requests:
        cpu: "500m"
        memory: "512Mi"
  
  mlEngine:
    replicaCount: 4
    resources:
      limits:
        cpu: "8"
        memory: "8Gi"
      requests:
        cpu: "2"
        memory: "2Gi"
  
  graphAnalytics:
    replicaCount: 4
    resources:
      limits:
        cpu: "4"
        memory: "4Gi"
      requests:
        cpu: "1"
        memory: "1Gi"
  
  feedProcessor:
    replicaCount: 3
    resources:
      limits:
        cpu: "2"
        memory: "2Gi"
      requests:
        cpu: "500m"
        memory: "512Mi"
  
  searchEngine:
    replicaCount: 3
    resources:
      limits:
        cpu: "2"
        memory: "2Gi"
      requests:
        cpu: "500m"
        memory: "512Mi"
  
  workflowEngine:
    replicaCount: 3
    resources:
      limits:
        cpu: "2"
        memory: "2Gi"
      requests:
        cpu: "500m"
        memory: "512Mi"
  
  mobile:
    replicaCount: 3
    resources:
      limits:
        cpu: "1"
        memory: "1Gi"
      requests:
        cpu: "200m"
        memory: "256Mi"

# Production autoscaling
autoscaling:
  enabled: true
  minReplicas: 3
  maxReplicas: 20
  targetCPUUtilizationPercentage: 60
  targetMemoryUtilizationPercentage: 70
  behavior:
    scaleDown:
      stabilizationWindowSeconds: 300
      policies:
      - type: Percent
        value: 50
        periodSeconds: 60
    scaleUp:
      stabilizationWindowSeconds: 60
      policies:
      - type: Percent
        value: 100
        periodSeconds: 15

# Production monitoring
serviceMonitor:
  enabled: true
  interval: 10s
  scrapeTimeout: 5s
  
# Backup enabled in production
backup:
  enabled: true
  schedule: "0 2 * * *"
  retention: "90d"
  
# External secrets enabled
externalSecrets:
  enabled: true
  secretStore:
    provider: aws
    region: us-west-2
    roleArn: "arn:aws:iam::123456789012:role/intelgraph-secrets-role"

# Production security
security:
  podSecurityStandards:
    enforce: restricted
    audit: restricted 
    warn: restricted
  
  networkPolicies:
    defaultDeny: true
    allowIngress: true
    allowEgress: true
    
# Resource quotas
resourceQuota:
  enabled: true
  limits:
    cpu: "100"
    memory: "200Gi"
    persistentvolumeclaims: "50"
    
# Limit ranges
limitRange:
  enabled: true
  default:
    cpu: "1"
    memory: "1Gi"
  defaultRequest:
    cpu: "100m"
    memory: "128Mi"